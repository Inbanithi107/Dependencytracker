(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67034,(e,t,n)=>{!function(){var e={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return(n+r)*3/4-r},t.toByteArray=function(e){var t,n,a=l(e),o=a[0],s=a[1],u=new i((o+s)*3/4-s),c=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=0,s=r-i;o<s;o+=16383)a.push(function(e,t,r){for(var i,a=[],o=t;o<r;o+=3)i=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(n[i>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}(e,o,o+16383>s?s:o+16383));return 1===i?a.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&a.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=a.length;o<s;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}r[45]=62,r[95]=63},72:function(e,t,n){"use strict";var r=n(675),i=n(783),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e){var r=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!s.isEncoding(i))throw TypeError("Unknown encoding: "+i);var a=0|f(r,i),l=o(a),u=l.write(r,i);return u!==a&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(D(e,ArrayBuffer)||e&&D(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(D(e,SharedArrayBuffer)||e&&D(e.buffer,SharedArrayBuffer)))return function(e,t,n){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),s.prototype),r}(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return s.from(c,t,n);var p=function(e){if(s.isBuffer(e)){var t=0|d(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(p)return p;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|d(e))}function h(e){for(var t=e.length<0?0:0|d(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return(u(e),e<=0)?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)},s.allocUnsafe=function(e){return c(e)},s.allocUnsafeSlow=function(e){return c(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||D(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(i)return r?-1:k(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var i,a,o,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=_[e[a]];return i}(this,t,n);case"utf8":case"utf-8":return b(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return i=this,a=t,o=n,0===a&&o===i.length?r.fromByteArray(i):r.fromByteArray(i.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}(this,t,n);default:if(s)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){var a;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(a=n*=1)!=a&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length)if(i)return -1;else n=e.length-1;else if(n<0)if(!i)return -1;else n=0;if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,n);else return Uint8Array.prototype.lastIndexOf.call(e,t,n);return y(e,[t],n,r,i)}throw TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;o=2,s/=2,l/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else -1!==c&&(a-=a-c),c=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var h=!0,d=0;d<l;d++)if(u(e,a+d)!==u(t,d)){h=!1;break}if(h)return a}return -1}s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(D(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),D(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:+(r<n)},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;var n,r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(D(a,Uint8Array)&&(a=s.from(a)),!s.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(s.prototype[a]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,i){if(D(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,o=n-t,l=Math.min(a,o),u=this.slice(r,i),c=e.slice(t,n),h=0;h<l;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:+(o<a)},s.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)};function b(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,l,u=e[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:(192&(a=e[i+1]))==128&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[i+1],o=e[i+2],(192&a)==128&&(192&o)==128&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],(192&a)==128&&(192&o)==128&&(192&s)==128&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}var d=r,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,d.slice(g,g+=4096));return p}function x(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function w(e,t,n,r,i,a){if(!s.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function E(e,t,n,r,i,a){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function T(e,t,n,r,a){return t*=1,n>>>=0,a||E(e,t,n,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,n,r,23,4),n+4}function C(e,t,n,r,a){return t*=1,n>>>=0,a||E(e,t,n,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,n,r,52,8),n+8}s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,a,o,s,l,u,c,h,d=this.length-t;if((void 0===n||n>d)&&(n=d),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var f=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s,l=parseInt(t.substr(2*o,2),16);if((s=l)!=s)break;e[n+o]=l}return o}(this,e,t,n);case"utf8":case"utf-8":return i=t,a=n,A(k(e,this.length-i),this,i,a);case"ascii":return o=t,s=n,A(P(e),this,o,s);case"latin1":case"binary":return function(e,t,n,r){return A(P(t),e,n,r)}(this,e,t,n);case"base64":return l=t,u=n,A(B(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,h=n,A(function(e,t){for(var n,r,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i.push(n%256),i.push(r);return i}(e,this.length-c),this,c,h);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return(e>>>=0,t||x(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?0xffff0000|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?0xffff0000|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;w(this,e,t,n,i,0)}var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;w(this,e,t,n,i,0)}var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e*=1,t>>>=0,!r){var i=Math.pow(2,8*n-1);w(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e*=1,t>>>=0,!r){var i=Math.pow(2,8*n-1);w(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e*=1,t>>>=0,n||w(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return C(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return C(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var i,a=e.charCodeAt(0);("utf8"===r&&a<128||"latin1"===r)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var o=s.isBuffer(e)?e:s.from(e,r),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%l]}return this};var S=/[^+/0-9A-Za-z-_]/g;function k(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319||o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return a}function P(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function B(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length)&&!(i>=e.length);++i)t[i+n]=e[i];return i}function D(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var _=function(){for(var e="0123456789abcdef",t=Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},783:function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=u}return(f?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,h=c>>1,d=5960464477539062e-23*(23===i),f=r?0:a-1,p=r?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(s=+!!isNaN(t),o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+f]=255&o,f+=p,o/=256,u-=8);e[n+f-p]|=128*g}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var a=n[t]={exports:{}},o=!0;try{e[t](a,a.exports,r),o=!1}finally{o&&delete n[t]}return a.exports}r.ab="/ROOT/node_modules/next/dist/compiled/buffer/",t.exports=r(72)}()},83042,e=>{"use strict";e.s(["default",()=>h9],83042);var t,n,r,i,a,o,s,l=e.i(43476),u=e.i(47167);function c(e,t){return function(){return e.apply(t,arguments)}}let{toString:h}=Object.prototype,{getPrototypeOf:d}=Object,{iterator:f,toStringTag:p}=Symbol,g=(e=>t=>{let n=h.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),v=e=>(e=e.toLowerCase(),t=>g(t)===e),y=e=>t=>typeof t===e,{isArray:b}=Array,x=y("undefined");function w(e){return null!==e&&!x(e)&&null!==e.constructor&&!x(e.constructor)&&C(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let E=v("ArrayBuffer"),T=y("string"),C=y("function"),S=y("number"),k=e=>null!==e&&"object"==typeof e,P=e=>{if("object"!==g(e))return!1;let t=d(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(p in e)&&!(f in e)},B=v("Date"),A=v("File"),D=v("Blob"),_=v("FileList"),R=v("URLSearchParams"),[M,O,I,N]=["ReadableStream","Request","Response","Headers"].map(v);function L(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if("object"!=typeof e&&(e=[e]),b(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{let r;if(w(e))return;let a=i?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;for(n=0;n<o;n++)r=a[n],t.call(null,e[r],r,e)}}function z(e,t){let n;if(w(e))return null;t=t.toLowerCase();let r=Object.keys(e),i=r.length;for(;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}let F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g,V=e=>!x(e)&&e!==F,j=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&d(Uint8Array)),U=v("HTMLFormElement"),q=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),X=v("RegExp"),Y=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),r={};L(n,(n,i)=>{let a;!1!==(a=t(n,i,e))&&(r[i]=a||n)}),Object.defineProperties(e,r)},W=v("AsyncFunction"),H=(sK="function"==typeof setImmediate,sZ=C(F.postMessage),sK?setImmediate:sZ?((e,t)=>(F.addEventListener("message",n=>{let{source:r,data:i}=n;r===F&&i===e&&t.length&&t.shift()()},!1),n=>{t.push(n),F.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e)),G="undefined"!=typeof queueMicrotask?queueMicrotask.bind(F):void 0!==u.default&&u.default.nextTick||H,K={isArray:b,isArrayBuffer:E,isBuffer:w,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||C(e.append)&&("formdata"===(t=g(e))||"object"===t&&C(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&E(e.buffer)},isString:T,isNumber:S,isBoolean:e=>!0===e||!1===e,isObject:k,isPlainObject:P,isEmptyObject:e=>{if(!k(e)||w(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:M,isRequest:O,isResponse:I,isHeaders:N,isUndefined:x,isDate:B,isFile:A,isBlob:D,isRegExp:X,isFunction:C,isStream:e=>k(e)&&C(e.pipe),isURLSearchParams:R,isTypedArray:j,isFileList:_,forEach:L,merge:function e(){let{caseless:t,skipUndefined:n}=V(this)&&this||{},r={},i=(i,a)=>{let o=t&&z(r,a)||a;P(r[o])&&P(i)?r[o]=e(r[o],i):P(i)?r[o]=e({},i):b(i)?r[o]=i.slice():n&&x(i)||(r[o]=i)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&L(arguments[e],i);return r},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return L(t,(t,r)=>{n&&C(t)?e[r]=c(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],(!r||r(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=!1!==n&&d(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype)return t},kindOf:g,kindOfTest:v,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;let r=e.indexOf(t,n);return -1!==r&&r===n},toArray:e=>{if(!e)return null;if(b(e))return e;let t=e.length;if(!S(t))return null;let n=Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{let n,r=(e&&e[f]).call(e);for(;(n=r.next())&&!n.done;){let r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let n,r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:U,hasOwnProperty:q,hasOwnProp:q,reduceDescriptors:Y,freezeMethods:e=>{Y(e,(t,n)=>{if(C(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;if(C(e[n])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet:(e,t)=>{let n={};return(b(e)?e:String(e).split(t)).forEach(e=>{n[e]=!0}),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:z,global:F,isContextDefined:V,isSpecCompliantForm:function(e){return!!(e&&C(e.append)&&"FormData"===e[p]&&e[f])},toJSONObject:e=>{let t=Array(10),n=(e,r)=>{if(k(e)){if(t.indexOf(e)>=0)return;if(w(e))return e;if(!("toJSON"in e)){t[r]=e;let i=b(e)?[]:{};return L(e,(e,t)=>{let a=n(e,r+1);x(a)||(i[t]=a)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:W,isThenable:e=>e&&(k(e)||C(e))&&C(e.then)&&C(e.catch),setImmediate:H,asap:G,isIterable:e=>null!=e&&C(e[f])};var Z=e.i(67034);function $(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}K.inherits($,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.status}}});let Q=$.prototype,J={};function ee(e){return K.isPlainObject(e)||K.isArray(e)}function et(e){return K.endsWith(e,"[]")?e.slice(0,-2):e}function en(e,t,n){return e?e.concat(t).map(function(e,t){return e=et(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{J[e]={value:e}}),Object.defineProperties($,J),Object.defineProperty(Q,"isAxiosError",{value:!0}),$.from=(e,t,n,r,i,a)=>{let o=Object.create(Q);K.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);let s=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return $.call(o,s,l,n,r,i),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",a&&Object.assign(o,a),o};let er=K.toFlatObject(K,{},null,function(e){return/^is[A-Z]/.test(e)}),ei=function(e,t,n){if(!K.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let r=(n=K.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!K.isUndefined(t[e])})).metaTokens,i=n.visitor||u,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(i))throw TypeError("visitor must be a function");function l(e){if(null===e)return"";if(K.isDate(e))return e.toISOString();if(K.isBoolean(e))return e.toString();if(!s&&K.isBlob(e))throw new $("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(e)||K.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Z.Buffer.from(e):e}function u(e,n,i){let s=e;if(e&&!i&&"object"==typeof e)if(K.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else{var u;if(K.isArray(e)&&(u=e,K.isArray(u)&&!u.some(ee))||(K.isFileList(e)||K.endsWith(n,"[]"))&&(s=K.toArray(e)))return n=et(n),s.forEach(function(e,r){K.isUndefined(e)||null===e||t.append(!0===o?en([n],r,a):null===o?n:n+"[]",l(e))}),!1}return!!ee(e)||(t.append(en(i,n,a),l(e)),!1)}let c=[],h=Object.assign(er,{defaultVisitor:u,convertValue:l,isVisitable:ee});if(!K.isObject(e))throw TypeError("data must be an object");return!function e(n,r){if(!K.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),K.forEach(n,function(n,a){!0===(!(K.isUndefined(n)||null===n)&&i.call(t,n,K.isString(a)?a.trim():a,r,h))&&e(n,r?r.concat(a):[a])}),c.pop()}}(e),t};function ea(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function eo(e,t){this._pairs=[],e&&ei(e,this,t)}let es=eo.prototype;function el(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function eu(e,t,n){let r;if(!t)return e;let i=n&&n.encode||el;K.isFunction(n)&&(n={serialize:n});let a=n&&n.serialize;if(r=a?a(t,n):K.isURLSearchParams(t)?t.toString():new eo(t,n).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}es.append=function(e,t){this._pairs.push([e,t])},es.toString=function(e){let t=e?function(t){return e.call(this,t,ea)}:ea;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let ec=class{use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){K.forEach(this.handlers,function(t){null!==t&&e(t)})}constructor(){this.handlers=[]}},eh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ed="undefined"!=typeof URLSearchParams?URLSearchParams:eo,ef="undefined"!=typeof FormData?FormData:null,ep="undefined"!=typeof Blob?Blob:null;e.s(["hasBrowserEnv",()=>eg,"hasStandardBrowserEnv",()=>ey,"hasStandardBrowserWebWorkerEnv",()=>em,"navigator",()=>ev,"origin",()=>eb],57536);let eg="undefined"!=typeof window&&"undefined"!=typeof document,ev="object"==typeof navigator&&navigator||void 0,ey=eg&&(!ev||0>["ReactNative","NativeScript","NS"].indexOf(ev.product)),em="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,eb=eg&&window.location.href||"http://localhost",ex={...e.i(57536),isBrowser:!0,classes:{URLSearchParams:ed,FormData:ef,Blob:ep},protocols:["http","https","file","blob","url","data"]},ew=function(e){if(K.isFormData(e)&&K.isFunction(e.entries)){let t={};return K.forEachEntry(e,(e,n)=>{!function e(t,n,r,i){let a=t[i++];if("__proto__"===a)return!0;let o=Number.isFinite(+a),s=i>=t.length;return(a=!a&&K.isArray(r)?r.length:a,s)?K.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n:(r[a]&&K.isObject(r[a])||(r[a]=[]),e(t,n,r[a],i)&&K.isArray(r[a])&&(r[a]=function(e){let t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a]))),!o}(K.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),n,t,0)}),t}return null},eE={transitional:eh,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=K.isObject(e);if(a&&K.isHTMLForm(e)&&(e=new FormData(e)),K.isFormData(e))return i?JSON.stringify(ew(e)):e;if(K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e)||K.isReadableStream(e))return e;if(K.isArrayBufferView(e))return e.buffer;if(K.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1){var o,s;return(o=e,s=this.formSerializer,ei(o,new ex.classes.URLSearchParams,{visitor:function(e,t,n,r){return ex.isNode&&K.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...s})).toString()}if((n=K.isFileList(e))||r.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return ei(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}if(a||i){t.setContentType("application/json",!1);var l=e;if(K.isString(l))try{return(0,JSON.parse)(l),K.trim(l)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(l)}return e}],transformResponse:[function(e){let t=this.transitional||eE.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(K.isResponse(e)||K.isReadableStream(e))return e;if(e&&K.isString(e)&&(n&&!this.responseType||r)){let n=t&&t.silentJSONParsing;try{return JSON.parse(e,this.parseReviver)}catch(e){if(!n&&r){if("SyntaxError"===e.name)throw $.from(e,$.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ex.classes.FormData,Blob:ex.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],e=>{eE.headers[e]={}});let eT=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eC=Symbol("internals");function eS(e){return e&&String(e).trim().toLowerCase()}function ek(e){return!1===e||null==e?e:K.isArray(e)?e.map(ek):String(e)}function eP(e,t,n,r,i){if(K.isFunction(r))return r.call(this,t,n);if(i&&(t=n),K.isString(t)){if(K.isString(r))return -1!==t.indexOf(r);if(K.isRegExp(r))return r.test(t)}}class eB{set(e,t,n){let r=this;function i(e,t,n){let i=eS(t);if(!i)throw Error("header name must be a non-empty string");let a=K.findKey(r,i);a&&void 0!==r[a]&&!0!==n&&(void 0!==n||!1===r[a])||(r[a||t]=ek(e))}let a=(e,t)=>K.forEach(e,(e,n)=>i(e,n,t));if(K.isPlainObject(e)||e instanceof this.constructor)a(e,t);else{let r;if(K.isString(e)&&(e=e.trim())&&(r=e,!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim())))a((e=>{let t,n,r,i={};return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&eT[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)}),i})(e),t);else if(K.isObject(e)&&K.isIterable(e)){let n={},r,i;for(let t of e){if(!K.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[i=t[0]]=(r=n[i])?K.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}a(n,t)}else null!=e&&i(t,e,n)}return this}get(e,t){if(e=eS(e)){let n=K.findKey(this,e);if(n){let e=this[n];if(!t)return e;if(!0===t){let t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=r.exec(e);)n[t[1]]=t[2];return n}if(K.isFunction(t))return t.call(this,e,n);if(K.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=eS(e)){let n=K.findKey(this,e);return!!(n&&void 0!==this[n]&&(!t||eP(this,this[n],n,t)))}return!1}delete(e,t){let n=this,r=!1;function i(e){if(e=eS(e)){let i=K.findKey(n,e);i&&(!t||eP(n,n[i],i,t))&&(delete n[i],r=!0)}}return K.isArray(e)?e.forEach(i):i(e),r}clear(e){let t=Object.keys(this),n=t.length,r=!1;for(;n--;){let i=t[n];(!e||eP(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){let t=this,n={};return K.forEach(this,(r,i)=>{let a=K.findKey(n,i);if(a){t[a]=ek(r),delete t[i];return}let o=e?i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n):String(i).trim();o!==i&&delete t[i],t[o]=ek(r),n[o]=!0}),this}concat(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){let t=Object.create(null);return K.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&K.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=new this(e);return n.forEach(e=>i.set(e)),i}static accessor(e){let t=(this[eC]=this[eC]={accessors:{}}).accessors,n=this.prototype;function r(e){let r=eS(e);if(!t[r]){let i=K.toCamelCase(" "+e);["get","set","has"].forEach(t=>{Object.defineProperty(n,t+i,{value:function(n,r,i){return this[t].call(this,e,n,r,i)},configurable:!0})}),t[r]=!0}}return K.isArray(e)?e.forEach(r):r(e),this}constructor(e){e&&this.set(e)}}function eA(e,t){let n=this||eE,r=t||n,i=eB.from(r.headers),a=r.data;return K.forEach(e,function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function eD(e){return!!(e&&e.__CANCEL__)}function e_(e,t,n){$.call(this,null==e?"canceled":e,$.ERR_CANCELED,t,n),this.name="CanceledError"}function eR(e,t,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new $("Request failed with status code "+n.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}eB.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),K.reduceDescriptors(eB.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),K.freezeMethods(eB),K.inherits(e_,$,{__CANCEL__:!0});let eM=function(e,t){let n,r=Array(e=e||10),i=Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){let l=Date.now(),u=i[o];n||(n=l),r[a]=s,i[a]=l;let c=o,h=0;for(;c!==a;)h+=r[c++],c%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),l-n<t)return;let d=u&&l-u;return d?Math.round(1e3*h/d):void 0}},eO=function(e,t){let n,r,i=0,a=1e3/t,o=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=a,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let l=Date.now(),u=l-i;u>=a?o(t,l):(n=t,r||(r=setTimeout(()=>{r=null,o(n)},a-u)))},()=>n&&o(n)]},eI=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0,i=eM(50,250);return eO(n=>{let a=n.loaded,o=n.lengthComputable?n.total:void 0,s=a-r,l=i(s);r=a,e({loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})},n)},eN=(e,t)=>{let n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},eL=e=>function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return K.asap(()=>e(...n))},ez=ex.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ex.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ex.origin),ex.navigator&&/(msie|trident)/i.test(ex.navigator.userAgent)):()=>!0,eF=ex.hasStandardBrowserEnv?{write(e,t,n,r,i,a){let o=[e+"="+encodeURIComponent(t)];K.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),K.isString(r)&&o.push("path="+r),K.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function eV(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||!1==n)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let ej=e=>e instanceof eB?{...e}:e;function eU(e,t){t=t||{};let n={};function r(e,t,n,r){return K.isPlainObject(e)&&K.isPlainObject(t)?K.merge.call({caseless:r},e,t):K.isPlainObject(t)?K.merge({},t):K.isArray(t)?t.slice():t}function i(e,t,n,i){return K.isUndefined(t)?K.isUndefined(e)?void 0:r(void 0,e,n,i):r(e,t,n,i)}function a(e,t){if(!K.isUndefined(t))return r(void 0,t)}function o(e,t){return K.isUndefined(t)?K.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}let l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t,n)=>i(ej(e),ej(t),n,!0)};return K.forEach(Object.keys({...e,...t}),function(r){let a=l[r]||i,o=a(e[r],t[r],r);K.isUndefined(o)&&a!==s||(n[r]=o)}),n}let eq=e=>{let t=eU({},e),{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;if(t.headers=o=eB.from(o),t.url=eu(eV(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),K.isFormData(n)){if(ex.hasStandardBrowserEnv||ex.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(K.isFunction(n.getHeaders)){let e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,r]=e;t.includes(n.toLowerCase())&&o.set(n,r)})}}if(ex.hasStandardBrowserEnv&&(r&&K.isFunction(r)&&(r=r(t)),r||!1!==r&&ez(t.url))){let e=i&&a&&eF.read(a);e&&o.set(i,e)}return t},eX="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){let r,i,a,o,s,l=eq(e),u=l.data,c=eB.from(l.headers).normalize(),{responseType:h,onUploadProgress:d,onDownloadProgress:f}=l;function p(){o&&o(),s&&s(),l.cancelToken&&l.cancelToken.unsubscribe(r),l.signal&&l.signal.removeEventListener("abort",r)}let g=new XMLHttpRequest;function v(){if(!g)return;let r=eB.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());eR(function(e){t(e),p()},function(e){n(e),p()},{data:h&&"text"!==h&&"json"!==h?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}g.open(l.method.toUpperCase(),l.url,!0),g.timeout=l.timeout,"onloadend"in g?g.onloadend=v:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(v)},g.onabort=function(){g&&(n(new $("Request aborted",$.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){let r=new $(t&&t.message?t.message:"Network Error",$.ERR_NETWORK,e,g);r.event=t||null,n(r),g=null},g.ontimeout=function(){let t=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",r=l.transitional||eh;l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),n(new $(t,r.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,e,g)),g=null},void 0===u&&c.setContentType(null),"setRequestHeader"in g&&K.forEach(c.toJSON(),function(e,t){g.setRequestHeader(t,e)}),K.isUndefined(l.withCredentials)||(g.withCredentials=!!l.withCredentials),h&&"json"!==h&&(g.responseType=l.responseType),f&&([a,s]=eI(f,!0),g.addEventListener("progress",a)),d&&g.upload&&([i,o]=eI(d),g.upload.addEventListener("progress",i),g.upload.addEventListener("loadend",o)),(l.cancelToken||l.signal)&&(r=t=>{g&&(n(!t||t.type?new e_(null,e,g):t),g.abort(),g=null)},l.cancelToken&&l.cancelToken.subscribe(r),l.signal&&(l.signal.aborted?r():l.signal.addEventListener("abort",r)));let y=function(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(l.url);if(y&&-1===ex.protocols.indexOf(y))return void n(new $("Unsupported protocol "+y+":",$.ERR_BAD_REQUEST,e));g.send(u||null)})},eY=function*(e,t){let n,r=e.byteLength;if(!t||r<t)return void(yield e);let i=0;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},eW=async function*(e,t){for await(let n of eH(e))yield*eY(n,t)},eH=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},eG=(e,t,n,r)=>{let i,a=eW(e,t),o=0,s=e=>{!i&&(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{let{done:t,value:r}=await a.next();if(t){s(),e.close();return}let i=r.byteLength;if(n){let e=o+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw s(e),e}},cancel:e=>(s(e),a.return())},{highWaterMark:2})},{isFunction:eK}=K,eZ=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(K.global),{ReadableStream:e$,TextEncoder:eQ}=K.global,eJ=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];try{return!!e(...n)}catch(e){return!1}},e0=e=>{let t,{fetch:n,Request:r,Response:i}=e=K.merge.call({skipUndefined:!0},eZ,e),a=n?eK(n):"function"==typeof fetch,o=eK(r),s=eK(i);if(!a)return!1;let l=a&&eK(e$),u=a&&("function"==typeof eQ?(t=new eQ,e=>t.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer())),c=o&&l&&eJ(()=>{let e=!1,t=new r(ex.origin,{body:new e$,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h=s&&l&&eJ(()=>K.isReadableStream(new i("").body)),d={stream:h&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{d[e]||(d[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new $("Response type '".concat(e,"' is not supported"),$.ERR_NOT_SUPPORT,n)})});let f=async e=>{if(null==e)return 0;if(K.isBlob(e))return e.size;if(K.isSpecCompliantForm(e)){let t=new r(ex.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return K.isArrayBufferView(e)||K.isArrayBuffer(e)?e.byteLength:(K.isURLSearchParams(e)&&(e+=""),K.isString(e))?(await u(e)).byteLength:void 0},p=async(e,t)=>{let n=K.toFiniteNumber(e.getContentLength());return null==n?f(t):n};return async e=>{let t,{url:a,method:s,data:l,signal:u,cancelToken:f,timeout:g,onDownloadProgress:v,onUploadProgress:y,responseType:b,headers:x,withCredentials:w="same-origin",fetchOptions:E}=eq(e),T=n||fetch;b=b?(b+"").toLowerCase():"text";let C=((e,t)=>{let{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController,i=function(e){if(!n){n=!0,o();let t=e instanceof Error?e:this.reason;r.abort(t instanceof $?t:new e_(t instanceof Error?t.message:t))}},a=t&&setTimeout(()=>{a=null,i(new $("timeout ".concat(t," of ms exceeded"),$.ETIMEDOUT))},t),o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));let{signal:s}=r;return s.unsubscribe=()=>K.asap(o),s}})([u,f&&f.toAbortSignal()],g),S=null,k=C&&C.unsubscribe&&(()=>{C.unsubscribe()});try{if(y&&c&&"get"!==s&&"head"!==s&&0!==(t=await p(x,l))){let e,n=new r(a,{method:"POST",body:l,duplex:"half"});if(K.isFormData(l)&&(e=n.headers.get("content-type"))&&x.setContentType(e),n.body){let[e,r]=eN(t,eI(eL(y)));l=eG(n.body,65536,e,r)}}K.isString(w)||(w=w?"include":"omit");let n=o&&"credentials"in r.prototype,u={...E,signal:C,method:s.toUpperCase(),headers:x.normalize().toJSON(),body:l,duplex:"half",credentials:n?w:void 0};S=o&&new r(a,u);let f=await (o?T(S,E):T(a,u)),g=h&&("stream"===b||"response"===b);if(h&&(v||g&&k)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=f[t]});let t=K.toFiniteNumber(f.headers.get("content-length")),[n,r]=v&&eN(t,eI(eL(v),!0))||[];f=new i(eG(f.body,65536,n,()=>{r&&r(),k&&k()}),e)}b=b||"text";let P=await d[K.findKey(d,b)||"text"](f,e);return!g&&k&&k(),await new Promise((t,n)=>{eR(t,n,{data:P,headers:eB.from(f.headers),status:f.status,statusText:f.statusText,config:e,request:S})})}catch(t){if(k&&k(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new $("Network Error",$.ERR_NETWORK,e,S),{cause:t.cause||t});throw $.from(t,t&&t.code,e,S)}}},e1=new Map,e2=e=>{let t=e?e.env:{},{fetch:n,Request:r,Response:i}=t,a=[r,i,n],o=a.length,s,l,u=e1;for(;o--;)s=a[o],void 0===(l=u.get(s))&&u.set(s,l=o?new Map:e0(t)),u=l;return l};e2();let e5={http:null,xhr:eX,fetch:{get:e2}};K.forEach(e5,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let e3=e=>"- ".concat(e),e4=e=>K.isFunction(e)||null===e||!1===e,e6={getAdapter:(e,t)=>{let n,r,{length:i}=e=K.isArray(e)?e:[e],a={};for(let o=0;o<i;o++){let i;if(r=n=e[o],!e4(n)&&void 0===(r=e5[(i=String(n)).toLowerCase()]))throw new $("Unknown adapter '".concat(i,"'"));if(r&&(K.isFunction(r)||(r=r.get(t))))break;a[i||"#"+o]=r}if(!r){let e=Object.entries(a).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});throw new $("There is no suitable adapter to dispatch the request "+(i?e.length>1?"since :\n"+e.map(e3).join("\n"):" "+e3(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r}};function e8(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new e_(null,e)}function e9(e){return e8(e),e.headers=eB.from(e.headers),e.data=eA.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),e6.getAdapter(e.adapter||eE.adapter,e)(e).then(function(t){return e8(e),t.data=eA.call(e,e.transformResponse,t),t.headers=eB.from(t.headers),t},function(t){return!eD(t)&&(e8(e),t&&t.response&&(t.response.data=eA.call(e,e.transformResponse,t.response),t.response.headers=eB.from(t.response.headers))),Promise.reject(t)})}let e7="1.12.2",te={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{te[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});let tt={};te.transitional=function(e,t,n){function r(e,t){return"[Axios v"+e7+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new $(r(i," has been removed"+(t?" in "+t:"")),$.ERR_DEPRECATED);return t&&!tt[i]&&(tt[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},te.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};let tn={assertOptions:function(e,t,n){if("object"!=typeof e)throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),i=r.length;for(;i-- >0;){let a=r[i],o=t[a];if(o){let t=e[a],n=void 0===t||o(t,a,e);if(!0!==n)throw new $("option "+a+" must be "+n,$.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new $("Unknown option "+a,$.ERR_BAD_OPTION)}},validators:te},tr=tn.validators;class ti{async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){let n,r;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:i,paramsSerializer:a,headers:o}=t=eU(this.defaults,t);void 0!==i&&tn.assertOptions(i,{silentJSONParsing:tr.transitional(tr.boolean),forcedJSONParsing:tr.transitional(tr.boolean),clarifyTimeoutError:tr.transitional(tr.boolean)},!1),null!=a&&(K.isFunction(a)?t.paramsSerializer={serialize:a}:tn.assertOptions(a,{encode:tr.function,serialize:tr.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),tn.assertOptions(t,{baseUrl:tr.spelling("baseURL"),withXsrfToken:tr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=o&&K.merge(o.common,o[t.method]);o&&K.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=eB.concat(s,o);let l=[],u=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(u=u&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});let c=[];this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let h=0;if(!u){let e=[e9.bind(this),void 0];for(e.unshift(...l),e.push(...c),r=e.length,n=Promise.resolve(t);h<r;)n=n.then(e[h++],e[h++]);return n}r=l.length;let d=t;for(;h<r;){let e=l[h++],t=l[h++];try{d=e(d)}catch(e){t.call(this,e);break}}try{n=e9.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,r=c.length;h<r;)n=n.then(c[h++],c[h++]);return n}getUri(e){return eu(eV((e=eU(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}constructor(e){this.defaults=e||{},this.interceptors={request:new ec,response:new ec}}}K.forEach(["delete","get","head","options"],function(e){ti.prototype[e]=function(t,n){return this.request(eU(n||{},{method:e,url:t,data:(n||{}).data}))}}),K.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(eU(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ti.prototype[e]=t(),ti.prototype[e+"Form"]=t(!0)});class ta{throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason)return void e(this.reason);this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ta(function(t){e=t}),cancel:e}}constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});let n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t,r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new e_(e,r,i),t(n.reason))})}}let to={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(to).forEach(e=>{let[t,n]=e;to[n]=t});let ts=function e(t){let n=new ti(t),r=c(ti.prototype.request,n);return K.extend(r,ti.prototype,n,{allOwnKeys:!0}),K.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(eU(t,n))},r}(eE);ts.Axios=ti,ts.CanceledError=e_,ts.CancelToken=ta,ts.isCancel=eD,ts.VERSION=e7,ts.toFormData=ei,ts.AxiosError=$,ts.Cancel=ts.CanceledError,ts.all=function(e){return Promise.all(e)},ts.spread=function(e){return function(t){return e.apply(null,t)}},ts.isAxiosError=function(e){return K.isObject(e)&&!0===e.isAxiosError},ts.mergeConfig=eU,ts.AxiosHeaders=eB,ts.formToJSON=e=>ew(K.isHTMLForm(e)?new FormData(e):e),ts.getAdapter=e6.getAdapter,ts.HttpStatusCode=to,ts.default=ts;var tl=e.i(71645);function tu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tc(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function th(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tv(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function td(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tm(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function tf(e,t,n){return(t=tv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||tm(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tg(e){return function(e){if(Array.isArray(e))return tu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tm(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tv(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function ty(e){return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tm(e,t){if(e){if("string"==typeof e)return tu(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tu(e,t):void 0}}var tb="undefined"==typeof window?null:window,tx=tb?tb.navigator:null;tb&&tb.document;var tw=ty(""),tE=ty({}),tT=ty(function(){}),tC="undefined"==typeof HTMLElement?"undefined":ty(HTMLElement),tS=function(e){return e&&e.instanceString&&tP(e.instanceString)?e.instanceString():null},tk=function(e){return null!=e&&ty(e)==tw},tP=function(e){return null!=e&&ty(e)===tT},tB=function(e){return!tR(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},tA=function(e){return null!=e&&ty(e)===tE&&!tB(e)&&e.constructor===Object},tD=function(e){return null!=e&&ty(e)===ty(1)&&!isNaN(e)},t_=function(e){if("undefined"!==tC)return null!=e&&e instanceof HTMLElement},tR=function(e){return tM(e)||tO(e)},tM=function(e){return"collection"===tS(e)&&e._private.single},tO=function(e){return"collection"===tS(e)&&!e._private.single},tI=function(e){return"core"===tS(e)},tN=function(e){return"stylesheet"===tS(e)},tL=function(e){return null==e||!!(""===e||e.match(/^\s+$/))},tz=function(e){return null!=e&&ty(e)===tE&&tP(e.then)},tF=function(e,t){t||(t=function(){if(1==arguments.length)return arguments[0];if(0==arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var n=function(){var r,i=arguments,a=t.apply(this,i),o=n.cache;return(r=o[a])||(r=o[a]=e.apply(this,i)),r};return n.cache={},n},tV=tF(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),tj=tF(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),tU=tF(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),tq=function(e){return tL(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},tX=function(e,t){return e.slice(-1*t.length)===t},tY="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",tW="rgb[a]?\\(("+tY+"[%]?)\\s*,\\s*("+tY+"[%]?)\\s*,\\s*("+tY+"[%]?)(?:\\s*,\\s*("+tY+"))?\\)",tH="rgb[a]?\\((?:"+tY+"[%]?)\\s*,\\s*(?:"+tY+"[%]?)\\s*,\\s*(?:"+tY+"[%]?)(?:\\s*,\\s*(?:"+tY+"))?\\)",tG="hsl[a]?\\(("+tY+")\\s*,\\s*("+tY+"[%])\\s*,\\s*("+tY+"[%])(?:\\s*,\\s*("+tY+"))?\\)",tK="hsl[a]?\\((?:"+tY+")\\s*,\\s*(?:"+tY+"[%])\\s*,\\s*(?:"+tY+"[%])(?:\\s*,\\s*(?:"+tY+"))?\\)",tZ=function(e,t){return e<t?-1:+(e>t)},t$=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(null!=r)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a];e[o]=r[o]}}return e},tQ=function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,r;return 4===e.length?(t=parseInt(e[1]+e[1],16),n=parseInt(e[2]+e[2],16),r=parseInt(e[3]+e[3],16)):(t=parseInt(e[1]+e[2],16),n=parseInt(e[3]+e[4],16),r=parseInt(e[5]+e[6],16)),[t,n,r]}},tJ=function(e){function t(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n,r,i,a,o,s,l,u,c=RegExp("^"+tG+"$").exec(e);if(c){if((r=parseInt(c[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(i=parseFloat(c[2]))<0||i>100||(i/=100,(a=parseFloat(c[3]))<0||a>100)||(a/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1)))return;if(0===i)s=l=u=Math.round(255*a);else{var h=a<.5?a*(1+i):a+i-a*i,d=2*a-h;s=Math.round(255*t(d,h,r+1/3)),l=Math.round(255*t(d,h,r)),u=Math.round(255*t(d,h,r-1/3))}n=[s,l,u,o]}return n},t0=function(e){var t,n=RegExp("^"+tW+"$").exec(e);if(n){t=[];for(var r=[],i=1;i<=3;i++){var a=n[i];if("%"===a[a.length-1]&&(r[i]=!0),a=parseFloat(a),r[i]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var o=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(o&&!s)return;var l=n[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t},t1=function(e){return(tB(e)?e:null)||t2[e.toLowerCase()]||tQ(e)||t0(e)||tJ(e)},t2={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},t5=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(tA(a))throw Error("Tried to set map with object key");i<n.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}},t3=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(tA(a))throw Error("Tried to get map with object key");if(null==(t=t[a]))break}return t},t4="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g;function t6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t8(){return sQ?s$:(sQ=1,s$=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)})}function t9(){if(s2)return s1;s2=1;var e=s0?sJ:(s0=1,sJ="object"==typeof t4&&t4&&t4.Object===Object&&t4),t="object"==typeof self&&self&&self.Object===Object&&self;return s1=e||t||Function("return this")()}function t7(){return le?s7:(le=1,s7=t9().Symbol)}function ne(){if(lo)return la;lo=1;var e=t7(),t=function(){if(ln)return lt;ln=1;var e=t7(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;return lt=function(e){var t=n.call(e,i),a=e[i];try{e[i]=void 0;var o=!0}catch(e){}var s=r.call(e);return o&&(t?e[i]=a:delete e[i]),s}}(),n=function(){if(li)return lr;li=1;var e=Object.prototype.toString;return lr=function(t){return e.call(t)}}(),r=e?e.toStringTag:void 0;return la=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?t(e):n(e)}}function nt(){if(lc)return lu;lc=1;var e=ne(),t=ll?ls:(ll=1,ls=function(e){return null!=e&&"object"==typeof e});return lu=function(n){return"symbol"==typeof n||t(n)&&"[object Symbol]"==e(n)}}var nn=t6(function(){if(lp)return lf;lp=1;var e=t8(),t=function(){if(s3)return s5;s3=1;var e=t9();return s5=function(){return e.Date.now()}}(),n=function(){if(ld)return lh;ld=1;var e=function(){if(s9)return s8;s9=1;var e=function(){if(s6)return s4;s6=1;var e=/\s/;return s4=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}}(),t=/^\s+/;return s8=function(n){return n?n.slice(0,e(n)+1).replace(t,""):n}}(),t=t8(),n=nt(),r=0/0,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;return lh=function(l){if("number"==typeof l)return l;if(n(l))return r;if(t(l)){var u="function"==typeof l.valueOf?l.valueOf():l;l=t(u)?u+"":u}if("string"!=typeof l)return 0===l?l:+l;l=e(l);var c=a.test(l);return c||o.test(l)?s(l.slice(2),c?2:8):i.test(l)?r:+l}}(),r=Math.max,i=Math.min;return lf=function(a,o,s){var l,u,c,h,d,f,p=0,g=!1,v=!1,y=!0;if("function"!=typeof a)throw TypeError("Expected a function");function b(e){var t=l,n=u;return l=u=void 0,p=e,h=a.apply(n,t)}function x(e){var t=e-f,n=e-p;return void 0===f||t>=o||t<0||v&&n>=c}function w(){var e,n,r,a=t();if(x(a))return E(a);d=setTimeout(w,(e=a-f,n=a-p,r=o-e,v?i(r,c-n):r))}function E(e){return(d=void 0,y&&l)?b(e):(l=u=void 0,h)}function T(){var e,n=t(),r=x(n);if(l=arguments,u=this,f=n,r){if(void 0===d)return p=e=f,d=setTimeout(w,o),g?b(e):h;if(v)return clearTimeout(d),d=setTimeout(w,o),b(f)}return void 0===d&&(d=setTimeout(w,o)),h}return o=n(o)||0,e(s)&&(g=!!s.leading,c=(v="maxWait"in s)?r(n(s.maxWait)||0,o):c,y="trailing"in s?!!s.trailing:y),T.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=u=d=void 0},T.flush=function(){return void 0===d?h:E(t())},T}}()),nr=tb?tb.performance:null,ni=nr&&nr.now?function(){return nr.now()}:function(){return Date.now()},na=function(){if(tb){if(tb.requestAnimationFrame)return function(e){tb.requestAnimationFrame(e)};else if(tb.mozRequestAnimationFrame)return function(e){tb.mozRequestAnimationFrame(e)};else if(tb.webkitRequestAnimationFrame)return function(e){tb.webkitRequestAnimationFrame(e)};else if(tb.msRequestAnimationFrame)return function(e){tb.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(ni())},1e3/60)}}(),no=function(e){return na(e)},ns=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261,r=n;!(t=e.next()).done;)r=65599*r+t.value|0;return r},nl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;return 65599*t+e|0},nu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(t<<5)+t+e|0},nc=function(e){return 2097152*e[0]+e[1]},nh=function(e,t){return[nl(e[0],t[0]),nu(e[1],t[1])]},nd=function(e,t){var n={value:0,done:!1},r=0,i=e.length;return ns({next:function(){return r<i?n.value=e[r++]:n.done=!0,n}},t)},nf=function(e,t){var n={value:0,done:!1},r=0,i=e.length;return ns({next:function(){return r<i?n.value=e.charCodeAt(r++):n.done=!0,n}},t)},np=function(){return ng(arguments)},ng=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];t=0===n?nf(r):nf(r,t)}return t},nv=!0,ny=null!=console.warn,nm=null!=console.trace,nb=Number.MAX_SAFE_INTEGER||0x1fffffffffffff,nx=function(){return!0},nw=function(){return!1},nE=function(){return 0},nT=function(){},nC=function(e){throw Error(e)},nS=function(e){if(void 0===e)return nv;nv=!!e},nk=function(e){nS()&&(ny?console.warn(e):(console.log(e),nm&&console.trace()))},nP=function(e){return null==e?e:tB(e)?e.slice():tA(e)?t$({},e):e},nB=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},nA={},nD=function(){return nA},n_=function(e){var t=Object.keys(e);return function(n){for(var r={},i=0;i<t.length;i++){var a=t[i],o=null==n?void 0:n[a];r[a]=void 0===o?e[a]:o}return r}},nR=function(e,t,n){for(var r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1)},nM=function(e){e.splice(0,e.length)},nO=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},nI=function(e,t,n){return n&&(t=tU(n,t)),e[t]},nN=function(e,t,n,r){n&&(t=tU(n,t)),e[t]=r},nL=th(function e(){tc(this,e),this._obj={}},[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),nz="undefined"!=typeof Map?Map:nL,nF=th(function e(t){if(tc(this,e),this._obj=Object.create(null),this.size=0,null!=t){var n;n=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var r=0;r<n.length;r++)this.add(n[r])}},[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(t){return e.has(t)})}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}]),nV=("undefined"==typeof Set?"undefined":ty(Set))!=="undefined"?Set:nF,nj=function(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(void 0===e||void 0===t||!tI(e))return void nC("An element must have a core reference and parameters set");var r=t.group;if(null==r&&(r=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"!==r&&"edges"!==r)return void nC("An element must be of type `nodes` or `edges`; you specified `"+r+"`");this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===r:!!t.pannable,active:!1,classes:new nV,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),t.renderedPosition){var a=t.renderedPosition,o=e.pan(),s=e.zoom();i.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}var l=[];tB(t.classes)?l=t.classes:tk(t.classes)&&(l=t.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var h=l[u];h&&""!==h&&i.classes.add(h)}this.createEmitter(),(void 0===n||n)&&this.restore();var d=t.style||t.css;d&&(nk("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d))},nU=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,r){tA(t)&&!tR(t)&&(t=(i=t).roots||i.root,n=i.visit,r=i.directed),r=2!=arguments.length||tP(n)?r:n,n=tP(n)?n:function(){};for(var i,a,o,s=this._private.cy,l=t=tk(t)?this.filter(t):t,u=[],c=[],h={},d={},f={},p=0,g=this.byGroup(),v=g.nodes,y=g.edges,b=0;b<l.length;b++){var x=l[b],w=x.id();x.isNode()&&(u.unshift(x),e.bfs&&(f[w]=!0,c.push(x)),d[w]=0)}for(;0!==u.length&&(0===(o=function(){var t,i=e.bfs?u.shift():u.pop(),o=i.id();if(e.dfs){if(f[o])return 0;f[o]=!0,c.push(i)}var s=d[o],l=h[o],g=null!=l?l.source():null,b=null!=l?l.target():null,x=null==l?void 0:i.same(g)?b[0]:g[0];if(!0===(t=n(i,l,x,p++,s)))return a=i,1;if(!1===t)return 1;for(var w=i.connectedEdges().filter(function(e){return(!r||e.source().same(i))&&y.has(e)}),E=0;E<w.length;E++){var T=w[E],C=T.connectedNodes().filter(function(e){return!e.same(i)&&v.has(e)}),S=C.id();0===C.length||f[S]||(C=C[0],u.push(C),e.bfs&&(f[S]=!0,c.push(C)),h[S]=T,d[S]=d[o]+1)}}())||1!==o););for(var E=s.collection(),T=0;T<c.length;T++){var C=c[T],S=h[C.id()];null!=S&&E.push(S),E.push(C)}return{path:s.collection(E),found:s.collection(a)}}},nq={breadthFirstSearch:nU({bfs:!0}),depthFirstSearch:nU({dfs:!0})};nq.bfs=nq.breadthFirstSearch,nq.dfs=nq.depthFirstSearch;var nX={exports:{}},nY=nX.exports,nW=t6(ly?lv:(ly=1,lv=function(){return lg?nX.exports:(lg=1,(function(){var e,t,n,r,i,a,o,s,l,u,c,h,d,f,p;n=Math.floor,u=Math.min,t=function(e,t){return e<t?-1:+(e>t)},l=function(e,r,i,a,o){var s;if(null==i&&(i=0),null==o&&(o=t),i<0)throw Error("lo must be non-negative");for(null==a&&(a=e.length);i<a;)0>o(r,e[s=n((i+a)/2)])?a=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(r)),r},a=function(e,n,r){return null==r&&(r=t),e.push(n),f(e,0,e.length-1,r)},i=function(e,n){var r,i;return null==n&&(n=t),r=e.pop(),e.length?(i=e[0],e[0]=r,p(e,0,n)):i=r,i},s=function(e,n,r){var i;return null==r&&(r=t),i=e[0],e[0]=n,p(e,0,r),i},o=function(e,n,r){var i;return null==r&&(r=t),e.length&&0>r(e[0],n)&&(n=(i=[e[0],n])[0],e[0]=i[1],p(e,0,r)),n},r=function(e,r){var i,a,o,s,l,u;for(null==r&&(r=t),s=(function(){u=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}).apply(this).reverse(),l=[],a=0,o=s.length;a<o;a++)i=s[a],l.push(p(e,i,r));return l},d=function(e,n,r){var i;if(null==r&&(r=t),-1!==(i=e.indexOf(n)))return f(e,0,i,r),p(e,i,r)},c=function(e,n,i){var a,s,l,u;if(null==i&&(i=t),!(a=e.slice(0,n)).length)return a;for(r(a,i),s=0,l=(u=e.slice(n)).length;s<l;s++)o(a,u[s],i);return a.sort(i).reverse()},h=function(e,n,a){var o,s,c,h,d,f,p,g,v;if(null==a&&(a=t),10*n<=e.length){if(!(c=e.slice(0,n).sort(a)).length)return c;for(h=0,s=c[c.length-1],f=(p=e.slice(n)).length;h<f;h++)0>a(o=p[h],s)&&(l(c,o,0,null,a),c.pop(),s=c[c.length-1]);return c}for(r(e,a),v=[],d=0,g=u(n,e.length);0<=g?d<g:d>g;0<=g?++d:--d)v.push(i(e,a));return v},f=function(e,n,r,i){var a,o,s;for(null==i&&(i=t),a=e[r];r>n;){if(0>i(a,o=e[s=r-1>>1])){e[r]=o,r=s;continue}break}return e[r]=a},p=function(e,n,r){var i,a,o,s,l;for(null==r&&(r=t),a=e.length,l=n,o=e[n],i=2*n+1;i<a;)(s=i+1)<a&&!(0>r(e[i],e[s]))&&(i=s),e[n]=e[i],i=2*(n=i)+1;return e[n]=o,f(e,l,n,r)},e=function(){function e(e){this.cmp=null!=e?e:t,this.nodes=[]}return e.push=a,e.pop=i,e.replace=s,e.pushpop=o,e.heapify=r,e.updateItem=d,e.nlargest=c,e.nsmallest=h,e.prototype.push=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pop=function(){return i(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return -1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return o(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return r(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),nX.exports=e}).call(nY),nX.exports)}())),nH=n_({root:null,weight:function(e){return 1},directed:!1}),nG=n_({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),nK=n_({weight:function(e){return 1},directed:!1}),nZ=n_({weight:function(e){return 1},directed:!1,root:null}),n$=Math.sqrt(2),nQ=function(e,t,n){0===n.length&&nC("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],i=r[1],a=r[2],o=t[i],s=t[a],l=n.length-1;l>=0;l--){var u=n[l],c=u[1],h=u[2];(t[c]===o&&t[h]===s||t[c]===s&&t[h]===o)&&n.splice(l,1)}for(var d=0;d<n.length;d++){var f=n[d];f[1]===s?(n[d]=f.slice(),n[d][1]=o):f[2]===s&&(n[d]=f.slice(),n[d][2]=o)}for(var p=0;p<t.length;p++)t[p]===s&&(t[p]=o);return n},nJ=function(e,t,n,r){for(;n>r;)t=nQ(Math.floor(Math.random()*t.length),e,t),n--;return t},n0=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},n1=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},n2=function(e){return{x:e[0],y:e[1]}},n5=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=1/0,i=t;i<n;i++){var a=e[i];isFinite(a)&&(r=Math.min(a,r))}return r},n3=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=-1/0,i=t;i<n;i++){var a=e[i];isFinite(a)&&(r=Math.max(a,r))}return r},n4=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=0,i=0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(r+=o,i++)}return r/i},n6=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];r?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var o=0,s=e.length-1;s>=0;s--){var l=e[s];a?!isFinite(l)&&(e[s]=-1/0,o++):e.splice(s,1)}i&&e.sort(function(e,t){return e-t});var u=e.length,c=Math.floor(u/2);return u%2!=0?e[c+1+o]:(e[c-1+o]+e[c+o])/2},n8=function(e,t){return Math.atan2(t,e)-Math.PI/2},n9=Math.log2||function(e){return Math.log(e)/Math.log(2)},n7=function(e){return e>0?1:e<0?-1:0},re=function(e,t){return Math.sqrt(rt(e,t))},rt=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},rn=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},rr=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},ri=function(e,t,n,r){return{x:rr(e.x,t.x,n.x,r),y:rr(e.y,t.y,n.y,r)}},ra=function(e,t,n,r){var i={x:t.x-e.x,y:t.y-e.y},a=re(e,t),o={x:i.x/a,y:i.y/a};return n=null==n?0:n,r=null!=r?r:n*a,{x:e.x+o.x*r,y:e.y+o.y*r}},ro=function(e,t,n){return Math.max(e,Math.min(n,t))},rs=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};else if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},rl=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},ru=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},rc=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},rh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},rd=function(e){var t,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)t=n=r=i=a[0];else if(2===a.length)t=r=a[0],i=n=a[1];else if(4===a.length){var o=tp(a,4);t=o[0],n=o[1],r=o[2],i=o[3]}return e.x1-=i,e.x2+=n,e.y1-=t,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},rf=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},rp=function(e,t){return!(e.x1>t.x2)&&!(t.x1>e.x2)&&!(e.x2<t.x1)&&!(t.x2<e.x1)&&!(e.y2<t.y1)&&!(t.y2<e.y1)&&!(e.y1>t.y2)&&!(t.y1>e.y2)&&!0},rg=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},rv=function(e,t){return rg(e,t.x,t.y)},ry=function(e,t){return rg(e,t.x1,t.y1)&&rg(e,t.x2,t.y2)},rm=null!=(lm=Math.hypot)?lm:function(e,t){return Math.sqrt(e*e+t*t)},rb=function(e,t,n,r,i,a,o){var s,l,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",c="auto"===u?rq(i,a):u,h=i/2,d=a/2,f=(c=Math.min(c,h,d))!==h,p=c!==d;if(f){var g=n-h+c-o,v=r-d-o,y=n+h-c+o;if((s=rI(e,t,n,r,g,v,y,v,!1)).length>0)return s}if(p){var b=n+h+o,x=r-d+c-o,w=r+d-c+o;if((s=rI(e,t,n,r,b,x,b,w,!1)).length>0)return s}if(f){var E=n-h+c-o,T=r+d+o,C=n+h-c+o;if((s=rI(e,t,n,r,E,T,C,T,!1)).length>0)return s}if(p){var S=n-h-o,k=r-d+c-o,P=r+d-c+o;if((s=rI(e,t,n,r,S,k,S,P,!1)).length>0)return s}var B=n-h+c,A=r-d+c;if((l=rM(e,t,n,r,B,A,c+o)).length>0&&l[0]<=B&&l[1]<=A)return[l[0],l[1]];var D=n+h-c,_=r-d+c;if((l=rM(e,t,n,r,D,_,c+o)).length>0&&l[0]>=D&&l[1]<=_)return[l[0],l[1]];var R=n+h-c,M=r+d-c;if((l=rM(e,t,n,r,R,M,c+o)).length>0&&l[0]>=R&&l[1]>=M)return[l[0],l[1]];var O=n-h+c,I=r+d-c;return(l=rM(e,t,n,r,O,I,c+o)).length>0&&l[0]<=O&&l[1]>=I?[l[0],l[1]]:[]},rx=function(e,t,n,r,i,a,o){var s=Math.min(n,i),l=Math.max(n,i),u=Math.min(r,a),c=Math.max(r,a);return s-o<=e&&e<=l+o&&u-o<=t&&t<=c+o},rw=function(e,t,n,r,i,a,o,s,l){var u={x1:Math.min(n,o,i)-l,x2:Math.max(n,o,i)+l,y1:Math.min(r,s,a)-l,y2:Math.max(r,s,a)+l};return!(e<u.x1)&&!(e>u.x2)&&!(t<u.y1)&&!(t>u.y2)},rE=function(e,t,n,r){var i=t*t-4*e*(n-=r);if(i<0)return[];var a=Math.sqrt(i),o=2*e;return[(-t+a)/o,(-t-a)/o]},rT=function(e,t,n,r,i){var a,o,s,l,u,c,h,d;if(0===e&&(e=1e-5),t/=e,n/=e,r/=e,a=(o=(3*n-t*t)/9)*o*o+(s=(-(27*r)+t*(9*n-t*t*2))/54)*s,i[1]=0,h=t/3,a>0){u=(u=s+Math.sqrt(a))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(a))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+u+c,h+=(u+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+u)/2,i[3]=h,i[5]=-h;return}if(i[5]=i[3]=0,0===a){d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-h+2*d,i[4]=i[2]=-(d+h);return}l=Math.acos(s/Math.sqrt(l=(o=-o)*o*o)),d=2*Math.sqrt(o),i[0]=-h+d*Math.cos(l/3),i[2]=-h+d*Math.cos((l+2*Math.PI)/3),i[4]=-h+d*Math.cos((l+4*Math.PI)/3)},rC=function(e,t,n,r,i,a,o,s){var l,u=[];rT(n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*a+2*r*s+4*a*a-4*a*s+s*s,9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*a-3*r*r-3*r*s-6*a*a+3*a*s,3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*r*r-6*r*a+r*s-r*t+2*a*a+2*a*t-s*t,n*i-n*n+n*e-i*e+r*a-r*r+r*t-a*t,u);for(var c=[],h=0;h<6;h+=2)1e-7>Math.abs(u[h+1])&&u[h]>=0&&u[h]<=1&&c.push(u[h]);c.push(1),c.push(0);for(var d=-1,f=0;f<c.length;f++)l=Math.pow(Math.pow(1-c[f],2)*n+2*(1-c[f])*c[f]*i+c[f]*c[f]*o-e,2)+Math.pow(Math.pow(1-c[f],2)*r+2*(1-c[f])*c[f]*a+c[f]*c[f]*s-t,2),d>=0?l<d&&(d=l):d=l;return d},rS=function(e,t,n,r,i,a){var o=[e-n,t-r],s=[i-n,a-r],l=s[0]*s[0]+s[1]*s[1],u=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],h=c*c/l;return c<0?u:h>l?(e-i)*(e-i)+(t-a)*(t-a):u-h},rk=function(e,t,n){for(var r,i,a,o,s=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(a=n[(l+1)*2],o=n[(l+1)*2+1]):(a=n[(l+1-n.length/2)*2],o=n[(l+1-n.length/2)*2+1]),r==e&&a==e);else{if((!(r>=e)||!(e>=a))&&(!(r<=e)||!(e<=a)))continue;(e-r)/(a-r)*(o-i)+i>t&&s++}return s%2!=0},rP=function(e,t,n,r,i,a,o,s,l){var u,c=Array(n.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var h=Math.cos(-u),d=Math.sin(-u),f=0;f<c.length/2;f++)c[2*f]=a/2*(n[2*f]*h-n[2*f+1]*d),c[2*f+1]=o/2*(n[2*f+1]*h+n[2*f]*d),c[2*f]+=r,c[2*f+1]+=i;return rk(e,t,l>0?rA(rD(c,-l)):c)},rB=function(e,t,n,r,i,a,o,s){for(var l=Array(2*n.length),u=0;u<s.length;u++){var c=s[u];if(l[4*u+0]=c.startX,l[4*u+1]=c.startY,l[4*u+2]=c.stopX,l[4*u+3]=c.stopY,Math.pow(c.cx-e,2)+Math.pow(c.cy-t,2)<=Math.pow(c.radius,2))return!0}return rk(e,t,l)},rA=function(e){for(var t,n,r,i,a,o,s,l,u=Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],n=e[4*c+1],r=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(a=e[(c+1)*4],o=e[(c+1)*4+1],s=e[(c+1)*4+2],l=e[(c+1)*4+3]):(a=e[0],o=e[1],s=e[2],l=e[3]);var h=rI(t,n,r,i,a,o,s,l,!0);u[2*c]=h[0],u[2*c+1]=h[1]}return u},rD=function(e,t){for(var n,r,i,a,o=Array(2*e.length),s=0;s<e.length/2;s++){n=e[2*s],r=e[2*s+1],s<e.length/2-1?(i=e[(s+1)*2],a=e[(s+1)*2+1]):(i=e[0],a=e[1]);var l=a-r,u=-(i-n),c=Math.sqrt(l*l+u*u),h=l/c,d=u/c;o[4*s]=n+h*t,o[4*s+1]=r+d*t,o[4*s+2]=i+h*t,o[4*s+3]=a+d*t}return o},r_=function(e,t,n,r,i,a){var o=n-e,s=r-t,l=Math.sqrt((o/=i)*o+(s/=a)*s),u=l-1;if(u<0)return[];var c=u/l;return[(n-e)*c+e,(r-t)*c+t]},rR=function(e,t,n,r,i,a,o){return e-=i,t-=a,(e/=n/2+o)*e+(t/=r/2+o)*t<=1},rM=function(e,t,n,r,i,a,o){var s=[n-e,r-t],l=[e-i,t-a],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),h=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-o*o);if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*u),f=(-c-Math.sqrt(h))/(2*u),p=Math.min(d,f),g=Math.max(d,f),v=[];if(p>=0&&p<=1&&v.push(p),g>=0&&g<=1&&v.push(g),0===v.length)return[];var y=v[0]*s[0]+e,b=v[0]*s[1]+t;return v.length>1?v[0]==v[1]?[y,b]:[y,b,v[1]*s[0]+e,v[1]*s[1]+t]:[y,b]},rO=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},rI=function(e,t,n,r,i,a,o,s,l){var u=e-i,c=n-e,h=o-i,d=t-a,f=r-t,p=s-a,g=h*d-p*u,v=c*d-f*u,y=p*c-h*f;if(0!==y){var b=g/y,x=v/y;return -.001<=b&&b<=1.001&&-.001<=x&&x<=1.001||l?[e+b*c,t+b*f]:[]}return 0!==g&&0!==v?[]:rO(e,n,o)===o?[o,s]:rO(e,n,i)===i?[i,a]:rO(i,o,n)===n?[n,r]:[]},rN=function(e,t,n,r,i){var a=[],o=r/2,s=i/2;a.push({x:t+o*e[0],y:n+s*e[1]});for(var l=1;l<e.length/2;l++)a.push({x:t+o*e[2*l],y:n+s*e[2*l+1]});return a},rL=function(e,t,n,r,i,a,o,s){var l,u,c,h,d,f,p=[],g=Array(n.length),v=!0;if(null==a&&(v=!1),v){for(var y=0;y<g.length/2;y++)g[2*y]=n[2*y]*a+r,g[2*y+1]=n[2*y+1]*o+i;u=s>0?rA(rD(g,-s)):g}else u=n;for(var b=0;b<u.length/2;b++)c=u[2*b],h=u[2*b+1],b<u.length/2-1?(d=u[(b+1)*2],f=u[(b+1)*2+1]):(d=u[0],f=u[1]),0!==(l=rI(e,t,r,i,c,h,d,f)).length&&p.push(l[0],l[1]);return p},rz=function(e,t,n,r,i,a,o,s,l){var u,c=[],h=Array(2*n.length);l.forEach(function(n,a){0===a?(h[h.length-2]=n.startX,h[h.length-1]=n.startY):(h[4*a-2]=n.startX,h[4*a-1]=n.startY),h[4*a]=n.stopX,h[4*a+1]=n.stopY,0!==(u=rM(e,t,r,i,n.cx,n.cy,n.radius)).length&&c.push(u[0],u[1])});for(var d=0;d<h.length/4;d++)0!==(u=rI(e,t,r,i,h[4*d],h[4*d+1],h[4*d+2],h[4*d+3],!1)).length&&c.push(u[0],u[1]);if(c.length>2){for(var f=[c[0],c[1]],p=Math.pow(f[0]-e,2)+Math.pow(f[1]-t,2),g=1;g<c.length/2;g++){var v=Math.pow(c[2*g]-e,2)+Math.pow(c[2*g+1]-t,2);v<=p&&(f[0]=c[2*g],f[1]=c[2*g+1],p=v)}return f}return c},rF=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(i-n)/i;return a<0&&(a=1e-5),[t[0]+a*r[0],t[1]+a*r[1]]},rV=function(e,t){var n=rU(e,t);return rj(n)},rj=function(e){for(var t,n,r=e.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;l<r;l++)t=e[2*l],n=e[2*l+1],i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);for(var u=2/(o-i),c=2/(s-a),h=0;h<r;h++)t=e[2*h]=e[2*h]*u,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);if(a<-1)for(var d=0;d<r;d++)n=e[2*d+1]=e[2*d+1]+(-1-a);return e},rU=function(e,t){var n,r=1/e*2*Math.PI,i=e%2==0?Math.PI/2+r/2:Math.PI/2;i+=t;for(var a=Array(2*e),o=0;o<e;o++)n=o*r+i,a[2*o]=Math.cos(n),a[2*o+1]=Math.sin(-n);return a},rq=function(e,t){return Math.min(e/4,t/4,8)},rX=function(e,t){return Math.min(e/10,t/10,8)},rY=function(){return 8},rW=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function rH(e,t){function n(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=e[(n+1)%e.length],a={x:i.x-r.x,y:i.y-r.y},o={x:-a.y,y:a.x},s=Math.sqrt(o.x*o.x+o.y*o.y);t.push({x:o.x/s,y:o.y/s})}return t}function r(e,t){var n,r=1/0,i=-1/0,a=td(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.x*t.x+o.y*t.y;r=Math.min(r,s),i=Math.max(i,s)}}catch(e){a.e(e)}finally{a.f()}return{min:r,max:i}}var i,a=td([].concat(tg(n(e)),tg(n(t))));try{for(a.s();!(i=a.n()).done;){var o=i.value,s=r(e,o),l=r(t,o);if(s.max<l.min||l.max<s.min)return!1}}catch(e){a.e(e)}finally{a.f()}return!0}var rG=n_({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),rK=n_({root:null,weight:function(e){return 1},directed:!1,alpha:0}),rZ={degreeCentralityNormalized:function(e){e=rK(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var i={},a={},o=0,s=0,l=0;l<r;l++){var u=n[l],c=u.id();e.root=u;var h=this.degreeCentrality(e);o<h.indegree&&(o=h.indegree),s<h.outdegree&&(s=h.outdegree),i[c]=h.indegree,a[c]=h.outdegree}return{indegree:function(e){return 0==o?0:(tk(e)&&(e=t.filter(e)),i[e.id()]/o)},outdegree:function(e){return 0===s?0:(tk(e)&&(e=t.filter(e)),a[e.id()]/s)}}}for(var d={},f=0,p=0;p<r;p++){var g=n[p];e.root=g;var v=this.degreeCentrality(e);f<v.degree&&(f=v.degree),d[g.id()]=v.degree}return{degree:function(e){return 0===f?0:(tk(e)&&(e=t.filter(e)),d[e.id()]/f)}}},degreeCentrality:function(e){e=rK(e);var t=this.cy(),n=this,r=e,i=r.root,a=r.weight,o=r.directed,s=r.alpha;if(i=t.collection(i)[0],o){for(var l=i.connectedEdges(),u=l.filter(function(e){return e.target().same(i)&&n.has(e)}),c=l.filter(function(e){return e.source().same(i)&&n.has(e)}),h=u.length,d=c.length,f=0,p=0,g=0;g<u.length;g++)f+=a(u[g]);for(var v=0;v<c.length;v++)p+=a(c[v]);return{indegree:Math.pow(h,1-s)*Math.pow(f,s),outdegree:Math.pow(d,1-s)*Math.pow(p,s)}}for(var y=i.connectedEdges().intersection(n),b=y.length,x=0,w=0;w<y.length;w++)x+=a(y[w]);return{degree:Math.pow(b,1-s)*Math.pow(x,s)}}};rZ.dc=rZ.degreeCentrality,rZ.dcn=rZ.degreeCentralityNormalised=rZ.degreeCentralityNormalized;var r$=n_({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),rQ={closenessCentralityNormalized:function(e){for(var t=r$(e),n=t.harmonic,r=t.weight,i=t.directed,a=this.cy(),o={},s=0,l=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),c=0;c<l.length;c++){for(var h=0,d=l[c],f=0;f<l.length;f++)if(c!==f){var p=u.distance(d,l[f]);n?h+=1/p:h+=p}n||(h=1/h),s<h&&(s=h),o[d.id()]=h}return{closeness:function(e){return 0==s?0:o[e=tk(e)?a.filter(e)[0].id():e.id()]/s}}},closenessCentrality:function(e){var t=r$(e),n=t.root,r=t.weight,i=t.directed,a=t.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(n)){var h=o.distanceTo(c);a?s+=1/h:s+=h}}return a?s:1/s}};rQ.cc=rQ.closenessCentrality,rQ.ccn=rQ.closenessCentralityNormalised=rQ.closenessCentralityNormalized;var rJ=n_({weight:null,directed:!1}),r0={betweennessCentrality:function(e){for(var t=rJ(e),n=t.directed,r=t.weight,i=null!=r,a=this.cy(),o=this.nodes(),s={},l={},u=0,c=function(e,t){l[e]=t,t>u&&(u=t)},h=function(e){return l[e]},d=0;d<o.length;d++){var f=o[d],p=f.id();n?s[p]=f.outgoers().nodes():s[p]=f.openNeighborhood().nodes(),c(p,0)}for(var g=0;g<o.length;g++)!function(){for(var e=o[g].id(),t=[],n={},l={},u={},d=new nW(function(e,t){return u[e]-u[t]}),f=0;f<o.length;f++){var p=o[f].id();n[p]=[],l[p]=0,u[p]=1/0}for(l[e]=1,u[e]=0,d.push(e);!d.empty();){var v=d.pop();if(t.push(v),i)for(var y=0;y<s[v].length;y++){var b=s[v][y],x=a.getElementById(v),w=r(x.edgesTo(b).length>0?x.edgesTo(b)[0]:b.edgesTo(x)[0]);u[b=b.id()]>u[v]+w&&(u[b]=u[v]+w,0>d.nodes.indexOf(b)?d.push(b):d.updateItem(b),l[b]=0,n[b]=[]),u[b]==u[v]+w&&(l[b]=l[b]+l[v],n[b].push(v))}else for(var E=0;E<s[v].length;E++){var T=s[v][E].id();u[T]==1/0&&(d.push(T),u[T]=u[v]+1),u[T]==u[v]+1&&(l[T]=l[T]+l[v],n[T].push(v))}}for(var C={},S=0;S<o.length;S++)C[o[S].id()]=0;for(;t.length>0;){for(var k=t.pop(),P=0;P<n[k].length;P++){var B=n[k][P];C[B]=C[B]+l[B]/l[k]*(1+C[k])}k!=o[g].id()&&c(k,h(k)+C[k])}}();var v={betweenness:function(e){return h(a.collection(e).id())},betweennessNormalized:function(e){return 0==u?0:h(a.collection(e).id())/u}};return v.betweennessNormalised=v.betweennessNormalized,v}};r0.bc=r0.betweennessCentrality;var r1=n_({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),r2=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},r5=function(e,t,n){for(var r=0;r<t;r++)e[r*t+r]=n},r3=function(e,t){for(var n,r=0;r<t;r++){n=0;for(var i=0;i<t;i++)n+=e[i*t+r];for(var a=0;a<t;a++)e[a*t+r]=e[a*t+r]/n}},r4=function(e,t,n){for(var r=Array(n*n),i=0;i<n;i++){for(var a=0;a<n;a++)r[i*n+a]=0;for(var o=0;o<n;o++)for(var s=0;s<n;s++)r[i*n+s]+=e[i*n+o]*t[o*n+s]}return r},r6=function(e,t,n){for(var r=e.slice(0),i=1;i<n;i++)e=r4(e,r,t);return e},r8=function(e,t,n){for(var r=Array(t*t),i=0;i<t*t;i++)r[i]=Math.pow(e[i],n);return r3(r,t),r},r9=function(e,t,n,r){for(var i=0;i<n;i++)if(Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},r7=function(e,t,n,r){for(var i=[],a=0;a<t;a++){for(var o=[],s=0;s<t;s++)Math.round(1e3*e[a*t+s])/1e3>0&&o.push(n[s]);0!==o.length&&i.push(r.collection(o))}return i},ie=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},it=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&ie(e[t],e[n])&&e.splice(n,1);return e},ir=function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),i=r1(e),a={},o=0;o<t.length;o++)a[t[o].id()]=o;for(var s,l=t.length,u=l*l,c=Array(u),h=0;h<u;h++)c[h]=0;for(var d=0;d<n.length;d++){var f=n[d],p=a[f.source().id()],g=a[f.target().id()],v=r2(f,i.attributes);c[p*l+g]+=v,c[g*l+p]+=v}r5(c,l,i.multFactor),r3(c,l);for(var y=!0,b=0;y&&b<i.maxIterations;)y=!1,r9(c=r8(s=r6(c,l,i.expandFactor),l,i.inflateFactor),s,u,4)||(y=!0),b++;var x=r7(c,l,t,r);return it(x)},ii=function(e){return e},ia=function(e,t){return Math.abs(t-e)},io=function(e,t,n){return e+ia(t,n)},is=function(e,t,n){return e+Math.pow(n-t,2)},il=function(e){return Math.sqrt(e)},iu=function(e,t,n){return Math.max(e,ia(t,n))},ic=function(e,t,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ii,o=r,s=0;s<e;s++)o=i(o,t(s),n(s));return a(o)},ih={euclidean:function(e,t,n){return e>=2?ic(e,t,n,0,is,il):ic(e,t,n,0,io)},squaredEuclidean:function(e,t,n){return ic(e,t,n,0,is)},manhattan:function(e,t,n){return ic(e,t,n,0,io)},max:function(e,t,n){return ic(e,t,n,-1/0,iu)}};function id(e,t,n,r,i,a){var o;return(o=tP(e)?e:ih[e]||ih.euclidean,0===t&&tP(e))?o(i,a):o(t,n,r,i,a)}ih["squared-euclidean"]=ih.squaredEuclidean,ih.squaredeuclidean=ih.squaredEuclidean;var ip=n_({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),ig=function(e){return ip(e)},iv=function(e,t,n,r,i){var a="kMedoids"!==i?function(e){return n[e]}:function(e){return r[e](n)};return id(e,r.length,a,function(e){return r[e](t)},n,t)},iy=function(e,t,n){for(var r=n.length,i=Array(r),a=Array(r),o=Array(t),s=null,l=0;l<r;l++)i[l]=e.min(n[l]).value,a[l]=e.max(n[l]).value;for(var u=0;u<t;u++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(a[c]-i[c])+i[c];o[u]=s}return o},im=function(e,t,n,r,i){for(var a=1/0,o=0,s=0;s<t.length;s++){var l=iv(n,e,t[s],r,i);l<a&&(a=l,o=s)}return o},ib=function(e,t,n){for(var r=[],i=null,a=0;a<t.length;a++)n[(i=t[a]).id()]===e&&r.push(i);return r},ix=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)if(Math.abs(e[r][i]-t[r][i])>n)return!1;return!0},iw=function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},iE=function(e,t){var n=Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var i=e[Math.floor(Math.random()*e.length)];iw(i,n,r);)i=e[Math.floor(Math.random()*e.length)];n[r]=i}else for(var a=0;a<t;a++)n[a]=e[Math.floor(Math.random()*e.length)];return n},iT=function(e,t,n){for(var r=0,i=0;i<t.length;i++)r+=iv("manhattan",t[i],e,n,"kMedoids");return r},iC=function(e,t,n,r,i){for(var a,o,s=0;s<t.length;s++)for(var l=0;l<e.length;l++)r[s][l]=Math.pow(n[s][l],i.m);for(var u=0;u<e.length;u++)for(var c=0;c<i.attributes.length;c++){a=0,o=0;for(var h=0;h<t.length;h++)a+=r[h][u]*i.attributes[c](t[h]),o+=r[h][u];e[u][c]=a/o}},iS=function(e,t,n,r,i){for(var a,o=0;o<e.length;o++)t[o]=e[o].slice();for(var s=2/(i.m-1),l=0;l<n.length;l++)for(var u=0;u<r.length;u++){a=0;for(var c=0;c<n.length;c++)a+=Math.pow(iv(i.distance,r[u],n[l],i.attributes,"cmeans")/iv(i.distance,r[u],n[c],i.attributes,"cmeans"),s);e[u][l]=1/a}},ik=function(e,t,n,r){for(var i,a,o=Array(n.k),s=0;s<o.length;s++)o[s]=[];for(var l=0;l<t.length;l++){i=-1/0,a=-1;for(var u=0;u<t[0].length;u++)t[l][u]>i&&(i=t[l][u],a=u);o[a].push(e[l])}for(var c=0;c<o.length;c++)o[c]=r.collection(o[c]);return o},iP=function(e){var t,n,r,i,a=this.cy(),o=this.nodes(),s=ig(e);r=Array(o.length);for(var l=0;l<o.length;l++)r[l]=Array(s.k);n=Array(o.length);for(var u=0;u<o.length;u++)n[u]=Array(s.k);for(var c=0;c<o.length;c++){for(var h=0,d=0;d<s.k;d++)n[c][d]=Math.random(),h+=n[c][d];for(var f=0;f<s.k;f++)n[c][f]=n[c][f]/h}t=Array(s.k);for(var p=0;p<s.k;p++)t[p]=Array(s.attributes.length);i=Array(o.length);for(var g=0;g<o.length;g++)i[g]=Array(s.k);for(var v=!0,y=0;v&&y<s.maxIterations;)v=!1,iC(t,o,n,i,s),iS(n,r,t,o,s),ix(n,r,s.sensitivityThreshold)||(v=!0),y++;return{clusters:ik(o,n,s,a),degreeOfMembership:n}},iB=n_({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),iA={single:"min",complete:"max"},iD=function(e){var t=iB(e),n=iA[t.linkage];return null!=n&&(t.linkage=n),t},i_=function(e,t,n,r,i){for(var a,o,s=0,l=1/0,u=i.attributes,c=function(e,t){return id(i.distance,u.length,function(t){return u[t](e)},function(e){return u[e](t)},e,t)},h=0;h<e.length;h++){var d=e[h].key,f=n[d][r[d]];f<l&&(s=d,l=f)}if("threshold"===i.mode&&l>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var p=t[s],g=t[r[s]];o="dendrogram"===i.mode?{left:p,right:g,key:p.key}:{value:p.value.concat(g.value),key:p.key},e[p.index]=o,e.splice(g.index,1),t[p.key]=o;for(var v=0;v<e.length;v++){var y=e[v];p.key===y.key?a=1/0:"min"===i.linkage?(a=n[p.key][y.key],n[p.key][y.key]>n[g.key][y.key]&&(a=n[g.key][y.key])):"max"===i.linkage?(a=n[p.key][y.key],n[p.key][y.key]<n[g.key][y.key]&&(a=n[g.key][y.key])):a="mean"===i.linkage?(n[p.key][y.key]*p.size+n[g.key][y.key]*g.size)/(p.size+g.size):"dendrogram"===i.mode?c(y.value,p.value):c(y.value[0],p.value[0]),n[p.key][y.key]=n[y.key][p.key]=a}for(var b=0;b<e.length;b++){var x=e[b].key;if(r[x]===p.key||r[x]===g.key){for(var w=x,E=0;E<e.length;E++){var T=e[E].key;n[x][T]<n[x][w]&&(w=T)}r[x]=w}e[b].index=b}return p.key=g.key=p.index=g.index=null,!0},iR=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&iR(e.left,t),e.right&&iR(e.right,t)))},iM=function(e,t){if(!e)return"";if(e.left&&e.right){var n=iM(e.left,t),r=iM(e.right,t),i=t.add({group:"nodes",data:{id:n+","+r}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:r,target:i.id()}}),i.id()}if(e.value)return e.value.id()},iO=function(e,t,n){if(!e)return[];var r=[],i=[],a=[];if(0===t)return e.left&&iR(e.left,r),e.right&&iR(e.right,i),a=r.concat(i),[n.collection(a)];if(1===t)if(e.value)return[n.collection(e.value)];else return e.left&&iR(e.left,r),e.right&&iR(e.right,i),[n.collection(r),n.collection(i)];return e.value?[n.collection(e.value)]:(e.left&&(r=iO(e.left,t-1,n)),e.right&&(i=iO(e.right,t-1,n)),r.concat(i))},iI=function(e){for(var t,n=this.cy(),r=this.nodes(),i=iD(e),a=i.attributes,o=function(e,t){return id(i.distance,a.length,function(t){return a[t](e)},function(e){return a[e](t)},e,t)},s=[],l=[],u=[],c=[],h=0;h<r.length;h++){var d={value:"dendrogram"===i.mode?r[h]:[r[h]],key:h,index:h};s[h]=d,c[h]=d,l[h]=[],u[h]=0}for(var f=0;f<s.length;f++)for(var p=0;p<=f;p++){var g=void 0;g="dendrogram"===i.mode?f===p?1/0:o(s[f].value,s[p].value):f===p?1/0:o(s[f].value[0],s[p].value[0]),l[f][p]=g,l[p][f]=g,g<l[f][u[f]]&&(u[f]=p)}for(var v=i_(s,c,l,u,i);v;)v=i_(s,c,l,u,i);return"dendrogram"===i.mode?(t=iO(s[0],i.dendrogramDepth,n),i.addDendrogram&&iM(s[0],n)):(t=Array(s.length),s.forEach(function(e,r){e.key=e.index=null,t[r]=n.collection(e.value)})),t},iN=n_({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),iL=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||nC("Damping must range on [0.5, 1).  Got: ".concat(t));var r=["median","mean","min","max"];return r.some(function(e){return e===n})||tD(n)||nC("Preference must be one of [".concat(r.map(function(e){return"'".concat(e,"'")}).join(", "),"] or a number.  Got: ").concat(n)),iN(e)},iz=function(e,t,n,r){var i=function(e,t){return r[t](e)};return-id(e,r.length,function(e){return i(t,e)},function(e){return i(n,e)},t,n)},iF=function(e,t){return"median"===t?n6(e):"mean"===t?n4(e):"min"===t?n5(e):"max"===t?n3(e):t},iV=function(e,t,n){for(var r=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&r.push(i);return r},ij=function(e,t,n){for(var r=[],i=0;i<e;i++){for(var a=-1,o=-1/0,s=0;s<n.length;s++){var l=n[s];t[i*e+l]>o&&(a=l,o=t[i*e+l])}a>0&&r.push(a)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},iU=function(e,t,n){for(var r=ij(e,t,n),i=0;i<n.length;i++){for(var a=[],o=0;o<r.length;o++)r[o]===n[i]&&a.push(o);for(var s=-1,l=-1/0,u=0;u<a.length;u++){for(var c=0,h=0;h<a.length;h++)c+=t[a[h]*e+a[u]];c>l&&(s=u,l=c)}n[i]=a[s]}return ij(e,t,n)},iq=function(e){for(var t,n,r,i,a,o,s,l=this.cy(),u=this.nodes(),c=iL(e),h={},d=0;d<u.length;d++)h[u[d].id()]=d;r=Array(n=(t=u.length)*t);for(var f=0;f<n;f++)r[f]=-1/0;for(var p=0;p<t;p++)for(var g=0;g<t;g++)p!==g&&(r[p*t+g]=iz(c.distance,u[p],u[g],c.attributes));i=iF(r,c.preference);for(var v=0;v<t;v++)r[v*t+v]=i;a=Array(n);for(var y=0;y<n;y++)a[y]=0;o=Array(n);for(var b=0;b<n;b++)o[b]=0;for(var x=Array(t),w=Array(t),E=Array(t),T=0;T<t;T++)x[T]=0,w[T]=0,E[T]=0;for(var C=Array(t*c.minIterations),S=0;S<C.length;S++)C[S]=0;for(s=0;s<c.maxIterations;s++){for(var k=0;k<t;k++){for(var P=-1/0,B=-1/0,A=-1,D=0,_=0;_<t;_++)x[_]=a[k*t+_],(D=o[k*t+_]+r[k*t+_])>=P?(B=P,P=D,A=_):D>B&&(B=D);for(var R=0;R<t;R++)a[k*t+R]=(1-c.damping)*(r[k*t+R]-P)+c.damping*x[R];a[k*t+A]=(1-c.damping)*(r[k*t+A]-B)+c.damping*x[A]}for(var M=0;M<t;M++){for(var O=0,I=0;I<t;I++)x[I]=o[I*t+M],w[I]=Math.max(0,a[I*t+M]),O+=w[I];O-=w[M],w[M]=a[M*t+M],O+=w[M];for(var N=0;N<t;N++)o[N*t+M]=(1-c.damping)*Math.min(0,O-w[N])+c.damping*x[N];o[M*t+M]=(1-c.damping)*(O-w[M])+c.damping*x[M]}for(var L=0,z=0;z<t;z++){var F=+(o[z*t+z]+a[z*t+z]>0);C[s%c.minIterations*t+z]=F,L+=F}if(L>0&&(s>=c.minIterations-1||s==c.maxIterations-1)){for(var V=0,j=0;j<t;j++){E[j]=0;for(var U=0;U<c.minIterations;U++)E[j]+=C[U*t+j];(0===E[j]||E[j]===c.minIterations)&&V++}if(V===t)break}}for(var q=iV(t,a,o),X=iU(t,r,q),Y={},W=0;W<q.length;W++)Y[q[W]]=[];for(var H=0;H<u.length;H++){var G=X[h[u[H].id()]];null!=G&&Y[G].push(u[H])}for(var K=Array(q.length),Z=0;Z<q.length;Z++)K[Z]=l.collection(Y[q[Z]]);return K},iX=n_({root:void 0,directed:!1}),iY=function(){var e=this,t={},n=0,r=0,i=[],a=[],o={},s=function(n,r){for(var o=a.length-1,s=[],l=e.spawn();a[o].x!=n||a[o].y!=r;)s.push(a.pop().edge),o--;s.push(a.pop().edge),s.forEach(function(n){var r=n.connectedNodes().intersection(e);l.merge(n),r.forEach(function(n){var r=n.id(),i=n.connectedEdges().intersection(e);l.merge(n),t[r].cutVertex?l.merge(i.filter(function(e){return e.isLoop()})):l.merge(i)})}),i.push(l)},l=function(u,c,h){u===h&&(r+=1),t[c]={id:n,low:n++,cutVertex:!1};var d,f,p,g,v=e.getElementById(c).connectedEdges().intersection(e);0===v.size()?i.push(e.spawn(e.getElementById(c))):v.forEach(function(e){d=e.source().id(),f=e.target().id(),(p=d===c?f:d)!==h&&(o[g=e.id()]||(o[g]=!0,a.push({x:c,y:p,edge:e})),p in t?t[c].low=Math.min(t[c].low,t[p].id):(l(u,p,c),t[c].low=Math.min(t[c].low,t[p].low),t[c].id<=t[p].low&&(t[c].cutVertex=!0,s(c,p))))})};e.forEach(function(e){if(e.isNode()){var n=e.id();n in t||(r=0,l(n,n),t[n].cutVertex=r>1)}});var u=Object.keys(t).filter(function(e){return t[e].cutVertex}).map(function(t){return e.getElementById(t)});return{cut:e.spawn(u),components:i}},iW=function(){var e=this,t={},n=0,r=[],i=[],a=e.spawn(e),o=function(s){if(i.push(s),t[s]={index:n,low:n++,explored:!1},e.getElementById(s).connectedEdges().intersection(e).forEach(function(e){var n=e.target().id();n!==s&&(n in t||o(n),t[n].explored||(t[s].low=Math.min(t[s].low,t[n].low)))}),t[s].index===t[s].low){for(var l=e.spawn();;){var u=i.pop();if(l.merge(e.getElementById(u)),t[u].low=t[s].index,t[u].explored=!0,u===s)break}var c=l.edgesWith(l),h=l.merge(c);r.push(h),a=a.difference(h)}};return e.forEach(function(e){if(e.isNode()){var n=e.id();n in t||o(n)}}),{cut:a,components:r}},iH={};[nq,{dijkstra:function(e){if(!tA(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=nH(e),r=n.root,i=n.weight,a=n.directed,o=this,s=tk(r)?this.filter(r)[0]:r[0],l={},u={},c={},h=this.byGroup(),d=h.nodes,f=h.edges;f.unmergeBy(function(e){return e.isLoop()});for(var p=function(e){return l[e.id()]},g=new nW(function(e,t){return p(e)-p(t)}),v=0;v<d.length;v++){var y=d[v];l[y.id()]=y.same(s)?0:1/0,g.push(y)}for(;g.size()>0;){var b=g.pop(),x=p(b);if(c[b.id()]=x,x!==1/0)for(var w=b.neighborhood().intersect(d),E=0;E<w.length;E++){var T=w[E],C=T.id(),S=function(e,t){for(var n,r=(a?e.edgesTo(t):e.edgesWith(t)).intersect(f),o=1/0,s=0;s<r.length;s++){var l=r[s],u=i(l);(u<o||!n)&&(o=u,n=l)}return{edge:n,dist:o}}(b,T),k=x+S.dist;k<p(T)&&(l[T.id()]=k,g.updateItem(T),u[C]={node:b,edge:S.edge})}}return{distanceTo:function(e){return c[(tk(e)?d.filter(e)[0]:e[0]).id()]},pathTo:function(e){var t=tk(e)?d.filter(e)[0]:e[0],n=[],r=t,i=r.id();if(t.length>0)for(n.unshift(t);u[i];){var a=u[i];n.unshift(a.edge),n.unshift(a.node),i=(r=a.node).id()}return o.spawn(n)}}}},{kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,i=n.length,a=Array(i),o=function(e){for(var t=0;t<a.length;t++)if(a[t].has(e))return t},s=0;s<i;s++)a[s]=this.spawn(n[s]);for(var l=r.sort(function(t,n){return e(t)-e(n)}),u=0;u<l.length;u++){var c=l[u],h=c.source()[0],d=c.target()[0],f=o(h),p=o(d),g=a[f],v=a[p];f!==p&&(n.merge(c),g.merge(v),a.splice(p,1))}return n}},{aStar:function(e){var t,n,r=this.cy(),i=nG(e),a=i.root,o=i.goal,s=i.heuristic,l=i.directed,u=i.weight;a=r.collection(a)[0],o=r.collection(o)[0];var c=a.id(),h=o.id(),d={},f={},p={},g=new nW(function(e,t){return f[e.id()]-f[t.id()]}),v=new nV,y={},b={},x=function(e,t){g.push(e),v.add(t)};x(a,c),d[c]=0,f[c]=s(a);for(var w=0;g.size()>0;){if(n=(t=g.pop()).id(),v.delete(n),w++,n===h){for(var E=[],T=o,C=h,S=b[C];E.unshift(T),null!=S&&E.unshift(S),null!=(T=y[C]);)S=b[C=T.id()];return{found:!0,distance:d[n],path:this.spawn(E),steps:w}}p[n]=!0;for(var k=t._private.edges,P=0;P<k.length;P++){var B=k[P];if(this.hasElementWithId(B.id())&&(!l||B.data("source")===n)){var A=B.source(),D=B.target(),_=A.id()!==n?A:D,R=_.id();if(this.hasElementWithId(R)&&!p[R]){var M=d[n]+u(B);if(!v.has(R)){d[R]=M,f[R]=M+s(_),x(_,R),y[R]=t,b[R]=B;continue}M<d[R]&&(d[R]=M,f[R]=M+s(_),y[R]=t,b[R]=B)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},{floydWarshall:function(e){for(var t=this.cy(),n=nK(e),r=n.weight,i=n.directed,a=this.byGroup(),o=a.nodes,s=a.edges,l=o.length,u=l*l,c=function(e){return o.indexOf(e)},h=function(e){return o[e]},d=Array(u),f=0;f<u;f++){var p=f%l;(f-p)/l===p?d[f]=0:d[f]=1/0}for(var g=Array(u),v=Array(u),y=0;y<s.length;y++){var b=s[y],x=b.source()[0],w=b.target()[0];if(x!==w){var E=c(x),T=c(w),C=E*l+T,S=r(b);if(d[C]>S&&(d[C]=S,g[C]=T,v[C]=b),!i){var k=T*l+E;!i&&d[k]>S&&(d[k]=S,g[k]=E,v[k]=b)}}}for(var P=0;P<l;P++)for(var B=0;B<l;B++)for(var A=B*l+P,D=0;D<l;D++){var _=B*l+D,R=P*l+D;d[A]+d[R]<d[_]&&(d[_]=d[A]+d[R],g[_]=g[A])}var M=function(e){return c((tk(e)?t.filter(e):e)[0])};return{distance:function(e,t){return d[M(e)*l+M(t)]},path:function(e,n){var r,i=M(e),a=M(n),o=h(i);if(i===a)return o.collection();if(null==g[i*l+a])return t.collection();var s=t.collection(),u=i;for(s.merge(o);i!==a;)u=i,i=g[i*l+a],r=v[u*l+i],s.merge(r),s.merge(h(i));return s}}}},{bellmanFord:function(e){var t=this,n=nZ(e),r=n.weight,i=n.directed,a=n.root,o=this,s=this.cy(),l=this.byGroup(),u=l.edges,c=l.nodes,h=c.length,d=new nz,f=!1,p=[];a=s.collection(a)[0],u.unmergeBy(function(e){return e.isLoop()});for(var g=u.length,v=function(e){var t=d.get(e.id());return t||(t={},d.set(e.id(),t)),t},y=function(e){return(tk(e)?s.$(e):e)[0]},b=0;b<h;b++){var x=c[b],w=v(x);x.same(a)?w.dist=0:w.dist=1/0,w.pred=null,w.edge=null}for(var E=!1,T=function(e,t,n,r,i,a){var o=r.dist+a;o<i.dist&&!n.same(r.edge)&&(i.dist=o,i.pred=e,i.edge=n,E=!0)},C=1;C<h;C++){E=!1;for(var S=0;S<g;S++){var k=u[S],P=k.source(),B=k.target(),A=r(k),D=v(P),_=v(B);T(P,B,k,D,_,A),i||T(B,P,k,_,D,A)}if(!E)break}if(E)for(var R=[],M=0;M<g;M++){var O=u[M],I=O.source(),N=O.target(),L=r(O),z=v(I).dist,F=v(N).dist;if(z+L<F||!i&&F+L<z)if(f||(nk("Graph contains a negative weight cycle for Bellman-Ford"),f=!0),!1!==e.findNegativeWeightCycles){var V=[];z+L<F&&V.push(I),!i&&F+L<z&&V.push(N);for(var j=V.length,U=0;U<j;U++){var q=V[U],X=[q];X.push(v(q).edge);for(var Y=v(q).pred;-1===X.indexOf(Y);)X.push(Y),X.push(v(Y).edge),Y=v(Y).pred;for(var W=(X=X.slice(X.indexOf(Y)))[0].id(),H=0,G=2;G<X.length;G+=2)X[G].id()<W&&(W=X[G].id(),H=G);(X=X.slice(H).concat(X.slice(0,H))).push(X[0]);var K=X.map(function(e){return e.id()}).join(",");-1===R.indexOf(K)&&(p.push(o.spawn(X)),R.push(K))}}else break}return{distanceTo:function(e){return v(y(e)).dist},pathTo:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=y(e),i=[],s=r;;){if(null==s)return t.spawn();var l=v(s),u=l.edge,c=l.pred;if(i.unshift(s[0]),s.same(n)&&i.length>0)break;null!=u&&i.unshift(u),s=c}return o.spawn(i)},hasNegativeWeightCycle:f,negativeWeightCycles:p}}},{kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,r=t.edges;r.unmergeBy(function(e){return e.isLoop()});var i=n.length,a=r.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/n$);if(i<2)return void nC("At least 2 nodes are required for Karger-Stein algorithm");for(var l=[],u=0;u<a;u++){var c=r[u];l.push([u,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,d=[],f=Array(i),p=Array(i),g=Array(i),v=function(e,t){for(var n=0;n<i;n++)t[n]=e[n]},y=0;y<=o;y++){for(var b=0;b<i;b++)p[b]=b;var x=nJ(p,l.slice(),i,s),w=x.slice();v(p,g);var E=nJ(p,x,s,2),T=nJ(g,w,s,2);E.length<=T.length&&E.length<h?(h=E.length,d=E,v(p,f)):T.length<=E.length&&T.length<h&&(h=T.length,d=T,v(g,f))}for(var C=this.spawn(d.map(function(e){return r[e[0]]})),S=this.spawn(),k=this.spawn(),P=f[0],B=0;B<f.length;B++){var A=f[B],D=n[B];A===P?S.merge(D):k.merge(D)}var _=function(t){var n=e.spawn();return t.forEach(function(t){n.merge(t),t.connectedEdges().forEach(function(t){e.contains(t)&&!C.contains(t)&&n.merge(t)})}),n};return{cut:C,components:[_(S),_(k)],partition1:S,partition2:k}}},{pageRank:function(e){for(var t,n=rG(e),r=n.dampingFactor,i=n.precision,a=n.iterations,o=n.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,h=u.length,d=h*h,f=c.length,p=Array(d),g=Array(h),v=(1-r)/h,y=0;y<h;y++){for(var b=0;b<h;b++)p[y*h+b]=0;g[y]=0}for(var x=0;x<f;x++){var w=c[x],E=w.data("source"),T=w.data("target");if(E!==T){var C=u.indexOfId(E),S=u.indexOfId(T),k=o(w),P=S*h+C;p[P]+=k,g[C]+=k}}for(var B=1/h+v,A=0;A<h;A++)if(0===g[A])for(var D=0;D<h;D++)p[D*h+A]=B;else for(var _=0;_<h;_++){var R=_*h+A;p[R]=p[R]/g[A]+v}for(var M=Array(h),O=Array(h),I=0;I<h;I++)M[I]=1;for(var N=0;N<a;N++){for(var L=0;L<h;L++)O[L]=0;for(var z=0;z<h;z++)for(var F=0;F<h;F++){var V=z*h+F;O[z]+=p[V]*M[F]}rn(O),t=M,M=O,O=t;for(var j=0,U=0;U<h;U++){var q=t[U]-M[U];j+=q*q}if(j<i)break}return{rank:function(e){return e=s.collection(e)[0],M[u.indexOf(e)]}}}},rZ,rQ,r0,{markovClustering:ir,mcl:ir},{kMeans:function(e){var t,n=this.cy(),r=this.nodes(),i=null,a=ig(e),o=Array(a.k),s={};a.testMode?"number"==typeof a.testCentroids?(a.testCentroids,t=iy(r,a.k,a.attributes)):t="object"===ty(a.testCentroids)?a.testCentroids:iy(r,a.k,a.attributes):t=iy(r,a.k,a.attributes);for(var l=!0,u=0;l&&u<a.maxIterations;){for(var c=0;c<r.length;c++)s[(i=r[c]).id()]=im(i,t,a.distance,a.attributes,"kMeans");l=!1;for(var h=0;h<a.k;h++){var d=ib(h,r,s);if(0!==d.length){for(var f=a.attributes.length,p=t[h],g=Array(f),v=Array(f),y=0;y<f;y++){v[y]=0;for(var b,x=0;x<d.length;x++)i=d[x],v[y]+=a.attributes[y](i);g[y]=v[y]/d.length,b=g[y],Math.abs(p[y]-b)<=a.sensitivityThreshold||(l=!0)}t[h]=g,o[h]=n.collection(d)}}u++}return o},kMedoids:function(e){var t,n,r=this.cy(),i=this.nodes(),a=null,o=ig(e),s=Array(o.k),l={},u=Array(o.k);o.testMode?"number"==typeof o.testCentroids||(t="object"===ty(o.testCentroids)?o.testCentroids:iE(i,o.k)):t=iE(i,o.k);for(var c=!0,h=0;c&&h<o.maxIterations;){for(var d=0;d<i.length;d++)l[(a=i[d]).id()]=im(a,t,o.distance,o.attributes,"kMedoids");c=!1;for(var f=0;f<t.length;f++){var p=ib(f,i,l);if(0!==p.length){u[f]=iT(t[f],p,o.attributes);for(var g=0;g<p.length;g++)(n=iT(p[g],p,o.attributes))<u[f]&&(u[f]=n,t[f]=p[g],c=!0);s[f]=r.collection(p)}}h++}return s},fuzzyCMeans:iP,fcm:iP},{hierarchicalClustering:iI,hca:iI},{affinityPropagation:iq,ap:iq},{hierholzer:function(e){if(!tA(e)){var t,n,r,i=arguments;e={root:i[0],directed:i[1]}}var a=iX(e),o=a.root,s=a.directed,l=!1;o&&(r=tk(o)?this.filter(o)[0].id():o[0].id());var u={},c={};s?this.forEach(function(e){var r=e.id();if(e.isNode()){var i=e.indegree(!0),a=e.outdegree(!0),o=i-a,s=a-i;1==o?t?l=!0:t=r:1==s?n?l=!0:n=r:(s>1||o>1)&&(l=!0),u[r]=[],e.outgoers().forEach(function(e){e.isEdge()&&u[r].push(e.id())})}else c[r]=[void 0,e.target().id()]}):this.forEach(function(e){var r=e.id();e.isNode()?(e.degree(!0)%2&&(t?n?l=!0:n=r:t=r),u[r]=[],e.connectedEdges().forEach(function(e){return u[r].push(e.id())})):c[r]=[e.source().id(),e.target().id()]});var h={found:!1,trail:void 0};if(l)return h;if(n&&t)if(s){if(r&&n!=r)return h;r=n}else{if(r&&n!=r&&t!=r)return h;r||(r=n)}else r||(r=this[0].id());var d=function(e){for(var t,n,r,i=e,a=[e];u[i].length;)n=c[t=u[i].shift()][0],i!=(r=c[t][1])?(u[r]=u[r].filter(function(e){return e!=t}),i=r):s||i==n||(u[n]=u[n].filter(function(e){return e!=t}),i=n),a.unshift(t),a.unshift(i);return a},f=[],p=[];for(p=d(r);1!=p.length;)0==u[p[0]].length?(f.unshift(this.getElementById(p.shift())),f.unshift(this.getElementById(p.shift()))):p=d(p.shift()).concat(p);for(var g in f.unshift(this.getElementById(p.shift())),u)if(u[g].length)return h;return h.found=!0,h.trail=this.spawn(f,!0),h}},{hopcroftTarjanBiconnected:iY,htbc:iY,htb:iY,hopcroftTarjanBiconnectedComponents:iY},{tarjanStronglyConnected:iW,tsc:iW,tscc:iW,tarjanStronglyConnectedComponents:iW}].forEach(function(e){t$(iH,e)});var iG=function(e){if(!(this instanceof iG))return new iG(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};iG.prototype={fulfill:function(e){return iK(this,1,"fulfillValue",e)},reject:function(e){return iK(this,2,"rejectReason",e)},then:function(e,t){var n=new iG;return this.onFulfilled.push(iQ(e,n,"fulfill")),this.onRejected.push(iQ(t,n,"reject")),iZ(this),n.proxy}};var iK=function(e,t,n,r){return 0===e.state&&(e.state=t,e[n]=r,iZ(e)),e},iZ=function(e){1===e.state?i$(e,"onFulfilled",e.fulfillValue):2===e.state&&i$(e,"onRejected",e.rejectReason)},i$=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var i=function(){for(var e=0;e<r.length;e++)r[e](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},iQ=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(e){t.reject(e);return}iJ(t,i)}}},iJ=function(e,t){if(e===t||e.proxy===t)return void e.reject(TypeError("cannot resolve promise with itself"));if("object"===ty(t)&&null!==t||"function"==typeof t)try{n=t.then}catch(t){e.reject(t);return}if("function"==typeof n){var n,r=!1;try{n.call(t,function(n){r||(r=!0,n===t?e.reject(TypeError("circular thenable chain")):iJ(e,n))},function(t){r||(r=!0,e.reject(t))})}catch(t){r||e.reject(t)}return}e.fulfill(t)};iG.all=function(e){return new iG(function(t,n){for(var r=Array(e.length),i=0,a=function(n,a){r[n]=a,++i===e.length&&t(r)},o=0;o<e.length;o++)!function(t){var r=e[t];null!=r&&null!=r.then?r.then(function(e){a(t,e)},function(e){n(e)}):a(t,r)}(o)})},iG.resolve=function(e){return new iG(function(t,n){t(e)})},iG.reject=function(e){return new iG(function(t,n){n(e)})};var i0="undefined"!=typeof Promise?Promise:iG,i1=function(e,t,n){var r=tI(e),i=this._private=t$({duration:1e3},t,n);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&tP(i.complete)&&i.completes.push(i.complete),!r){var a=e.position();i.startPosition=i.startPosition||{x:a.x,y:a.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(r){var o=e.pan();i.startPan={x:o.x,y:o.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},i2=i1.prototype;function i5(){return lx?lb:(lx=1,lb=Array.isArray)}function i3(){if(lN)return lI;lN=1;var e=function(){if(lR)return l_;lR=1;var e=function(){if(lC)return lT;lC=1;var e=ne(),t=t8();return lT=function(n){if(!t(n))return!1;var r=e(n);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}}(),t=function(){if(lB)return lP;lB=1;var e,t=lk?lS:(lk=1,lS=t9()["__core-js_shared__"]),n=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return lP=function(e){return!!n&&n in e}}(),n=t8(),r=function(){if(lD)return lA;lD=1;var e=Function.prototype.toString;return lA=function(t){if(null!=t){try{return e.call(t)}catch(e){}try{return t+""}catch(e){}}return""}}(),i=/^\[object .+?Constructor\]$/,a=Object.prototype,o=Function.prototype.toString,s=a.hasOwnProperty,l=RegExp("^"+o.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return l_=function(a){return!(!n(a)||t(a))&&(e(a)?l:i).test(r(a))}}(),t=lO?lM:(lO=1,lM=function(e,t){return null==e?void 0:e[t]});return lI=function(n,r){var i=t(n,r);return e(i)?i:void 0}}function i4(){return lz?lL:(lz=1,lL=i3()(Object,"create"))}function i6(){return l0?lJ:(l0=1,lJ=function(e,t){return e===t||e!=e&&t!=t})}function i8(){if(l2)return l1;l2=1;var e=i6();return l1=function(t,n){for(var r=t.length;r--;)if(e(t[r][0],n))return r;return -1}}function i9(){if(uc)return uu;uc=1;var e=ul?us:(ul=1,us=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return uu=function(t,n){var r=t.__data__;return e(n)?r["string"==typeof n?"string":"hash"]:r.map}}function i7(){if(uk)return uS;uk=1;var e=function(){if(uC)return uT;uC=1;var e=function(){if(uE)return uw;uE=1;var e=function(){if(ux)return ub;ux=1;var e=function(){if(uo)return ua;uo=1;var e=function(){if(lZ)return lK;lZ=1;var e=function(){if(lV)return lF;lV=1;var e=i4();return lF=function(){this.__data__=e?e(null):{},this.size=0}}(),t=lU?lj:(lU=1,lj=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}),n=function(){if(lX)return lq;lX=1;var e=i4(),t=Object.prototype.hasOwnProperty;return lq=function(n){var r=this.__data__;if(e){var i=r[n];return"__lodash_hash_undefined__"===i?void 0:i}return t.call(r,n)?r[n]:void 0}}(),r=function(){if(lW)return lY;lW=1;var e=i4(),t=Object.prototype.hasOwnProperty;return lY=function(n){var r=this.__data__;return e?void 0!==r[n]:t.call(r,n)}}(),i=function(){if(lG)return lH;lG=1;var e=i4();return lH=function(t,n){var r=this.__data__;return this.size+=+!this.has(t),r[t]=e&&void 0===n?"__lodash_hash_undefined__":n,this}}();function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,lK=a}(),t=function(){if(un)return ut;un=1;var e=lQ?l$:(lQ=1,l$=function(){this.__data__=[],this.size=0}),t=function(){if(l3)return l5;l3=1;var e=i8(),t=Array.prototype.splice;return l5=function(n){var r=this.__data__,i=e(r,n);return!(i<0)&&(i==r.length-1?r.pop():t.call(r,i,1),--this.size,!0)}}(),n=function(){if(l6)return l4;l6=1;var e=i8();return l4=function(t){var n=this.__data__,r=e(n,t);return r<0?void 0:n[r][1]}}(),r=function(){if(l9)return l8;l9=1;var e=i8();return l8=function(t){return e(this.__data__,t)>-1}}(),i=function(){if(ue)return l7;ue=1;var e=i8();return l7=function(t,n){var r=this.__data__,i=e(r,t);return i<0?(++this.size,r.push([t,n])):r[i][1]=n,this}}();function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ut=a}(),n=ui?ur:(ui=1,ur=i3()(t9(),"Map"));return ua=function(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}}(),t=function(){if(ud)return uh;ud=1;var e=i9();return uh=function(t){var n=e(this,t).delete(t);return this.size-=!!n,n}}(),n=function(){if(up)return uf;up=1;var e=i9();return uf=function(t){return e(this,t).get(t)}}(),r=function(){if(uv)return ug;uv=1;var e=i9();return ug=function(t){return e(this,t).has(t)}}(),i=function(){if(um)return uy;um=1;var e=i9();return uy=function(t,n){var r=e(this,t),i=r.size;return r.set(t,n),this.size+=+(r.size!=i),this}}();function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ub=a}();function t(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw TypeError("Expected a function");var i=function(){var e=arguments,t=r?r.apply(this,e):e[0],a=i.cache;if(a.has(t))return a.get(t);var o=n.apply(this,e);return i.cache=a.set(t,o)||a,o};return i.cache=new(t.Cache||e),i}return t.Cache=e,uw=t}();return uT=function(t){var n=e(t,function(e){return 500===r.size&&r.clear(),e}),r=n.cache;return n}}(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g;return uS=e(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(t,function(e,t,i,a){r.push(i?a.replace(n,"$1"):t||e)}),r})}function ae(){return uB?uP:(uB=1,uP=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i})}function at(){if(uR)return u_;uR=1;var e=function(){if(uD)return uA;uD=1;var e=t7(),t=ae(),n=i5(),r=nt(),i=e?e.prototype:void 0,a=i?i.toString:void 0;return uA=function e(i){if("string"==typeof i)return i;if(n(i))return t(i,e)+"";if(r(i))return a?a.call(i):"";var o=i+"";return"0"==o&&1/i==-1/0?"-0":o}}();return u_=function(t){return null==t?"":e(t)}}function an(){if(uO)return uM;uO=1;var e=i5(),t=function(){if(lE)return lw;lE=1;var e=i5(),t=nt(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;return lw=function(i,a){if(e(i))return!1;var o=typeof i;return!!("number"==o||"symbol"==o||"boolean"==o||null==i||t(i))||r.test(i)||!n.test(i)||null!=a&&i in Object(a)}}(),n=i7(),r=at();return uM=function(i,a){return e(i)?i:t(i,a)?[i]:n(r(i))}}function ar(){if(uN)return uI;uN=1;var e=nt();return uI=function(t){if("string"==typeof t||e(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}}t$(i2,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),tR(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var r=e[t];null!=r&&(e[t]=e[n],e[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var i=e.style[r],a=i.name,o=e.startStyle[a];e.startStyle[a]=i,e.style[r]=o}return t&&this.play(),this},promise:function(e){var t,n=this._private;return t="frame"===e?n.frames:n.completes,new i0(function(e,n){t.push(function(){e()})})}}),i2.complete=i2.completed,i2.run=i2.play,i2.running=i2.playing;var ai=t6(function(){if(uV)return uF;uV=1;var e=function(){if(uz)return uL;uz=1;var e=an(),t=ar();return uL=function(n,r){r=e(r,n);for(var i=0,a=r.length;null!=n&&i<a;)n=n[t(r[i++])];return i&&i==a?n:void 0}}();return uF=function(t,n,r){var i=null==t?void 0:e(t,n);return void 0===i?r:i}}()),aa=t6(function(){if(uQ)return u$;uQ=1;var e=function(){if(uZ)return uK;uZ=1;var e=function(){if(uW)return uY;uW=1;var e=function(){if(uX)return uq;uX=1;var e=function(){if(uU)return uj;uU=1;var e=i3();return uj=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(e){}}()}();return uq=function(t,n,r){"__proto__"==n&&e?e(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}}(),t=i6(),n=Object.prototype.hasOwnProperty;return uY=function(r,i,a){var o=r[i];n.call(r,i)&&t(o,a)&&(void 0!==a||i in r)||e(r,i,a)}}(),t=an(),n=function(){if(uG)return uH;uG=1;var e=/^(?:0|[1-9]\d*)$/;return uH=function(t,n){var r=typeof t;return!!(n=null==n?0x1fffffffffffff:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}}(),r=t8(),i=ar();return uK=function(a,o,s,l){if(!r(a))return a;o=t(o,a);for(var u=-1,c=o.length,h=c-1,d=a;null!=d&&++u<c;){var f=i(o[u]),p=s;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(u!=h){var g=d[f];void 0===(p=l?l(g,f,d):void 0)&&(p=r(g)?g:n(o[u+1])?[]:{})}e(d,f,p),d=d[f]}return a}}();return u$=function(t,n,r){return null==t?t:e(t,n,r)}}()),ao=t6(function(){if(u2)return u1;u2=1;var e=ae(),t=u0?uJ:(u0=1,uJ=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}),n=i5(),r=nt(),i=i7(),a=ar(),o=at();return u1=function(s){return n(s)?e(s,a):r(s)?[s]:t(i(o(s)))}}()),as={};[{animated:function(){return function(){var e=void 0!==this.length;if(!(this._private.cy||this).styleEnabled())return!1;var t=(e?this:[this])[0];if(t)return t._private.animation.current.length>0}},clearQueue:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var t=0;t<e.length;t++)e[t]._private.animation.queue=[];return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,a=!n,o=!a;if(!i.styleEnabled())return this;var s=i.style();if(0===Object.keys(e=t$({},e,t)).length)return new i1(r[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(o&&(e.style=s.getPropsList(e.style||e.css),e.css=void 0),o&&null!=e.renderedPosition){var l=e.renderedPosition,u=i.pan(),c=i.zoom();e.position=n1(l,c,u)}if(a&&null!=e.panBy){var h=e.panBy,d=i.pan();e.pan={x:d.x+h.x,y:d.y+h.y}}var f=e.center||e.centre;if(a&&null!=f){var p=i.getCenterPan(f.eles,e.zoom);null!=p&&(e.pan=p)}if(a&&null!=e.fit){var g=e.fit,v=i.getFitViewport(g.eles||g.boundingBox,g.padding);null!=v&&(e.pan=v.pan,e.zoom=v.zoom)}if(a&&tA(e.zoom)){var y=i.getZoomedViewport(e.zoom);null!=y?(y.zoomed&&(e.zoom=y.zoom),y.panned&&(e.pan=y.pan)):e.zoom=null}return new i1(r[0],e)}},animate:function(){return function(e,t){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=t$({},e,t));for(var r=0;r<n.length;r++){var i=n[r],a=i.animated()&&(void 0===e.queue||e.queue);i.animation(e,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var a=n[i]._private,o=a.animation.current,s=0;s<o.length;s++){var l=o[s]._private;t&&(l.duration=0)}e&&(a.animation.queue=[]),t||(a.animation.current=[])}return r.notify("draw"),this}}},{data:function(e){return e=t$({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,n){var r,i=e,a=void 0!==this.length,o=a?this:[this],s=a?this[0]:this;if(tk(t)){var l,u=-1!==t.indexOf(".")&&ao(t);if(i.allowGetting&&void 0===n)return s&&(i.beforeGet(s),l=u&&void 0===s._private[i.field][t]?ai(s._private[i.field],u):s._private[i.field][t]),l;if(i.allowSetting&&void 0!==n&&!i.immutableKeys[t]){var c=tf({},t,n);i.beforeSet(this,c);for(var h=0,d=o.length;h<d;h++){var f=o[h];i.canSet(f)&&(u&&void 0===s._private[i.field][t]?aa(f._private[i.field],u,n):f._private[i.field][t]=n)}i.updateStyle&&this.updateStyle(),i.onSet(this),i.settingTriggersEvent&&this[i.triggerFnName](i.settingEvent)}}else if(i.allowSetting&&tA(t)){var p,g,v=Object.keys(t);i.beforeSet(this,t);for(var y=0;y<v.length;y++)if(g=t[p=v[y]],!i.immutableKeys[p])for(var b=0;b<o.length;b++){var x=o[b];i.canSet(x)&&(x._private[i.field][p]=g)}i.updateStyle&&this.updateStyle(),i.onSet(this),i.settingTriggersEvent&&this[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&tP(t))this.on(i.bindingEvent,t);else if(i.allowGetting&&void 0===t)return s&&(i.beforeGet(s),r=s._private[i.field]),r;return this}},removeData:function(e){return e=t$({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var n=e,r=void 0!==this.length?this:[this];if(tk(t)){for(var i=t.split(/\s+/),a=i.length,o=0;o<a;o++){var s=i[o];if(!tL(s)&&!n.immutableKeys[s])for(var l=0,u=r.length;l<u;l++)r[l]._private[n.field][s]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===t){for(var c=0,h=r.length;c<h;c++)for(var d=r[c]._private[n.field],f=Object.keys(d),p=0;p<f.length;p++){var g=f[p];n.immutableKeys[g]||(d[g]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(e){e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return new i0(function(e,t){var i=r.concat([function(t){n.off.apply(n,a),e(t)}]),a=i.concat([]);n.on.apply(n,i)})}}}].forEach(function(e){t$(as,e)});var al={animate:as.animate(),animation:as.animation(),animated:as.animated(),clearQueue:as.clearQueue(),delay:as.delay(),delayAnimation:as.delayAnimation(),stop:as.stop()},au={classes:function(e){if(void 0===e){var t=[];return this[0]._private.classes.forEach(function(e){return t.push(e)}),t}tB(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],r=new nV(e),i=0;i<this.length;i++){for(var a=this[i],o=a._private,s=o.classes,l=!1,u=0;u<e.length;u++){var c=e[u];if(!s.has(c)){l=!0;break}}l||(l=s.size!==e.length),l&&(o.classes=r,n.push(a))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){tB(e)||(e=e.match(/\S+/g)||[]);for(var n=void 0===t,r=[],i=0,a=this.length;i<a;i++)for(var o=this[i],s=o._private.classes,l=!1,u=0;u<e.length;u++){var c=e[u],h=s.has(c),d=!1;t||n&&!h?(s.add(c),d=!0):(!t||n&&h)&&(s.delete(c),d=!0),!l&&d&&(r.push(o),l=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};au.className=au.classNames=au.classes;var ac={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:tY,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ac.variable="(?:[\\w-.]|(?:\\\\"+ac.metaChar+"))+",ac.className="(?:[\\w-]|(?:\\\\"+ac.metaChar+"))+",ac.value=ac.string+"|"+ac.number,ac.id=ac.variable,function(){var e,t,n;for(n=0,e=ac.comparatorOp.split("|");n<e.length;n++)t=e[n],ac.comparatorOp+="|@"+t;for(n=0,e=ac.comparatorOp.split("|");n<e.length;n++)(t=e[n]).indexOf("!")>=0||"="!==t&&(ac.comparatorOp+="|\\!"+t)}();var ah=function(){return{checks:[]}},ad={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},af=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return -1*tZ(e.selector,t.selector)}),ap=function(){for(var e,t={},n=0;n<af.length;n++)t[(e=af[n]).selector]=e.matches;return t}(),ag="("+af.map(function(e){return e.selector}).join("|")+")",av=function(e){return e.replace(RegExp("\\\\("+ac.metaChar+")","g"),function(e,t){return t})},ay=function(e,t,n){e[e.length-1]=n},am=[{name:"group",query:!0,regex:"("+ac.group+")",populate:function(e,t,n){var r=tp(n,1)[0];t.checks.push({type:ad.GROUP,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:ag,populate:function(e,t,n){var r=tp(n,1)[0];t.checks.push({type:ad.STATE,value:r})}},{name:"id",query:!0,regex:"\\#("+ac.id+")",populate:function(e,t,n){var r=tp(n,1)[0];t.checks.push({type:ad.ID,value:av(r)})}},{name:"className",query:!0,regex:"\\.("+ac.className+")",populate:function(e,t,n){var r=tp(n,1)[0];t.checks.push({type:ad.CLASS,value:av(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ac.variable+")\\s*\\]",populate:function(e,t,n){var r=tp(n,1)[0];t.checks.push({type:ad.DATA_EXIST,field:av(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ac.variable+")\\s*("+ac.comparatorOp+")\\s*("+ac.value+")\\s*\\]",populate:function(e,t,n){var r=tp(n,3),i=r[0],a=r[1],o=r[2];o=null!=RegExp("^"+ac.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),t.checks.push({type:ad.DATA_COMPARE,field:av(i),operator:a,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ac.boolOp+")\\s*("+ac.variable+")\\s*\\]",populate:function(e,t,n){var r=tp(n,2),i=r[0],a=r[1];t.checks.push({type:ad.DATA_BOOL,field:av(a),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ac.meta+")\\s*("+ac.comparatorOp+")\\s*("+ac.number+")\\s*\\]\\]",populate:function(e,t,n){var r=tp(n,3),i=r[0],a=r[1],o=r[2];t.checks.push({type:ad.META_COMPARE,field:av(i),operator:a,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:ac.separator,populate:function(e,t){var n=e.currentSubject,r=e.edgeCount,i=e.compoundCount,a=e[e.length-1];return null!=n&&(a.subject=n,e.currentSubject=null),a.edgeCount=r,a.compoundCount=i,e.edgeCount=0,e.compoundCount=0,e[e.length++]=ah()}},{name:"directedEdge",separator:!0,regex:ac.directedEdge,populate:function(e,t){if(null==e.currentSubject){var n=ah(),r=ah();return n.checks.push({type:ad.DIRECTED_EDGE,source:t,target:r}),ay(e,t,n),e.edgeCount++,r}var i=ah(),a=ah();return i.checks.push({type:ad.NODE_SOURCE,source:t,target:a}),ay(e,t,i),e.edgeCount++,a}},{name:"undirectedEdge",separator:!0,regex:ac.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var n=ah(),r=ah();return n.checks.push({type:ad.UNDIRECTED_EDGE,nodes:[t,r]}),ay(e,t,n),e.edgeCount++,r}var i=ah(),a=ah();return i.checks.push({type:ad.NODE_NEIGHBOR,node:t,neighbor:a}),ay(e,t,i),a}},{name:"child",separator:!0,regex:ac.child,populate:function(e,t){if(null==e.currentSubject){var n=ah(),r=ah(),i=e[e.length-1];return n.checks.push({type:ad.CHILD,parent:i,child:r}),ay(e,t,n),e.compoundCount++,r}if(e.currentSubject===t){var a=ah(),o=e[e.length-1],s=ah(),l=ah(),u=ah(),c=ah();return a.checks.push({type:ad.COMPOUND_SPLIT,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:ad.TRUE}],c.checks.push({type:ad.TRUE}),s.checks.push({type:ad.PARENT,parent:c,child:u}),ay(e,o,a),e.currentSubject=l,e.compoundCount++,u}var h=ah(),d=ah(),f=[{type:ad.PARENT,parent:h,child:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}},{name:"descendant",separator:!0,regex:ac.descendant,populate:function(e,t){if(null==e.currentSubject){var n=ah(),r=ah(),i=e[e.length-1];return n.checks.push({type:ad.DESCENDANT,ancestor:i,descendant:r}),ay(e,t,n),e.compoundCount++,r}if(e.currentSubject===t){var a=ah(),o=e[e.length-1],s=ah(),l=ah(),u=ah(),c=ah();return a.checks.push({type:ad.COMPOUND_SPLIT,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:ad.TRUE}],c.checks.push({type:ad.TRUE}),s.checks.push({type:ad.ANCESTOR,ancestor:c,descendant:u}),ay(e,o,a),e.currentSubject=l,e.compoundCount++,u}var h=ah(),d=ah(),f=[{type:ad.ANCESTOR,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}},{name:"subject",modifier:!0,regex:ac.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return nk("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1].checks[0],r=null==n?null:n.type;r===ad.DIRECTED_EDGE?n.type=ad.NODE_TARGET:r===ad.UNDIRECTED_EDGE&&(n.type=ad.NODE_NEIGHBOR,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];am.forEach(function(e){return e.regexObj=RegExp("^"+e.regex)});var ab=function(e){for(var t,n,r,i=0;i<am.length;i++){var a=am[i],o=a.name,s=e.match(a.regexObj);if(null!=s){n=s,t=a,r=o;var l=s[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:r,remaining:e}},ax=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},aw=function(e,t,n){var r,i,a,o=tk(e),s=tD(e),l=tk(n),u=!1,c=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(o||l||u)&&(i=o||s?""+e:"",a=""+n),u&&(e=i=i.toLowerCase(),n=a=a.toLowerCase()),t){case"*=":r=i.indexOf(a)>=0;break;case"$=":r=i.indexOf(a,i.length-a.length)>=0;break;case"^=":r=0===i.indexOf(a);break;case"=":r=e===n;break;case">":h=!0,r=e>n;break;case">=":h=!0,r=e>=n;break;case"<":h=!0,r=e<n;break;case"<=":h=!0,r=e<=n;break;default:r=!1}return c&&(null!=e||!h)&&(r=!r),r},aE=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}},aT=function(e,t){return e.data(t)},aC=[],aS=function(e,t){return e.checks.every(function(e){return aC[e.type](e,t)})};aC[ad.GROUP]=function(e,t){var n=e.value;return"*"===n||n===t.group()},aC[ad.STATE]=function(e,t){var n;return n=e.value,ap[n](t)},aC[ad.ID]=function(e,t){var n=e.value;return t.id()===n},aC[ad.CLASS]=function(e,t){var n=e.value;return t.hasClass(n)},aC[ad.META_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return aw(t[n](),r,i)},aC[ad.DATA_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return aw(aT(t,n),r,i)},aC[ad.DATA_BOOL]=function(e,t){var n=e.field,r=e.operator;return aE(aT(t,n),r)},aC[ad.DATA_EXIST]=function(e,t){var n=e.field;return e.operator,void 0!==aT(t,n)},aC[ad.UNDIRECTED_EDGE]=function(e,t){var n=e.nodes[0],r=e.nodes[1],i=t.source(),a=t.target();return aS(n,i)&&aS(r,a)||aS(r,i)&&aS(n,a)},aC[ad.NODE_NEIGHBOR]=function(e,t){return aS(e.node,t)&&t.neighborhood().some(function(t){return t.isNode()&&aS(e.neighbor,t)})},aC[ad.DIRECTED_EDGE]=function(e,t){return aS(e.source,t.source())&&aS(e.target,t.target())},aC[ad.NODE_SOURCE]=function(e,t){return aS(e.source,t)&&t.outgoers().some(function(t){return t.isNode()&&aS(e.target,t)})},aC[ad.NODE_TARGET]=function(e,t){return aS(e.target,t)&&t.incomers().some(function(t){return t.isNode()&&aS(e.source,t)})},aC[ad.CHILD]=function(e,t){return aS(e.child,t)&&aS(e.parent,t.parent())},aC[ad.PARENT]=function(e,t){return aS(e.parent,t)&&t.children().some(function(t){return aS(e.child,t)})},aC[ad.DESCENDANT]=function(e,t){return aS(e.descendant,t)&&t.ancestors().some(function(t){return aS(e.ancestor,t)})},aC[ad.ANCESTOR]=function(e,t){return aS(e.ancestor,t)&&t.descendants().some(function(t){return aS(e.descendant,t)})},aC[ad.COMPOUND_SPLIT]=function(e,t){return aS(e.subject,t)&&aS(e.left,t)&&aS(e.right,t)},aC[ad.TRUE]=function(){return!0},aC[ad.COLLECTION]=function(e,t){return e.value.has(t)},aC[ad.FILTER]=function(e,t){return(0,e.value)(t)};var ak=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||tk(e)&&e.match(/^\s*$/)||(tR(e)?this.addQuery({checks:[{type:ad.COLLECTION,value:e.collection()}]}):tP(e)?this.addQuery({checks:[{type:ad.FILTER,value:e}]}):tk(e)?this.parse(e)||(this.invalid=!0):nC("A selector must be created from a string; found "))},aP=ak.prototype;[{parse:function(e){var t=this.inputText=e,n=this[0]=ah();for(this.length=1,t=ax(t);;){var r=ab(t);if(null==r.expr)return nk("The selector `"+e+"`is invalid"),!1;var i=r.match.slice(1),a=r.expr.populate(this,n,i);if(!1===a)return!1;if(null!=a&&(n=a),(t=r.remaining).match(/^\s*$/))break}var o=this[this.length-1];null!=this.currentSubject&&(o.subject=this.currentSubject),o.edgeCount=this.edgeCount,o.compoundCount=this.compoundCount;for(var s=0;s<this.length;s++){var l=this[s];if(l.compoundCount>0&&l.edgeCount>0)return nk("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return nk("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&nk("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return tk(t)?'"'+t+'"':e(t)},n=function(e){return" "+e+" "},r=function(r,a){var o=r.type,s=r.value;switch(o){case ad.GROUP:var l=e(s);return l.substring(0,l.length-1);case ad.DATA_COMPARE:return"["+r.field+n(e(r.operator))+t(s)+"]";case ad.DATA_BOOL:var u=r.operator,c=r.field;return"["+e(u)+c+"]";case ad.DATA_EXIST:return"["+r.field+"]";case ad.META_COMPARE:var h=r.operator;return"[["+r.field+n(e(h))+t(s)+"]]";case ad.STATE:return s;case ad.ID:return"#"+s;case ad.CLASS:return"."+s;case ad.PARENT:case ad.CHILD:return i(r.parent,a)+n(">")+i(r.child,a);case ad.ANCESTOR:case ad.DESCENDANT:return i(r.ancestor,a)+" "+i(r.descendant,a);case ad.COMPOUND_SPLIT:var d=i(r.left,a),f=i(r.subject,a),p=i(r.right,a);return d+(d.length>0?" ":"")+f+p;case ad.TRUE:return""}},i=function(e,t){return e.checks.reduce(function(n,i,a){return n+(t===e&&0===a?"$":"")+r(i,t)},"")},a="",o=0;o<this.length;o++){var s=this[o];a+=i(s,s.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a}},{matches:function(e){for(var t=0;t<this.length;t++)if(aS(this[t],e))return!0;return!1},filter:function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===ad.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(e){for(var n=0;n<t.length;n++)if(aS(t[n],e))return!0;return!1};return null==t.text()&&(n=function(){return!0}),e.filter(n)}}].forEach(function(e){return t$(aP,e)}),aP.text=function(){return this.inputText},aP.size=function(){return this.length},aP.eq=function(e){return this[e]},aP.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},aP.addQuery=function(e){this[this.length++]=e},aP.selector=aP.toString;var aB={allAre:function(e){var t=new ak(e);return this.every(function(e){return t.matches(e)})},is:function(e){var t=new ak(e);return this.some(function(e){return t.matches(e)})},some:function(e,t){for(var n=0;n<this.length;n++)if(t?e.apply(t,[this[n],n,this]):e(this[n],n,this))return!0;return!1},every:function(e,t){for(var n=0;n<this.length;n++)if(!(t?e.apply(t,[this[n],n,this]):e(this[n],n,this)))return!1;return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every(function(t){return e.hasElementWithId(t.id())}))},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(e){return t.hasElementWithId(e.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(e){return t.hasElementWithId(e.id())})}};aB.allAreNeighbours=aB.allAreNeighbors,aB.has=aB.contains,aB.equal=aB.equals=aB.same;var aA=function(e,t){return function(n,r,i,a){if(null==n?o="":tR(n)&&1===n.length&&(o=n.id()),1!==this.length||!o)return e.call(this,n,r,i,a);var o,s=this[0]._private,l=s.traversalCache=s.traversalCache||{},u=l[t]=l[t]||[],c=nf(o),h=u[c];return h||(u[c]=e.call(this,n,r,i,a))}},aD={parent:function(e){var t=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&t.push(i)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n].parents();t=(t=t||r).intersect(r)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isChild()}).filter(e)},children:aA(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)t.push(r[i]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return!function e(n){for(var r=0;r<n.length;r++){var i=n[r];t.push(i),i.children().nonempty()&&e(i.children())}}(this.children()),this.spawn(t,!0).filter(e)}};function a_(e,t,n,r){for(var i=[],a=new nV,o=e.cy().hasCompoundNodes(),s=0;s<e.length;s++){var l=e[s];n?i.push(l):o&&r(i,a,l)}for(;i.length>0;){var u=i.shift();t(u),a.add(u.id()),o&&r(i,a,u)}return e}function aR(e,t,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var a=r[i];t.has(a.id())||e.push(a)}}function aM(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}function aO(e,t,n){aM(e,t,n),aR(e,t,n)}aD.forEachDown=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return a_(this,e,t,aR)},aD.forEachUp=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return a_(this,e,t,aM)},aD.forEachUpAndDown=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return a_(this,e,t,aO)},aD.ancestors=aD.parents,(u5=u3={data:as.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:as.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:as.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:as.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:as.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:as.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=u5.data,u5.removeAttr=u5.removeData;var aI={};function aN(e){return function(t){if(void 0===t&&(t=!0),0!==this.length)if(!this.isNode()||this.removed())return;else{for(var n=0,r=this[0],i=r._private.edges,a=0;a<i.length;a++){var o=i[a];!t&&o.isLoop()||(n+=e(r,o))}return n}}}function aL(e,t){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][e](n);void 0!==o&&(void 0===r||t(o,r))&&(r=o)}return r}}t$(aI,{degree:aN(function(e,t){return t.source().same(t.target())?2:1}),indegree:aN(function(e,t){return+!!t.target().same(e)}),outdegree:aN(function(e,t){return+!!t.source().same(e)})}),t$(aI,{minDegree:aL("degree",function(e,t){return e<t}),maxDegree:aL("degree",function(e,t){return e>t}),minIndegree:aL("indegree",function(e,t){return e<t}),maxIndegree:aL("indegree",function(e,t){return e>t}),minOutdegree:aL("outdegree",function(e,t){return e<t}),maxOutdegree:aL("outdegree",function(e,t){return e>t})}),t$(aI,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}});var az=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(!i.locked()){var a=i._private.position,o={x:null!=t.x?t.x-a.x:0,y:null!=t.y?t.y-a.y:0};i.isParent()&&(0!==o.x||0!==o.y)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},aF={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){az(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};(u4=u6={position:as.data(aF),silentPosition:as.data(t$({},aF,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){az(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(tA(e))t?this.silentPosition(e):this.position(e);else if(tP(e)){var n=this.cy();n.startBatch();for(var r=0;r<this.length;r++){var i=this[r],a=void 0;(a=e(i,r))&&(t?i.silentPosition(a):i.position(a))}n.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var r;if(tA(e)?(r={x:tD(e.x)?e.x:0,y:tD(e.y)?e.y:0},n=t):tk(e)&&tD(t)&&((r={x:0,y:0})[e]=t),null!=r){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var s=o.position(),l={x:s.x+r.x,y:s.y+r.y};n?o.silentPosition(l):o.position(l)}}i.endBatch()}return this},silentShift:function(e,t){return tA(e)?this.shift(e,!0):tk(e)&&tD(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),i=r.zoom(),a=r.pan(),o=tA(e)?e:void 0,s=void 0!==o||void 0!==t&&tk(e);if(n&&n.isNode())if(!s)return(o=n0(n.position(),i,a),void 0===e)?o:o[e];else for(var l=0;l<this.length;l++){var u=this[l];void 0!==t?u.position(e,(t-a[e])/i):void 0!==o&&u.position(n1(o,i,a))}else if(!s)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),i=tA(e)?e:void 0,a=void 0!==i||void 0!==t&&tk(e),o=r.hasCompoundNodes();if(n&&n.isNode())if(a)for(var s=0;s<this.length;s++){var l=this[s],u=o?l.parent():null,c=u&&u.length>0;c&&(u=u[0]);var h=c?u.position():{x:0,y:0};void 0!==t?l.position(e,t+h[e]):void 0!==i&&l.position({x:i.x+h.x,y:i.y+h.y})}else{var d=n.position(),f=o?n.parent():null,p=f&&f.length>0;p&&(f=f[0]);var g=p?f.position():{x:0,y:0};return(i={x:d.x-g.x,y:d.y-g.y},void 0===e)?i:i[e]}else if(!a)return;return this}}).modelPosition=u4.point=u4.position,u4.modelPositions=u4.points=u4.positions,u4.renderedPoint=u4.renderedPosition,u4.relativePoint=u4.relativePosition,u8=u9={},u9.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),a=t.x1*r+i.x,o=t.x2*r+i.x,s=t.y1*r+i.y,l=t.y2*r+i.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}},u9.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()&&this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,e||t.emitAndNotify("bounds")}}),this},u9.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes()||!e&&t.batching())return this;for(var n=0;n<this.length;n++){var r=this[n],i=r._private;(!i.compoundBoundsClean||e)&&(!function(e){if(e.isParent()){var t=e._private,n=e.children(),r="include"===e.pstyle("compound-sizing-wrt-labels").value,i={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},a=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),o=t.position;(0===a.w||0===a.h)&&((a={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=o.x-a.w/2,a.x2=o.x+a.w/2,a.y1=o.y-a.h/2,a.y2=o.y+a.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(u=100*u/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var h=y(i.width.val-a.w,s,l),d=h.biasDiff,f=h.biasComplementDiff,p=y(i.height.val-a.h,u,c),g=p.biasDiff,v=p.biasComplementDiff;t.autoPadding=function(e,t,n,r){if("%"===n.units)switch(r){case"width":return e>0?n.pfValue*e:0;case"height":return t>0?n.pfValue*t:0;case"average":return e>0&&t>0?n.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?n.pfValue*t:n.pfValue*e:0;case"max":return e>0&&t>0?e>t?n.pfValue*e:n.pfValue*t:0;default:return 0}return"px"===n.units?n.pfValue:0}(a.w,a.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(a.w,i.width.val),o.x=(-d+a.x1+a.x2+f)/2,t.autoHeight=Math.max(a.h,i.height.val),o.y=(-g+a.y1+a.y2+v)/2}function y(e,t,n){var r=0,i=0,a=t+n;return e>0&&a>0&&(r=t/a*e,i=n/a*e),{biasDiff:r,biasComplementDiff:i}}}(r),t.batching()||(i.compoundBoundsClean=!0))}return this};var aV=function(e){return e===1/0||e===-1/0?0:e},aj=function(e,t,n,r,i){r-t!=0&&i-n!=0&&null!=t&&null!=n&&null!=r&&null!=i&&(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},aU=function(e,t){return null==t?e:aj(e,t.x1,t.y1,t.x2,t.y2)},aq=function(e,t,n){return nI(e,t,n)},aX=function(e,t,n){if(!t.cy().headless()){var r,i,a=t._private,o=a.rstyle,s=o.arrowWidth/2;if("none"!==t.pstyle(n+"-arrow-shape").value){"source"===n?(r=o.srcX,i=o.srcY):"target"===n?(r=o.tgtX,i=o.tgtY):(r=o.midX,i=o.midY);var l=a.arrowBounds=a.arrowBounds||{},u=l[n]=l[n]||{};u.x1=r-s,u.y1=i-s,u.x2=r+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,rh(u,1),aj(e,u.x1,u.y1,u.x2,u.y2)}}},aY=function(e,t,n){if(!t.cy().headless()){a=n?n+"-":"";var r=t._private,i=r.rstyle;if(t.pstyle(a+"label").strValue){var a,o,s,l,u,c=t.pstyle("text-halign"),h=t.pstyle("text-valign"),d=aq(i,"labelWidth",n),f=aq(i,"labelHeight",n),p=aq(i,"labelX",n),g=aq(i,"labelY",n),v=t.pstyle(a+"text-margin-x").pfValue,y=t.pstyle(a+"text-margin-y").pfValue,b=t.isEdge(),x=t.pstyle(a+"text-rotation"),w=t.pstyle("text-outline-width").pfValue,E=t.pstyle("text-border-width").pfValue/2,T=t.pstyle("text-background-padding").pfValue,C=d/2,S=f/2;if(b)o=p-C,s=p+C,l=g-S,u=g+S;else{switch(c.value){case"left":o=p-d,s=p;break;case"center":o=p-C,s=p+C;break;case"right":o=p,s=p+d}switch(h.value){case"top":l=g-f,u=g;break;case"center":l=g-S,u=g+S;break;case"bottom":l=g,u=g+f}}var k=v-Math.max(w,E)-T-2,P=v+Math.max(w,E)+T+2,B=y-Math.max(w,E)-T-2,A=y+Math.max(w,E)+T+2;o+=k,s+=P,l+=B,u+=A;var D=n||"main",_=r.labelBounds,R=_[D]=_[D]||{};R.x1=o,R.y1=l,R.x2=s,R.y2=u,R.w=s-o,R.h=u-l,R.leftPad=k,R.rightPad=P,R.topPad=B,R.botPad=A;var M=b&&"autorotate"===x.strValue,O=null!=x.pfValue&&0!==x.pfValue;if(M||O){var I=M?aq(r.rstyle,"labelAngle",n):x.pfValue,N=Math.cos(I),L=Math.sin(I),z=(o+s)/2,F=(l+u)/2;if(!b){switch(c.value){case"left":z=s;break;case"right":z=o}switch(h.value){case"top":F=u;break;case"bottom":F=l}}var V=function(e,t){return{x:(e-=z)*N-(t-=F)*L+z,y:e*L+t*N+F}},j=V(o,l),U=V(o,u),q=V(s,l),X=V(s,u);o=Math.min(j.x,U.x,q.x,X.x),s=Math.max(j.x,U.x,q.x,X.x),l=Math.min(j.y,U.y,q.y,X.y),u=Math.max(j.y,U.y,q.y,X.y)}var Y=D+"Rot",W=_[Y]=_[Y]||{};W.x1=o,W.y1=l,W.x2=s,W.y2=u,W.w=s-o,W.h=u-l,aj(e,o,l,s,u),aj(r.labelBounds.all,o,l,s,u)}return e}},aW=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,r=t.pstyle("outline-width").value+t.pstyle("outline-offset").value;aH(e,t,n,r,"outside",r/2)}},aH=function(e,t,n,r,i,a){if(0!==n&&!(r<=0)&&"inside"!==i){var o=t.cy(),s=t.pstyle("shape").value,l=o.renderer().nodeShapes[s],u=t.position(),c=u.x,h=u.y,d=t.width(),f=t.height();l.hasMiterBounds?("center"===i&&(r/=2),aU(e,l.miterBounds(c,h,d,f,r))):null!=a&&a>0&&rd(e,[a,a,a,a])}},aG=function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,r=t.pstyle("border-width").pfValue,i=t.pstyle("border-position").value;aH(e,t,n,r,i)}},aK=function(e,t){var n=e._private.cy,r=n.styleEnabled(),i=n.headless(),a=rs(),o=e._private,s=e.isNode(),l=e.isEdge(),u=o.rstyle,c=s&&r?e.pstyle("bounds-expansion").pfValue:[0],h=function(e){return"none"!==e.pstyle("display").value},d=!r||h(e)&&(!l||h(e.source())&&h(e.target()));if(d){var f=0;r&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(f=e.pstyle("overlay-padding").value);var p=0;r&&t.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&(p=e.pstyle("underlay-padding").value);var g=Math.max(f,p),v=0;if(r&&(v=e.pstyle("width").pfValue/2),s&&t.includeNodes){var y=e.position();S=y.x,k=y.y;var b=e.outerWidth()/2,x=e.outerHeight()/2;w=S-b,E=S+b,aj(a,w,T=k-x,E,C=k+x),r&&aW(a,e),r&&t.includeOutlines&&!i&&aW(a,e),r&&aG(a,e)}else if(l&&t.includeEdges)if(r&&!i){var w,E,T,C,S,k,P,B=e.pstyle("curve-style").strValue;if(w=Math.min(u.srcX,u.midX,u.tgtX),E=Math.max(u.srcX,u.midX,u.tgtX),T=Math.min(u.srcY,u.midY,u.tgtY),C=Math.max(u.srcY,u.midY,u.tgtY),w-=v,E+=v,aj(a,w,T-=v,E,C+=v),"haystack"===B){var A=u.haystackPts;if(A&&2===A.length){if(w=A[0].x,T=A[0].y,E=A[1].x,C=A[1].y,w>E){var D=w;w=E,E=D}if(T>C){var _=T;T=C,C=_}aj(a,w-v,T-v,E+v,C+v)}}else if("bezier"===B||"unbundled-bezier"===B||tX(B,"segments")||tX(B,"taxi")){switch(B){case"bezier":case"unbundled-bezier":P=u.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":P=u.linePts}if(null!=P)for(var R=0;R<P.length;R++){var M=P[R];w=M.x-v,E=M.x+v,aj(a,w,T=M.y-v,E,C=M.y+v)}}}else{var O=e.source().position(),I=e.target().position();if(w=O.x,E=I.x,T=O.y,C=I.y,w>E){var N=w;w=E,E=N}if(T>C){var L=T;T=C,C=L}w-=v,E+=v,aj(a,w,T-=v,E,C+=v)}if(r&&t.includeEdges&&l&&(aX(a,e,"mid-source"),aX(a,e,"mid-target"),aX(a,e,"source"),aX(a,e,"target")),r&&"yes"===e.pstyle("ghost").value){var z=e.pstyle("ghost-offset-x").pfValue,F=e.pstyle("ghost-offset-y").pfValue;aj(a,a.x1+z,a.y1+F,a.x2+z,a.y2+F)}var V=o.bodyBounds=o.bodyBounds||{};rf(V,a),rd(V,c),rh(V,1),r&&(w=a.x1,E=a.x2,T=a.y1,C=a.y2,aj(a,w-g,T-g,E+g,C+g));var j=o.overlayBounds=o.overlayBounds||{};rf(j,a),rd(j,c),rh(j,1);var U=o.labelBounds=o.labelBounds||{};null!=U.all?rl(U.all):U.all=rs(),r&&t.includeLabels&&(t.includeMainLabels&&aY(a,e,null),l&&(t.includeSourceLabels&&aY(a,e,"source"),t.includeTargetLabels&&aY(a,e,"target")))}return a.x1=aV(a.x1),a.y1=aV(a.y1),a.x2=aV(a.x2),a.y2=aV(a.y2),a.w=aV(a.x2-a.x1),a.h=aV(a.y2-a.y1),a.w>0&&a.h>0&&d&&(rd(a,c),rh(a,1)),a},aZ=function(e){var t=0,n=function(e){return!!e<<t++};return 0+n(e.incudeNodes)+n(e.includeEdges)+n(e.includeLabels)+n(e.includeMainLabels)+n(e.includeSourceLabels)+n(e.includeTargetLabels)+n(e.includeOverlays)+n(e.includeOutlines)},a$=function(e){var t=function(e){return Math.round(e)};if(e.isEdge()){var n=e.source().position(),r=e.target().position();return nd([t(n.x),t(n.y),t(r.x),t(r.y)])}var i=e.position();return nd([t(i.x),t(i.y)])},aQ=function(e,t){var n,r=e._private,i=e.isEdge(),a=null==t?a0:aZ(t);if(null==r.bbCache?(r.bbCache=n=aK(e,aJ),r.bbCachePosKey=a$(e)):n=r.bbCache,a!==a0){var o=e.isNode();n=rs(),(t.includeNodes&&o||t.includeEdges&&!o)&&(t.includeOverlays?aU(n,r.overlayBounds):aU(n,r.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?aU(n,r.labelBounds.all):(t.includeMainLabels&&aU(n,r.labelBounds.mainRot),t.includeSourceLabels&&aU(n,r.labelBounds.sourceRot),t.includeTargetLabels&&aU(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},aJ={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},a0=aZ(aJ),a1=n_(aJ);u9.boundingBox=function(e){var t,n=void 0===e||void 0===e.useCache||!0===e.useCache,r=tF(function(e){var t=e._private;return null==t.bbCache||t.styleDirty||t.bbCachePosKey!==a$(e)},function(e){return e.id()});if(n&&1===this.length&&!r(this[0]))e=void 0===e?aJ:a1(e),t=aQ(this[0],e);else{t=rs();var i=a1(e=e||aJ),a=this.cy().styleEnabled();this.edges().forEach(r),this.nodes().forEach(r),a&&this.recalculateRenderedStyle(n),this.updateCompoundBounds(!n);for(var o=0;o<this.length;o++){var s=this[o];r(s)&&s.dirtyBoundingBoxCache(),aU(t,aQ(s,i))}}return t.x1=aV(t.x1),t.y1=aV(t.y1),t.x2=aV(t.x2),t.y2=aV(t.y2),t.w=aV(t.x2-t.x1),t.h=aV(t.y2-t.y1),t},u9.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},u9.boundingBoxAt=function(e){var t,n=this.nodes(),r=this.cy(),i=r.hasCompoundNodes(),a=r.collection();if(i&&(a=n.filter(function(e){return e.isParent()}),n=n.not(a)),tA(e)){var o=e;e=function(){return o}}r.startBatch(),n.forEach(function(t,n){return t._private.bbAtOldPos=e(t,n)}).silentPositions(e),i&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var s={x1:(t=this.boundingBox({useCache:!1})).x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h};return n.silentPositions(function(e){return e._private.bbAtOldPos}),i&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),s},u8.boundingbox=u8.bb=u8.boundingBox,u8.renderedBoundingbox=u8.renderedBoundingBox,u7=ce={};var a2=function(e){e.uppercaseName=tq(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=tq(e.outerName),u7[e.name]=function(){var t=this[0],n=t._private,r=n.cy._private.styleEnabled;if(t)if(!r)return 1;else{if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var i=t.pstyle(e.name);return"label"===i.strValue?(t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0):i.pfValue}},u7["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private.cy._private.styleEnabled;if(t)if(!n)return 1;else{var r=t[e.name](),i=t.pstyle("border-position").value;return r+("center"===i?t.pstyle("border-width").pfValue:"outside"===i?2*t.pstyle("border-width").pfValue:0)+2*t.padding()}},u7["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},u7["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};a2({name:"width"}),a2({name:"height"}),ce.padding=function(){var e=this[0],t=e._private;return e.isParent()&&(e.updateCompoundBounds(),void 0!==t.autoPadding)?t.autoPadding:e.pstyle("padding").pfValue},ce.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},ce.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var a5=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},a3=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return n0(t(e),n.zoom(),n.pan())}},a4=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),r=n.pan(),i=n.zoom();return t(e).map(function(e){return n0(e,i,r)})}},a6={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},a8=t$({},u6,u9,ce,Object.keys(a6).reduce(function(e,t){var n=a6[t],r="rendered"+t[0].toUpperCase()+t.substr(1);return e[t]=function(){return a5(this,n.get)},n.mult?e[r]=function(){return a4(this,n.get)}:e[r]=function(){return a3(this,n.get)},e},{})),a9=function(e,t){this.recycle(e,t)};function a7(){return!1}function oe(){return!0}a9.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=a7,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?oe:a7):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=oe;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=oe;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=oe,this.stopPropagation()},isDefaultPrevented:a7,isPropagationStopped:a7,isImmediatePropagationStopped:a7};var ot=/^([^.]+)(\.(?:[^.]+))?$/,on={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},or=Object.keys(on),oi={};function oa(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oi,t=arguments.length>1?arguments[1]:void 0,n=0;n<or.length;n++){var r=or[n];this[r]=e[r]||on[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}var oo=oa.prototype,os=function(e,t,n,r,i,a,o){tP(r)&&(i=r,r=null),o&&(a=null==a?o:t$({},a,o));for(var s=tB(n)?n:n.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!tL(u)){var c=u.match(ot);if(c&&!1===t(e,u,c[1],c[2]?c[2]:null,r,i,a))break}}},ol=function(e,t){return e.addEventFields(e.context,t),new a9(t.type,t)},ou=function(e,t,n){if("event"===tS(n))return void t(e,n);if(tA(n))return void t(e,ol(e,n));for(var r=tB(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var a=r[i];if(!tL(a)){var o=a.match(ot);if(o){var s=ol(e,{type:o[1],namespace:o[2]?o[2]:null,target:e.context});t(e,s)}}}};oo.on=oo.addListener=function(e,t,n,r,i){return os(this,function(e,t,n,r,i,a,o){tP(a)&&e.listeners.push({event:t,callback:a,type:n,namespace:r,qualifier:i,conf:o})},e,t,n,r,i),this},oo.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})},oo.removeListener=oo.off=function(e,t,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var a=this.listeners,o=function(o){var s=a[o];os(i,function(t,n,r,i,l,u){if((s.type===r||"*"===e)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!l||t.qualifierCompare(s.qualifier,l))&&(!u||s.callback===u))return a.splice(o,1),!1},e,t,n,r)},s=a.length-1;s>=0;s--)o(s);return this},oo.removeAllListeners=function(){return this.removeListener("*")},oo.emit=oo.trigger=function(e,t,n){var r=this.listeners,i=r.length;return this.emitting++,tB(t)||(t=[t]),ou(this,function(e,a){null!=n&&(i=(r=[{event:a.event,type:a.type,namespace:a.namespace,callback:n}]).length);for(var o=0;o<i;o++)!function(){var n=r[o];if(n.type===a.type&&(!n.namespace||n.namespace===a.namespace||".*"===n.namespace)&&e.eventMatches(e.context,n,a)){var i=[a];null!=t&&nO(i,t),e.beforeEmit(e.context,n,a),n.conf&&n.conf.one&&(e.listeners=e.listeners.filter(function(e){return e!==n}));var s=e.callbackContext(e.context,n,a),l=n.callback.apply(s,i);e.afterEmit(e.context,n,a),!1===l&&(a.stopPropagation(),a.preventDefault())}}();e.bubble(e.context)&&!a.isPropagationStopped()&&e.parent(e.context).emit(a,t)},e),this.emitting--,this};var oc={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&tM(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},oh=function(e){return tk(e)?new ak(e):e},od={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new oa(oc,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=oh(t),i=0;i<this.length;i++)this[i].emitter().on(e,r,n);return this},removeListener:function(e,t,n){for(var r=oh(t),i=0;i<this.length;i++)this[i].emitter().removeListener(e,r,n);return this},removeAllListeners:function(){for(var e=0;e<this.length;e++)this[e].emitter().removeAllListeners();return this},one:function(e,t,n){for(var r=oh(t),i=0;i<this.length;i++)this[i].emitter().one(e,r,n);return this},once:function(e,t,n){for(var r=oh(t),i=0;i<this.length;i++)this[i].emitter().on(e,r,n,{once:!0,onceCollection:this})},emit:function(e,t){for(var n=0;n<this.length;n++)this[n].emitter().emit(e,t);return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};as.eventAliasesOn(od);var of={nodes:function(e){return this.filter(function(e){return e.isNode()}).filter(e)},edges:function(e){return this.filter(function(e){return e.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.push(r):t.push(r)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(tk(e)||tR(e))return new ak(e).filter(this);if(tP(e)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(t?e.apply(t,[i,r,this]):e(i,r,this))&&n.push(i)}return n}return this.spawn()},not:function(e){if(!e)return this;tk(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var r=this[n];e.has(r)||t.push(r)}return t},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(tk(e))return this.filter(e);for(var t=this.spawn(),n=this.length<e.length,r=n?this:e,i=n?e:this,a=0;a<r.length;a++){var o=r[a];i.has(o)&&t.push(o)}return t},xor:function(e){var t=this._private.cy;tk(e)&&(e=t.$(e));var n=this.spawn(),r=e,i=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=i._private.data.id;t.hasElementWithId(a)||n.push(i)}};return i(this,r),i(r,this),n},diff:function(e){var t=this._private.cy;tk(e)&&(e=t.$(e));var n=this.spawn(),r=this.spawn(),i=this.spawn(),a=e,o=function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r],o=a._private.data.id;t.hasElementWithId(o)?i.merge(a):n.push(a)}};return o(this,a,n),o(a,this,r),{left:n,right:r,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(tk(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<e.length;i++){var a=e[i];this.has(a)||r.push(a)}return r},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&tk(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=t.map,a=0;a<e.length;a++){var o=e[a],s=o._private.data.id;if(!i.has(s)){var l=this.length++;this[l]=o,i.set(s,{ele:o,index:l})}}return this},unmergeAt:function(e){var t=this[e].id(),n=this._private.map;this[e]=void 0,n.delete(t);var r=e===this.length-1;if(this.length>1&&!r){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[e]=a,n.set(o,{ele:a,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map.get(n);if(!r)return this;var i=r.index;return this.unmergeAt(i),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&tk(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--)e(this[t])&&this.unmergeAt(t);return this},map:function(e,t){for(var n=[],r=0;r<this.length;r++){var i=this[r],a=t?e.apply(t,[i,r,this]):e(i,r,this);n.push(a)}return n},reduce:function(e,t){for(var n=t,r=0;r<this.length;r++)n=e(n,this[r],r,this);return n},max:function(e,t){for(var n,r=-1/0,i=0;i<this.length;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);o>r&&(r=o,n=a)}return{value:r,ele:n}},min:function(e,t){for(var n,r=1/0,i=0;i<this.length;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);o<r&&(r=o,n=a)}return{value:r,ele:n}}};of.u=of["|"]=of["+"]=of.union=of.or=of.add,of["\\"]=of["!"]=of["-"]=of.difference=of.relativeComplement=of.subtract=of.not,of.n=of["&"]=of["."]=of.and=of.intersection=of.intersect,of["^"]=of["(+)"]=of["(-)"]=of.symmetricDifference=of.symdiff=of.xor,of.fnFilter=of.filterFn=of.stdFilter=of.filter,of.complement=of.abscomp=of.absoluteComplement;var op=function(e,t){var n=e.cy().hasCompoundNodes();function r(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?n?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?nb:0}var i=r(e)-r(t);if(0!==i)return i;function a(e){return"auto"===e.pstyle("z-index-compare").value?+!!e.isNode():0}var o=a(e)-a(t);if(0!==o)return o;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==s?s:e.poolIndex()-t.poolIndex()},og={forEach:function(e,t){if(tP(e))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(t?e.apply(t,[i,r,this]):e(i,r,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var i=e;i>=0&&i<t&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!tP(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(op)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var n=t.data.parent?e.parents().size():0;return e.isParent()?n:nb-1}var r=t.source,i=t.target;return Math.max(r.zDepth(),i.zDepth(),0)}}};og.each=og.forEach,!function(){var e="undefined";("undefined"==typeof Symbol?"undefined":ty(Symbol))!=e&&ty(Symbol.iterator)!=e&&(og[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},n=0,r=this.length;return tf({next:function(){return n<r?t.value=e[n++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,function(){return this})})}();var ov=n_({nodeDimensionsIncludeLabels:!1}),oy={layoutDimensions:function(e){if(e=ov(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var t,n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return(0===t.w||0===t.h)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var r=this.nodes().filter(function(e){return!e.isParent()}),i=this.cy(),a=t.eles,o=function(e){return e.id()},s=tF(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(e,t,n){var r={x:t.x1+t.w/2,y:t.y1+t.h/2},i={x:(n.x-r.x)*e,y:(n.y-r.y)*e};return{x:r.x+i.x,y:r.y+i.y}},u=t.spacingFactor&&1!==t.spacingFactor,c=function(){if(!u)return null;for(var e=rs(),t=0;t<r.length;t++){var n=s(r[t],t);rc(e,n.x,n.y)}return e}(),h=tF(function(e,n){var r=s(e,n);return u&&(r=l(Math.abs(t.spacingFactor),c,r)),null!=t.transform&&(r=t.transform(e,r)),r},o);if(t.animate){for(var d=0;d<r.length;d++){var f=r[d],p=h(f,d);if(null==t.animateFilter||t.animateFilter(f,d)){var g=f.animation({position:p,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}else f.position(p)}if(t.fit){var v=i.animation({fit:{boundingBox:a.boundingBoxAt(h),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(v)}else if(void 0!==t.zoom&&void 0!==t.pan){var y=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}e.animations.forEach(function(e){return e.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),i0.all(e.animations.map(function(e){return e.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(h),t.fit&&i.fit(t.eles,t.padding),null!=t.zoom&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(t$({},e,{eles:this}))}};function om(e,t,n){var r,i=n._private,a=i.styleCache=i.styleCache||[];return null!=(r=a[e])?r:r=a[e]=t(n)}function ob(e,t){return e=nf(e),function(n){return om(e,t,n)}}function ox(e,t){e=nf(e);var n=function(e){return t.call(e)};return function(){var t=this[0];if(t)return om(e,n,t)}}oy.createLayout=oy.makeLayout=oy.layout;var ow={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),n=function(e){return e._private.styleCache=null};return t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(n)):this.forEach(function(e){n(e),e.connectedEdges().forEach(n)}),this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var n=t.hasCompoundNodes(),r=this;e=!!e||void 0===e,n&&(r=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var i=r;return e?i.emitAndNotify("style"):i.emit("style"),r.forEach(function(e){return e._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,r.style().apply(n));var i=n._private.style[e];return null!=i?i:t?r.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(tA(e))r.applyBypass(this,e,!1),this.emitAndNotify("style");else if(tk(e))if(void 0===t){var i=this[0];return i?r.getStylePropertyValue(i,e):void 0}else r.applyBypass(this,e,t,!1),this.emitAndNotify("style");else if(void 0===e){var a=this[0];return a?r.getRawStyle(a):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=t.style();if(void 0===e)for(var r=0;r<this.length;r++){var i=this[r];n.removeAllBypasses(i,!1)}else{e=e.split(/\s+/);for(var a=0;a<this.length;a++){var o=this[a];n.removeBypasses(o,e,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!t)return i;var a=r.data.parent?n.parents():null;if(a)for(var o=0;o<a.length;o++)i*=a[o].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();if(e)if(!t)return 0===e.pstyle("opacity").value;else return 0===e.effectiveOpacity()},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function oE(e,t){var n=e._private.data.parent?e.parents():null;if(n){for(var r=0;r<n.length;r++)if(!t(n[r]))return!1}return!0}function oT(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],a=e.hasCompoundNodes();if(i){var o=i._private;if(!t(i))return!1;if(i.isNode())return!a||oE(i,r);var s=o.source,l=o.target;return n(s)&&(!a||oE(s,n))&&(s===l||n(l)&&(!a||oE(l,n)))}}}var oC=ob("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});ow.takesUpSpace=ox("takesUpSpace",oT({ok:oC})),ow.interactive=ox("interactive",oT({ok:ob("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&oC(e)}),parentOk:ob("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&oC(e)}),edgeOkViaNode:oC})),ow.noninteractive=function(){var e=this[0];if(e)return!e.interactive()},ow.visible=ox("visible",oT({ok:ob("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&oC(e)}),edgeOkViaNode:oC})),ow.hidden=function(){var e=this[0];if(e)return!e.visible()},ow.isBundledBezier=ox("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),ow.bypass=ow.css=ow.style,ow.renderedCss=ow.renderedStyle,ow.removeBypass=ow.removeCss=ow.removeStyle,ow.pstyle=ow.parsedStyle;var oS={};function ok(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],i=t[1];this.on(e.event,r,i)}else if(1===t.length&&tP(t[0])){var a=t[0];this.on(e.event,a)}else if(0===t.length||1===t.length&&tB(t[0])){for(var o=1===t.length?t[0]:null,s=0;s<this.length;s++){var l=this[s],u=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(void 0!==h&&(u=h,!h))return this}u&&(l._private[e.field]=e.value,c&&n.push(l))}var d=this.spawn(n);d.updateStyle(),d.emit(e.event),o&&d.emit(o)}return this}}function oP(e){oS[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},oS[e.on]=ok({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),oS[e.off]=ok({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}oP({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),oP({field:"grabbable",overrideField:function(e){return!(e.cy().autoungrabify()||e.pannable())&&void 0},on:"grabify",off:"ungrabify"}),oP({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),oP({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),oS.deselect=oS.unselect,oS.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},oP({field:"active",on:"activate",off:"unactivate"}),oP({field:"pannable",on:"panify",off:"unpanify"}),oS.inactive=function(){var e=this[0];if(e)return!e._private.active};var oB={},oA=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),s=0;s<o.length;s++){var l=o[s],u=l.source(),c=l.target();if(e.noIncomingEdges&&c===i&&u!==i||e.noOutgoingEdges&&u===i&&c!==i){a=!0;break}}a||n.push(i)}}return this.spawn(n,!0).filter(t)}},oD=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target();e.outgoing&&l===i?(n.push(s),n.push(u)):e.incoming&&u===i&&(n.push(s),n.push(l))}}return this.spawn(n,!0).filter(t)}},o_=function(e){return function(t){for(var n=this,r=[],i={};;){var a=e.outgoing?n.outgoers():n.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var l=a[s],u=l.id();i[u]||(i[u]=!0,r.push(l),o=!0)}if(!o)break;n=a}return this.spawn(r,!0).filter(t)}};function oR(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[e.attr];i&&n.push(i)}return this.spawn(n,!0).filter(t)}}function oM(e){return function(t){var n=[],r=this._private.cy,i=e||{};tk(t)&&(t=r.$(t));for(var a=0;a<t.length;a++)for(var o=t[a]._private.edges,s=0;s<o.length;s++){var l=o[s],u=l._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),h=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||h){if((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!h))continue;n.push(l)}}return this.spawn(n,!0)}}function oO(e){return e=t$({},{codirected:!1},e),function(t){for(var n=[],r=this.edges(),i=e,a=0;a<r.length;a++)for(var o=r[a]._private,s=o.source,l=s._private.data.id,u=o.data.target,c=s._private.edges,h=0;h<c.length;h++){var d=c[h],f=d._private.data,p=f.target,g=f.source,v=p===u&&g===l,y=l===p&&u===g;(i.codirected&&v||!i.codirected&&(v||y))&&n.push(d)}return this.spawn(n,!0).filter(t)}}oB.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},t$(oB,{roots:oA({noIncomingEdges:!0}),leaves:oA({noOutgoingEdges:!0}),outgoers:aA(oD({outgoing:!0}),"outgoers"),successors:o_({outgoing:!0}),incomers:aA(oD({incoming:!0}),"incomers"),predecessors:o_({})}),t$(oB,{neighborhood:aA(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),oB.neighbourhood=oB.neighborhood,oB.closedNeighbourhood=oB.closedNeighborhood,oB.openNeighbourhood=oB.openNeighborhood,t$(oB,{source:aA(function(e){var t,n=this[0];return n&&(t=n._private.source||n.cy().collection()),t&&e?t.filter(e):t},"source"),target:aA(function(e){var t,n=this[0];return n&&(t=n._private.target||n.cy().collection()),t&&e?t.filter(e):t},"target"),sources:oR({attr:"source"}),targets:oR({attr:"target"})}),t$(oB,{edgesWith:aA(oM(),"edgesWith"),edgesTo:aA(oM({thisIsSrc:!0}),"edgesTo")}),t$(oB,{connectedEdges:aA(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,a=0;a<i.length;a++){var o=i[a];t.push(o)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:aA(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(t.push(r.source()[0]),t.push(r.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:aA(oO(),"parallelEdges"),codirectedEdges:aA(oO({codirected:!0}),"codirectedEdges")}),t$(oB,{components:function(e){var t=this,n=t.cy(),r=n.collection(),i=null==e?t.nodes():e.nodes(),a=[];null!=e&&i.empty()&&(i=e.sources());var o=function(e,t){r.merge(e),i.unmerge(e),t.merge(e)};if(i.empty())return t.spawn();do!function(){var e=n.collection();a.push(e);var r=i[0];o(r,e),t.bfs({directed:!1,roots:r,visit:function(t){return o(t,e)}}),e.forEach(function(n){n.connectedEdges().forEach(function(n){t.has(n)&&e.has(n.source())&&e.has(n.target())&&e.merge(n)})})}();while(i.length>0)return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),oB.componentsOf=oB.components;var oI=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0===e)return void nC("A collection must have a reference to the core");var i=new nz,a=!1;if(t){if(t.length>0&&tA(t[0])&&!tM(t[0])){a=!0;for(var o=[],s=new nV,l=0,u=t.length;l<u;l++){var c=t[l];null==c.data&&(c.data={});var h=c.data;if(null==h.id)h.id=nB();else if(e.hasElementWithId(h.id)||s.has(h.id))continue;var d=new nj(e,c,!1);o.push(d),s.add(h.id)}t=o}}else t=[];this.length=0;for(var f=0,p=t.length;f<p;f++){var g=t[f][0];if(null!=g){var v=g._private.data.id;(!n||!i.has(v))&&(n&&i.set(v,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var e=this.lazyMap=new nz,t=this.eles,n=0;n<t.length;n++){var r=t[n];e.set(r.id(),{index:n,ele:r})}}},n&&(this._private.map=i),a&&!r&&this.restore()},oN=nj.prototype=oI.prototype=Object.create(Array.prototype);oN.instanceString=function(){return"collection"},oN.spawn=function(e,t){return new oI(this.cy(),e,t)},oN.spawnSelf=function(){return this.spawn(this)},oN.cy=function(){return this._private.cy},oN.renderer=function(){return this._private.cy.renderer()},oN.element=function(){return this[0]},oN.collection=function(){return tO(this)?this:new oI(this._private.cy,[this])},oN.unique=function(){return new oI(this._private.cy,this,!0)},oN.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},oN.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new oI(t)},oN.$id=oN.getElementById,oN.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},oN.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},oN.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},oN.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var r=t._private;if(tA(e)){if(n.startBatch(),e.data){t.data(e.data);var i=r.data;if(t.isEdge()){var a=!1,o={},s=e.data.source,l=e.data.target;null!=s&&s!=i.source&&(o.source=""+s,a=!0),null!=l&&l!=i.target&&(o.target=""+l,a=!0),a&&(t=t.move(o))}else{var u="parent"in e.data,c=e.data.parent;u&&(null!=c||null!=i.parent)&&c!=i.parent&&(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var h=function(n,i,a){var o=e[n];null!=o&&o!==r[n]&&(o?t[i]():t[a]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var d={data:nP(r.data),position:nP(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};d.classes="";var f=0;return r.classes.forEach(function(e){return d.classes+=0==f++?e:" "+e}),d}}},oN.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].json();e.push(n)}return e},oN.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=new nj(e,this[n].json(),!1);t.push(r)}return new oI(e,t)},oN.copy=oN.clone,oN.restore=function(){for(var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.cy(),r=n._private,i=[],a=[],o=0,s=this.length;o<s;o++){var l=this[o];(!t||l.removed())&&(l.isNode()?i.push(l):a.push(l))}_=i.concat(a);var u=function(){_.splice(R,1),R--};for(R=0;R<_.length;R++){var c=_[R],h=c._private,d=h.data;if(c.clearTraversalCache(),t||h.removed){if(void 0===d.id)d.id=nB();else if(tD(d.id))d.id=""+d.id;else if(tL(d.id)||!tk(d.id)){nC("Can not create element with invalid string ID `"+d.id+"`"),u();continue}else if(n.hasElementWithId(d.id)){nC("Can not create second element with ID `"+d.id+"`"),u();continue}}var f=d.id;if(c.isNode()){var p=h.position;null==p.x&&(p.x=0),null==p.y&&(p.y=0)}if(c.isEdge()){for(var g=["source","target"],v=g.length,y=!1,b=0;b<v;b++){var x=g[b],w=d[x];tD(w)&&(w=d[x]=""+d[x]),null==w||""===w?(nC("Can not create edge `"+f+"` with unspecified "+x),y=!0):n.hasElementWithId(w)||(nC("Can not create edge `"+f+"` with nonexistant "+x+" `"+w+"`"),y=!0)}if(y){u();continue}var E=n.getElementById(d.source),T=n.getElementById(d.target);E.same(T)?E._private.edges.push(c):(E._private.edges.push(c),T._private.edges.push(c)),c._private.source=E,c._private.target=T}h.map=new nz,h.map.set(f,{ele:c,index:0}),h.removed=!1,t&&n.addToPool(c)}for(var C=0;C<i.length;C++){var S=i[C],k=S._private.data;tD(k.parent)&&(k.parent=""+k.parent);var P=k.parent;if(null!=P||S._private.parent){var B=S._private.parent?n.collection().merge(S._private.parent):n.getElementById(P);if(B.empty())k.parent=void 0;else if(B[0].removed())nk("Node added with missing parent, reference to parent removed"),k.parent=void 0,S._private.parent=null;else{for(var A=!1,D=B;!D.empty();){if(S.same(D)){A=!0,k.parent=void 0;break}D=D.parent()}A||(B[0]._private.children.push(S),S._private.parent=B[0],r.hasCompoundNodes=!0)}}}if(_.length>0){for(var _,R,M,O=_.length===this.length?this:new oI(n,_),I=0;I<O.length;I++){var N=O[I];N.isNode()||(N.parallelEdges().clearTraversalCache(),N.source().clearTraversalCache(),N.target().clearTraversalCache())}(r.hasCompoundNodes?n.collection().merge(O).merge(O.connectedNodes()).merge(O.parent()):O).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?O.emitAndNotify("add"):t&&O.emit("add")}return this},oN.removed=function(){var e=this[0];return e&&e._private.removed},oN.inside=function(){var e=this[0];return e&&!e._private.removed},oN.remove=function(){for(var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=[],r={},i=this._private.cy,a=0,o=this.length;a<o;a++)!function e(i){var a=r[i.id()];if(!(t&&i.removed())&&!a)if(r[i.id()]=!0,i.isNode()){n.push(i);for(var o=i._private.edges,s=0;s<o.length;s++)e(o[s]);for(var l=i._private.children,u=0;u<l.length;u++)e(l[u])}else n.unshift(i)}(this[a]);function s(e,t){nR(e._private.edges,t),e.clearTraversalCache()}var l=[];l.ids={},this.dirtyCompoundBoundsCache(),t&&i.removeFromPool(n);for(var u=0;u<n.length;u++){var c=n[u];if(c.isEdge()){var h=c.source()[0],d=c.target()[0];s(h,c),s(d,c);for(var f=c.parallelEdges(),p=0;p<f.length;p++){var g=f[p];g.clearTraversalCache(),g.isBundledBezier()&&g.dirtyBoundingBoxCache()}}else{var v=c.parent();0!==v.length&&function(e,t){t=t[0];var n=(e=e[0])._private.children,r=e.id();nR(n,t),t._private.parent=null,l.ids[r]||(l.ids[r]=!0,l.push(e))}(v,c)}t&&(c._private.removed=!0)}var y=i._private.elements;i._private.hasCompoundNodes=!1;for(var b=0;b<y.length;b++)if(y[b].isParent()){i._private.hasCompoundNodes=!0;break}var x=new oI(this.cy(),n);x.size()>0&&(e?x.emitAndNotify("remove"):t&&x.emit("remove"));for(var w=0;w<l.length;w++){var E=l[w];t&&E.removed()||E.updateStyle()}return x},oN.move=function(e){var t=this._private.cy,n=this,r=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var i=r(e.source),a=r(e.target),o=null!=i&&t.hasElementWithId(i),s=null!=a&&t.hasElementWithId(a);(o||s)&&(t.batch(function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var t=n[e],r=t._private.data;t.isEdge()&&(o&&(r.source=i),s&&(r.target=a))}n.restore(!1,!1)}),n.emitAndNotify("move"))}else if(void 0!==e.parent){var l=r(e.parent);if(null===l||t.hasElementWithId(l)){var u=null===l?void 0:l;t.batch(function(){var e=n.remove(!1,!1);e.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var r=n[t],i=r._private.data;r.isNode()&&(i.parent=u)}e.restore(!1,!1)}),n.emitAndNotify("move")}}return this},[iH,al,au,aB,aD,u3,aI,a8,od,of,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},og,oy,ow,oS,oB].forEach(function(e){t$(oN,e)});var oL=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}return function n(r,i,a){var o,s,l,u,c,h,d,f,p,g,v,y={x:-1,v:0,tension:null,friction:null},b=[0],x=0;for(r=parseFloat(r)||500,i=parseFloat(i)||20,a=a||null,y.tension=r,y.friction=i,g=(p=null!==a)?(x=n(r,i))/a*.016:.016;o=v||y,s=g,l={dx:o.v,dv:e(o)},u=t(o,.5*s,l),c=t(o,.5*s,u),h=t(o,s,c),d=1/6*(l.dx+2*(u.dx+c.dx)+h.dx),f=1/6*(l.dv+2*(u.dv+c.dv)+h.dv),o.x=o.x+d*s,o.v=o.v+f*s,v=o,b.push(1+v.x),x+=16,Math.abs(v.x)>1e-4&&Math.abs(v.v)>1e-4;);return p?function(e){return b[e*(b.length-1)|0]}:x}}(),oz=function(e,t,n,r){var i=function(e,t,n,r){var i="undefined"!=typeof Float32Array;if(4!=arguments.length)return!1;for(var a=0;a<4;++a)if("number"!=typeof arguments[a]||isNaN(arguments[a])||!isFinite(arguments[a]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var o=i?new Float32Array(11):Array(11);function s(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function l(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}var u=!1,c=function(i){return(u||(u=!0,(e!==t||n!==r)&&function(){for(var t=0;t<11;++t)o[t]=s(.1*t,e,n)}()),e===t&&n===r)?i:0===i?0:1===i?1:s(function(t){for(var r=0,i=1;10!==i&&o[i]<=t;++i)r+=.1;var a=r+(t-o[--i])/(o[i+1]-o[i])*.1,u=l(a,e,n);if(u>=.001){for(var c=a,h=0;h<4;++h){var d=l(c,e,n);if(0===d)break;var f=s(c,e,n)-t;c-=f/d}return c}return 0===u?a:function(t,r,i){var a,o,l=0;do(a=s(o=r+(i-r)/2,e,n)-t)>0?i=o:r=o;while(Math.abs(a)>1e-7&&++l<10)return o}(t,r,r+.1)}(i),t,r)};c.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var h="generateBezier("+[e,t,n,r]+")";return c.toString=function(){return h},c}(e,t,n,r);return function(e,t,n){return e+(t-e)*i(n)}},oF={linear:function(e,t,n){return e+(t-e)*n},ease:oz(.25,.1,.25,1),"ease-in":oz(.42,0,1,1),"ease-out":oz(0,0,.58,1),"ease-in-out":oz(.42,0,.58,1),"ease-in-sine":oz(.47,0,.745,.715),"ease-out-sine":oz(.39,.575,.565,1),"ease-in-out-sine":oz(.445,.05,.55,.95),"ease-in-quad":oz(.55,.085,.68,.53),"ease-out-quad":oz(.25,.46,.45,.94),"ease-in-out-quad":oz(.455,.03,.515,.955),"ease-in-cubic":oz(.55,.055,.675,.19),"ease-out-cubic":oz(.215,.61,.355,1),"ease-in-out-cubic":oz(.645,.045,.355,1),"ease-in-quart":oz(.895,.03,.685,.22),"ease-out-quart":oz(.165,.84,.44,1),"ease-in-out-quart":oz(.77,0,.175,1),"ease-in-quint":oz(.755,.05,.855,.06),"ease-out-quint":oz(.23,1,.32,1),"ease-in-out-quint":oz(.86,0,.07,1),"ease-in-expo":oz(.95,.05,.795,.035),"ease-out-expo":oz(.19,1,.22,1),"ease-in-out-expo":oz(1,0,0,1),"ease-in-circ":oz(.6,.04,.98,.335),"ease-out-circ":oz(.075,.82,.165,1),"ease-in-out-circ":oz(.785,.135,.15,.86),spring:function(e,t,n){if(0===n)return oF.linear;var r=oL(e,t,n);return function(e,t,n){return e+(t-e)*r(n)}},"cubic-bezier":oz};function oV(e,t,n,r,i){if(1===r||t===n)return n;var a=i(t,n,r);return null==e||((e.roundValue||e.color)&&(a=Math.round(a)),void 0!==e.min&&(a=Math.max(a,e.min)),void 0!==e.max&&(a=Math.min(a,e.max))),a}function oj(e,t){return null==e.pfValue&&null==e.value?e:null!=e.pfValue&&(null==t||"%"!==t.type.units)?e.pfValue:e.value}function oU(e,t,n,r,i){var a=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var o=oj(e,i),s=oj(t,i);if(tD(o)&&tD(s))return oV(a,o,s,n,r);if(tB(o)&&tB(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],h=s[u];if(null!=c&&null!=h){var d=oV(a,c,h,n,r);l.push(d)}else l.push(h)}return l}}function oq(e,t){return null!=e&&null!=t&&(!!(tD(e)&&tD(t))||!!e&&!!t)}function oX(e,t){var n=t._private.aniEles,r=[];function i(t,n){var i=t._private,a=i.animation.current,o=i.animation.queue,s=!1;if(0===a.length){var l=o.shift();l&&a.push(l)}for(var u=function(e){for(var t=e.length-1;t>=0;t--)(0,e[t])();e.splice(0,e.length)},c=a.length-1;c>=0;c--){var h=a[c],d=h._private;if(d.stopped){a.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.frames);continue}(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||function(e,t,n,r){var i=t._private;i.started=!0,i.startTime=n-i.progress*i.duration}(0,h,e),function(e,t,n,r){var i,a,o,s,l=!r,u=e._private,c=t._private,h=c.easing,d=c.startTime,f=(r?e:e.cy()).style();c.easingImpl||(null==h?c.easingImpl=oF.linear:(i=tk(h)?f.parse("transition-timing-function",h).value:h,tk(i)?(a=i,o=[]):(a=i[1],o=i.slice(2).map(function(e){return+e})),o.length>0?("spring"===a&&o.push(c.duration),c.easingImpl=oF[a].apply(null,o)):c.easingImpl=oF[a]));var p=c.easingImpl;if(s=0===c.duration?1:(n-d)/c.duration,c.applying&&(s=c.progress),s<0?s=0:s>1&&(s=1),null==c.delay){var g=c.startPosition,v=c.position;if(v&&l&&!e.locked()){var y={};oq(g.x,v.x)&&(y.x=oU(g.x,v.x,s,p)),oq(g.y,v.y)&&(y.y=oU(g.y,v.y,s,p)),e.position(y)}var b=c.startPan,x=c.pan,w=u.pan,E=null!=x&&r;E&&(oq(b.x,x.x)&&(w.x=oU(b.x,x.x,s,p)),oq(b.y,x.y)&&(w.y=oU(b.y,x.y,s,p)),e.emit("pan"));var T=c.startZoom,C=c.zoom,S=null!=C&&r;S&&(oq(T,C)&&(u.zoom=ro(u.minZoom,oU(T,C,s,p),u.maxZoom)),e.emit("zoom")),(E||S)&&e.emit("viewport");var k=c.style;if(k&&k.length>0&&l){for(var P=0;P<k.length;P++){var B=k[P],A=B.name,D=c.startStyle[A],_=f.properties[D.name],R=oU(D,B,s,p,_);f.overrideBypass(e,A,R)}e.emit("style")}}c.progress=s}(t,h,e,n),d.applying&&(d.applying=!1),u(d.frames),null!=d.step&&d.step(e),h.completed()&&(a.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.completes)),s=!0)}return n||0!==a.length||0!==o.length||r.push(t),s}for(var a=!1,o=0;o<n.length;o++){var s=i(n[o]);a=a||s}var l=i(t,!0);(a||l)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(r),t.emit("step")}var oY={animate:as.animate(),animation:as.animation(),animated:as.animated(),clearQueue:as.clearQueue(),delay:as.delay(),delayAnimation:as.delayAnimation(),stop:as.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender(function(t,n){oX(n,e)},t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&no(function(n){oX(n,e),t()})}()}}},oW={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&tM(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e}},oH=function(e){return tk(e)?new ak(e):e},oG={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new oa(oW,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,oH(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,oH(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,oH(t),n),this},once:function(e,t,n){return this.emitter().one(e,oH(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};as.eventAliasesOn(oG);var oK={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};oK.jpeg=oK.jpg;var oZ={layout:function(e){if(null==e)return void nC("Layout options must be specified to make a layout");if(null==e.name)return void nC("A `name` must be specified to make a layout");var t,n=e.name,r=this.extension("layout",n);return null==r?void nC("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?"):(t=tk(e.eles)?this.$(e.eles):null!=e.eles?e.eles:this.$(),new r(t$({},e,{cy:this,eles:t})))}};oZ.createLayout=oZ.makeLayout=oZ.layout;var o$=n_({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),oQ={renderTo:function(e,t,n,r){return this._private.renderer.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this.extension("renderer",e.name);if(null==t)return void nC("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));void 0!==e.wheelSensitivity&&nk("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=o$(e);n.cy=this,this._private.renderer=new t(n),this.notify("init")},destroyRenderer:function(){this.notify("destroy");var e=this.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};oQ.invalidateDimensions=oQ.resize;var oJ={collection:function(e,t){return tk(e)?this.$(e):tR(e)?e.collection():tB(e)?(t||(t={}),new oI(this,e,t.unique,t.removed)):new oI(this)},nodes:function(e){var t=this.$(function(e){return e.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(e){return e.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};oJ.elements=oJ.filter=oJ.$;var o0={};o0.apply=function(e){for(var t=this._private.cy.collection(),n=0;n<e.length;n++){var r=e[n],i=this.getContextMeta(r);if(!i.empty){var a=this.getContextStyle(i),o=this.applyContextStyle(i,a,r);r._private.appliedInitStyle?this.updateTransitions(r,o.diffProps):r._private.appliedInitStyle=!0,this.updateStyleHints(r)&&t.push(r)}}return t},o0.getPropertiesDiff=function(e,t){var n=this._private.propDiffs=this._private.propDiffs||{},r=e+"-"+t,i=n[r];if(i)return i;for(var a=[],o={},s=0;s<this.length;s++){var l=this[s],u="t"===e[s],c="t"===t[s],h=u!==c,d=l.mappedProperties.length>0;if(h||c&&d){var f=void 0;h&&d||h?f=l.properties:d&&(f=l.mappedProperties);for(var p=0;p<f.length;p++){for(var g=f[p],v=g.name,y=!1,b=s+1;b<this.length;b++){var x=this[b];if("t"===t[b]&&(y=null!=x.properties[g.name]))break}o[v]||y||(o[v]=!0,a.push(v))}}}return n[r]=a,a},o0.getContextMeta=function(e){for(var t,n="",r=e._private.styleCxtKey||"",i=0;i<this.length;i++){var a=this[i];a.selector&&a.selector.matches(e)?n+="t":n+="f"}return t=this.getPropertiesDiff(r,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},o0.getContextStyle=function(e){var t=e.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var r={_private:{key:t}},i=0;i<this.length;i++){var a=this[i];if("t"===t[i])for(var o=0;o<a.properties.length;o++){var s=a.properties[o];r[s.name]=s}}return n[t]=r,r},o0.applyContextStyle=function(e,t,n){for(var r=e.diffPropNames,i={},a=this.types,o=0;o<r.length;o++){var s=r[o],l=t[s],u=n.pstyle(s);if(!l)if(!u)continue;else l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0};if(u!==l){if(l.mapped===a.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(n))===c.prevFnValue)continue}var h=i[s]={prev:u};this.applyParsedProperty(n,l),h.next=n.pstyle(s),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},o0.updateStyleHints=function(e){var t=e._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,a=function(e,t,r){return n.getPropertiesHash(e,t,r)},o=t.styleKey;if(e.removed())return!1;var s="nodes"===t.group,l=e._private.style;r=Object.keys(l);for(var u=0;u<i.length;u++){var c=i[u];t.styleKeys[c]=[9261,5381]}for(var h=function(e,n){return t.styleKeys[n][0]=nl(e,t.styleKeys[n][0])},d=function(e,n){return t.styleKeys[n][1]=nu(e,t.styleKeys[n][1])},f=function(e,t){for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);h(r,t),d(r,t)}},p=0;p<r.length;p++){var g=r[p],v=l[g];if(null!=v){var y,b,x=this.properties[g],w=x.type,E=x.groupKey,T=void 0;null!=x.hashOverride?T=x.hashOverride(e,v):null!=v.pfValue&&(T=v.pfValue);var C=null==x.enums?v.value:null,S=null!=T,k=null!=C,P=S||k,B=v.units;w.number&&P&&!w.multiple?(h(b=-128<(y=S?T:C)&&y<128&&Math.floor(y)!==y?2e9-(1024*y|0):y,E),d(b,E),S||null==B||f(B,E)):f(v.strValue,E)}}for(var A=[9261,5381],D=0;D<i.length;D++){var _=i[D],R=t.styleKeys[_];A[0]=nl(R[0],A[0]),A[1]=nu(R[1],A[1])}t.styleKey=2097152*A[0]+A[1];var M=t.styleKeys;t.labelDimsKey=nc(M.labelDimensions);var O=a(e,["label"],M.labelDimensions);if(t.labelKey=nc(O),t.labelStyleKey=nc(nh(M.commonLabel,O)),!s){var I=a(e,["source-label"],M.labelDimensions);t.sourceLabelKey=nc(I),t.sourceLabelStyleKey=nc(nh(M.commonLabel,I));var N=a(e,["target-label"],M.labelDimensions);t.targetLabelKey=nc(N),t.targetLabelStyleKey=nc(nh(M.commonLabel,N))}if(s){var L=t.styleKeys,z=L.nodeBody,F=L.nodeBorder,V=L.nodeOutline,j=L.backgroundImage,U=L.compound,q=L.pie,X=L.stripe;t.nodeKey=nc([z,F,V,j,U,q,X].filter(function(e){return null!=e}).reduce(nh,[9261,5381])),t.hasPie=null!=q&&9261!==q[0]&&5381!==q[1],t.hasStripe=null!=X&&9261!==X[0]&&5381!==X[1]}return o!==t.styleKey},o0.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null},o0.applyParsedProperty=function(e,t){var n=this,r=t,i=e._private.style,a=n.types,o=n.properties[r.name].type,s=r.bypass,l=i[r.name],u=l&&l.bypass,c=e._private,h="mapping",d=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},f=function(){var t=d(l),i=d(r);n.checkTriggers(e,r.name,t,i)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(r=t=this.parse(t.name,"bezier",s)),r.delete)return i[r.name]=void 0,f(),!0;if(r.deleteBypassed)if(!l)return f(),!0;else if(l.bypass)return l.bypassed=void 0,f(),!0;else return!1;if(r.deleteBypass)if(!l)return f(),!0;else if(l.bypass)return i[r.name]=l.bypassed,f(),!0;else return!1;var p=function(){nk("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+r.name+"` with data field `"+r.field+"`); try a `["+r.field+"]` selector to limit scope to elements with `"+r.field+"` defined")};switch(r.mapped){case a.mapData:for(var g,v,y=r.field.split("."),b=c.data,x=0;x<y.length&&b;x++)b=b[y[x]];if(null==b)return p(),!1;if(!tD(b))return nk("Do not use continuous mappers without specifying numeric data (i.e. `"+r.field+": "+b+"` for `"+e.id()+"` is non-numeric)"),!1;var w=r.fieldMax-r.fieldMin;if((v=0===w?0:(b-r.fieldMin)/w)<0?v=0:v>1&&(v=1),o.color){var E=r.valueMin[0],T=r.valueMax[0],C=r.valueMin[1],S=r.valueMax[1],k=r.valueMin[2],P=r.valueMax[2],B=null==r.valueMin[3]?1:r.valueMin[3],A=[Math.round(E+(T-E)*v),Math.round(C+(S-C)*v),Math.round(k+(P-k)*v),Math.round(B+((null==r.valueMax[3]?1:r.valueMax[3])-B)*v)];g={bypass:r.bypass,name:r.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else{if(!o.number)return!1;var D=r.valueMin+(r.valueMax-r.valueMin)*v;g=this.parse(r.name,D,r.bypass,h)}if(!g)return p(),!1;g.mapping=r,r=g;break;case a.data:for(var _=r.field.split("."),R=c.data,M=0;M<_.length&&R;M++)R=R[_[M]];if(null!=R&&(g=this.parse(r.name,R,r.bypass,h)),!g)return p(),!1;g.mapping=r,r=g;break;case a.fn:var O=r.value,I=null!=r.fnValue?r.fnValue:O(e);if(r.prevFnValue=I,null==I)return nk("Custom function mappers may not return null (i.e. `"+r.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(g=this.parse(r.name,I,r.bypass,h)))return nk("Custom function mappers may not return invalid values for the property type (i.e. `"+r.name+"` for ele `"+e.id()+"` is invalid)"),!1;g.mapping=nP(r),r=g;break;case void 0:break;default:return!1}return s?(u?r.bypassed=l.bypassed:r.bypassed=l,i[r.name]=r):u?l.bypassed=r:i[r.name]=r,f(),!0},o0.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),t)for(var i=r._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else r._private.style={}}},o0.update=function(){this._private.cy.mutableElements().updateStyle()},o0.updateTransitions=function(e,t){var n=this,r=e._private,i=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,o=e.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],h=e.pstyle(c),d=t[c];if(d){var f=d.prev,p=null!=d.next?d.next:h,g=!1,v=void 0;f&&(tD(f.pfValue)&&tD(p.pfValue)?(g=p.pfValue-f.pfValue,v=f.pfValue+1e-6*g):tD(f.value)&&tD(p.value)?(g=p.value-f.value,v=f.value+1e-6*g):tB(f.value)&&tB(p.value)&&(g=f.value[0]!==p.value[0]||f.value[1]!==p.value[1]||f.value[2]!==p.value[2],v=f.strValue),g&&(s[c]=p.strValue,this.applyBypass(e,c,v),l=!0))}}if(!l)return;r.transitioning=!0,new i0(function(t){o>0?e.delayAnimation(o).play().promise().then(t):t()}).then(function(){return e.animation({style:s,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1)},o0.checkTrigger=function(e,t,n,r,i,a){var o=this.properties[t],s=i(o);!e.removed()&&null!=s&&s(n,r,e)&&a(o)},o0.checkZOrderTrigger=function(e,t,n,r){var i=this;this.checkTrigger(e,t,n,r,function(e){return e.triggersZOrder},function(){i._private.cy.notify("zorder",e)})},o0.checkBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(e){return e.triggersBounds},function(t){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})},o0.checkConnectedEdgesBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(e){return e.triggersBoundsOfConnectedEdges},function(t){e.connectedEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})},o0.checkParallelEdgesBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(e){return e.triggersBoundsOfParallelEdges},function(t){e.parallelEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})},o0.checkTriggers=function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r),this.checkConnectedEdgesBoundsTrigger(e,t,n,r),this.checkParallelEdgesBoundsTrigger(e,t,n,r)};var o1={};o1.applyBypass=function(e,t,n,r){var i=[];if("*"===t||"**"===t){if(void 0!==n)for(var a=0;a<this.properties.length;a++){var o=this.properties[a].name,s=this.parse(o,n,!0);s&&i.push(s)}}else if(tk(t)){var l=this.parse(t,n,!0);l&&i.push(l)}else{if(!tA(t))return!1;r=n;for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c],d=t[h];if(void 0===d&&(d=t[tj(h)]),void 0!==d){var f=this.parse(h,d,!0);f&&i.push(f)}}}if(0===i.length)return!1;for(var p=!1,g=0;g<e.length;g++){for(var v=e[g],y={},b=void 0,x=0;x<i.length;x++){var w=i[x];if(r){var E=v.pstyle(w.name);b=y[w.name]={prev:E}}p=this.applyParsedProperty(v,nP(w))||p,r&&(b.next=v.pstyle(w.name))}p&&this.updateStyleHints(v),r&&this.updateTransitions(v,y,!0)}return p},o1.overrideBypass=function(e,t,n){t=tV(t);for(var r=0;r<e.length;r++){var i=e[r],a=i._private.style[t],o=this.properties[t].type,s=o.color,l=o.mutiple,u=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=n,null!=a.pfValue&&(a.pfValue=n),s?a.strValue="rgb("+n.join(",")+")":l?a.strValue=n.join(" "):a.strValue=""+n,this.updateStyleHints(i)):this.applyBypass(i,t,n),this.checkTriggers(i,t,u,n)}},o1.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)},o1.removeBypasses=function(e,t,n){for(var r=0;r<e.length;r++){for(var i=e[r],a={},o=0;o<t.length;o++){var s=t[o],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),h=a[l.name]={prev:u};this.applyParsedProperty(i,c),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,a,!0)}};var o2={};o2.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},o2.containerCss=function(e){var t=this._private.cy,n=t.container(),r=t.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(e)};var o5={};o5.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},o5.getRawStyle=function(e,t){if(e=e[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],a=this.getStylePropertyValue(e,i.name,t);null!=a&&(n[i.name]=a,n[tj(i.name)]=a)}return n}},o5.getIndexedStyle=function(e,t,n,r){var i=e.pstyle(t)[n][r];return null!=i?i:e.cy().style().getDefaultProperty(t)[n][0]},o5.getStylePropertyValue=function(e,t,n){if(e=e[0]){var r=this.properties[t];r.alias&&(r=r.pointsTo);var i=r.type,a=e.pstyle(r.name);if(a){var o=a.value,s=a.units,l=a.strValue;if(n&&i.number&&null!=o&&tD(o)){var u=e.cy().zoom(),c=function(e){return e*u},h=function(e,t){return c(e)+t},d=tB(o);if(d?s.every(function(e){return null!=e}):null!=s)if(d)return o.map(function(e,t){return h(e,s[t])}).join(" ");else return h(o,s);return d?o.map(function(e){return tk(e)?e:""+c(e)}).join(" "):""+c(o)}if(null!=l)return l}return null}},o5.getAnimationStartStyle=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r].name,a=e.pstyle(i);void 0!==a&&(a=tA(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(n[i]=a)}return n},o5.getPropsList=function(e){var t=[],n=this.properties;if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a],s=n[a]||n[tV(a)],l=this.parse(s.name,o);l&&t.push(l)}return t},o5.getNonDefaultPropertiesHash=function(e,t,n){var r,i,a,o,s,l,u=n.slice();for(s=0;s<t.length;s++)if(r=t[s],null!=(i=e.pstyle(r,!1)))if(null!=i.pfValue)u[0]=nl(o,u[0]),u[1]=nu(o,u[1]);else for(l=0,a=i.strValue;l<a.length;l++)o=a.charCodeAt(l),u[0]=nl(o,u[0]),u[1]=nu(o,u[1]);return u},o5.getPropertiesHash=o5.getNonDefaultPropertiesHash;var o3={};o3.appendFromJson=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.selector,i=n.style||n.css,a=Object.keys(i);this.selector(r);for(var o=0;o<a.length;o++){var s=a[o],l=i[s];this.css(s,l)}}return this},o3.fromJson=function(e){return this.resetToDefault(),this.appendFromJson(e),this},o3.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:a})}return e};var o4={};o4.appendFromString=function(e){var t,n,r,i=""+e;function a(){i=i.length>t.length?i.substr(t.length):""}function o(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");!i.match(/^\s*$/);){var s=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){nk("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}t=s[0];var l=s[1];if("core"!==l&&new ak(l).invalid){nk("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),a();continue}var u=s[2],c=!1;n=u;for(var h=[];!n.match(/^\s*$/);){var d=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!d){nk("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),c=!0;break}r=d[0];var f=d[1],p=d[2];if(!this.properties[f]){nk("Skipping property: Invalid property name in: "+r),o();continue}if(!this.parse(f,p)){nk("Skipping property: Invalid property definition in: "+r),o();continue}h.push({name:f,val:p}),o()}if(c){a();break}this.selector(l);for(var g=0;g<h.length;g++){var v=h[g];this.css(v.name,v.val)}a()}return this},o4.fromString=function(e){return this.resetToDefault(),this.appendFromString(e),this};var o6={};!function(){var e=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},t=function(e){var t=tY+"|\\w+|"+tH+"|"+tK+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+tY+")\\s*\\,\\s*("+tY+")\\s*,\\s*("+t+")\\s*\\,\\s*("+t+")\\)$"},n=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];o6.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:t("mapData")},mapLayoutData:{mapping:!0,regex:t("mapLayoutData")},mapScratch:{mapping:!0,regex:t("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:n,singleRegexMatchValue:!0},urls:{regexes:n,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return tk(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+tY+")\\s*,\\s*("+tY+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+tY+")\\s*,\\s*("+tY+")\\s*,\\s*("+tY+")\\s*,\\s*("+tY+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var r=function(e,t){return(null==e||null==t)&&e!==t||0==e&&0!=t||0!=e&&0==t},i=function(e,t){return e!=t},a=o6.types,o=[{name:"label",type:a.text,triggersBounds:i,triggersZOrder:function(e,t){var n=tL(e),r=tL(t);return n&&!r||!n&&r}},{name:"text-rotation",type:a.textRotation,triggersBounds:i},{name:"text-margin-x",type:a.bidirectionalSize,triggersBounds:i},{name:"text-margin-y",type:a.bidirectionalSize,triggersBounds:i}],s=[{name:"source-label",type:a.text,triggersBounds:i},{name:"source-text-rotation",type:a.textRotation,triggersBounds:i},{name:"source-text-margin-x",type:a.bidirectionalSize,triggersBounds:i},{name:"source-text-margin-y",type:a.bidirectionalSize,triggersBounds:i},{name:"source-text-offset",type:a.size,triggersBounds:i}],l=[{name:"target-label",type:a.text,triggersBounds:i},{name:"target-text-rotation",type:a.textRotation,triggersBounds:i},{name:"target-text-margin-x",type:a.bidirectionalSize,triggersBounds:i},{name:"target-text-margin-y",type:a.bidirectionalSize,triggersBounds:i},{name:"target-text-offset",type:a.size,triggersBounds:i}],u=[{name:"font-family",type:a.fontFamily,triggersBounds:i},{name:"font-style",type:a.fontStyle,triggersBounds:i},{name:"font-weight",type:a.fontWeight,triggersBounds:i},{name:"font-size",type:a.size,triggersBounds:i},{name:"text-transform",type:a.textTransform,triggersBounds:i},{name:"text-wrap",type:a.textWrap,triggersBounds:i},{name:"text-overflow-wrap",type:a.textOverflowWrap,triggersBounds:i},{name:"text-max-width",type:a.size,triggersBounds:i},{name:"text-outline-width",type:a.size,triggersBounds:i},{name:"line-height",type:a.positiveNumber,triggersBounds:i}],c=[{name:"text-valign",type:a.valign,triggersBounds:i},{name:"text-halign",type:a.halign,triggersBounds:i},{name:"color",type:a.color},{name:"text-outline-color",type:a.color},{name:"text-outline-opacity",type:a.zeroOneNumber},{name:"text-background-color",type:a.color},{name:"text-background-opacity",type:a.zeroOneNumber},{name:"text-background-padding",type:a.size,triggersBounds:i},{name:"text-border-opacity",type:a.zeroOneNumber},{name:"text-border-color",type:a.color},{name:"text-border-width",type:a.size,triggersBounds:i},{name:"text-border-style",type:a.borderStyle,triggersBounds:i},{name:"text-background-shape",type:a.textBackgroundShape,triggersBounds:i},{name:"text-justification",type:a.justification},{name:"box-select-labels",type:a.bool,triggersBounds:i}],h=[{name:"events",type:a.bool,triggersZOrder:i},{name:"text-events",type:a.bool,triggersZOrder:i},{name:"box-selection",type:a.boxSelection,triggersZOrder:i}],d=[{name:"display",type:a.display,triggersZOrder:i,triggersBounds:i,triggersBoundsOfConnectedEdges:i,triggersBoundsOfParallelEdges:function(e,t,n){return e!==t&&"bezier"===n.pstyle("curve-style").value}},{name:"visibility",type:a.visibility,triggersZOrder:i},{name:"opacity",type:a.zeroOneNumber,triggersZOrder:r},{name:"text-opacity",type:a.zeroOneNumber},{name:"min-zoomed-font-size",type:a.size},{name:"z-compound-depth",type:a.zCompoundDepth,triggersZOrder:i},{name:"z-index-compare",type:a.zIndexCompare,triggersZOrder:i},{name:"z-index",type:a.number,triggersZOrder:i}],f=[{name:"overlay-padding",type:a.size,triggersBounds:i},{name:"overlay-color",type:a.color},{name:"overlay-opacity",type:a.zeroOneNumber,triggersBounds:r},{name:"overlay-shape",type:a.overlayShape,triggersBounds:i},{name:"overlay-corner-radius",type:a.cornerRadius}],p=[{name:"underlay-padding",type:a.size,triggersBounds:i},{name:"underlay-color",type:a.color},{name:"underlay-opacity",type:a.zeroOneNumber,triggersBounds:r},{name:"underlay-shape",type:a.overlayShape,triggersBounds:i},{name:"underlay-corner-radius",type:a.cornerRadius}],g=[{name:"transition-property",type:a.propList},{name:"transition-duration",type:a.time},{name:"transition-delay",type:a.time},{name:"transition-timing-function",type:a.easing}],v=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},y=[{name:"height",type:a.nodeSize,triggersBounds:i,hashOverride:v},{name:"width",type:a.nodeSize,triggersBounds:i,hashOverride:v},{name:"shape",type:a.nodeShape,triggersBounds:i},{name:"shape-polygon-points",type:a.polygonPointList,triggersBounds:i},{name:"corner-radius",type:a.cornerRadius},{name:"background-color",type:a.color},{name:"background-fill",type:a.fill},{name:"background-opacity",type:a.zeroOneNumber},{name:"background-blacken",type:a.nOneOneNumber},{name:"background-gradient-stop-colors",type:a.colors},{name:"background-gradient-stop-positions",type:a.percentages},{name:"background-gradient-direction",type:a.gradientDirection},{name:"padding",type:a.sizeMaybePercent,triggersBounds:i},{name:"padding-relative-to",type:a.paddingRelativeTo,triggersBounds:i},{name:"bounds-expansion",type:a.boundsExpansion,triggersBounds:i}],b=[{name:"border-color",type:a.color},{name:"border-opacity",type:a.zeroOneNumber},{name:"border-width",type:a.size,triggersBounds:i},{name:"border-style",type:a.borderStyle},{name:"border-cap",type:a.lineCap},{name:"border-join",type:a.lineJoin},{name:"border-dash-pattern",type:a.numbers},{name:"border-dash-offset",type:a.number},{name:"border-position",type:a.linePosition}],x=[{name:"outline-color",type:a.color},{name:"outline-opacity",type:a.zeroOneNumber},{name:"outline-width",type:a.size,triggersBounds:i},{name:"outline-style",type:a.borderStyle},{name:"outline-offset",type:a.size,triggersBounds:i}],w=[{name:"background-image",type:a.urls},{name:"background-image-crossorigin",type:a.bgCrossOrigin},{name:"background-image-opacity",type:a.zeroOneNumbers},{name:"background-image-containment",type:a.bgContainment},{name:"background-image-smoothing",type:a.bools},{name:"background-position-x",type:a.bgPos},{name:"background-position-y",type:a.bgPos},{name:"background-width-relative-to",type:a.bgRelativeTo},{name:"background-height-relative-to",type:a.bgRelativeTo},{name:"background-repeat",type:a.bgRepeat},{name:"background-fit",type:a.bgFit},{name:"background-clip",type:a.bgClip},{name:"background-width",type:a.bgWH},{name:"background-height",type:a.bgWH},{name:"background-offset-x",type:a.bgPos},{name:"background-offset-y",type:a.bgPos}],E=[{name:"position",type:a.position,triggersBounds:i},{name:"compound-sizing-wrt-labels",type:a.compoundIncludeLabels,triggersBounds:i},{name:"min-width",type:a.size,triggersBounds:i},{name:"min-width-bias-left",type:a.sizeMaybePercent,triggersBounds:i},{name:"min-width-bias-right",type:a.sizeMaybePercent,triggersBounds:i},{name:"min-height",type:a.size,triggersBounds:i},{name:"min-height-bias-top",type:a.sizeMaybePercent,triggersBounds:i},{name:"min-height-bias-bottom",type:a.sizeMaybePercent,triggersBounds:i}],T=[{name:"line-style",type:a.lineStyle},{name:"line-color",type:a.color},{name:"line-fill",type:a.fill},{name:"line-cap",type:a.lineCap},{name:"line-opacity",type:a.zeroOneNumber},{name:"line-dash-pattern",type:a.numbers},{name:"line-dash-offset",type:a.number},{name:"line-outline-width",type:a.size},{name:"line-outline-color",type:a.color},{name:"line-gradient-stop-colors",type:a.colors},{name:"line-gradient-stop-positions",type:a.percentages},{name:"curve-style",type:a.curveStyle,triggersBounds:i,triggersBoundsOfParallelEdges:function(e,t){return e!==t&&("bezier"===e||"bezier"===t)}},{name:"haystack-radius",type:a.zeroOneNumber,triggersBounds:i},{name:"source-endpoint",type:a.edgeEndpoint,triggersBounds:i},{name:"target-endpoint",type:a.edgeEndpoint,triggersBounds:i},{name:"control-point-step-size",type:a.size,triggersBounds:i},{name:"control-point-distances",type:a.bidirectionalSizes,triggersBounds:i},{name:"control-point-weights",type:a.numbers,triggersBounds:i},{name:"segment-distances",type:a.bidirectionalSizes,triggersBounds:i},{name:"segment-weights",type:a.numbers,triggersBounds:i},{name:"segment-radii",type:a.numbers,triggersBounds:i},{name:"radius-type",type:a.radiusType,triggersBounds:i},{name:"taxi-turn",type:a.bidirectionalSizeMaybePercent,triggersBounds:i},{name:"taxi-turn-min-distance",type:a.size,triggersBounds:i},{name:"taxi-direction",type:a.axisDirection,triggersBounds:i},{name:"taxi-radius",type:a.number,triggersBounds:i},{name:"edge-distances",type:a.edgeDistances,triggersBounds:i},{name:"arrow-scale",type:a.positiveNumber,triggersBounds:i},{name:"loop-direction",type:a.angle,triggersBounds:i},{name:"loop-sweep",type:a.angle,triggersBounds:i},{name:"source-distance-from-node",type:a.size,triggersBounds:i},{name:"target-distance-from-node",type:a.size,triggersBounds:i}],C=[{name:"ghost",type:a.bool,triggersBounds:i},{name:"ghost-offset-x",type:a.bidirectionalSize,triggersBounds:i},{name:"ghost-offset-y",type:a.bidirectionalSize,triggersBounds:i},{name:"ghost-opacity",type:a.zeroOneNumber}],S=[{name:"selection-box-color",type:a.color},{name:"selection-box-opacity",type:a.zeroOneNumber},{name:"selection-box-border-color",type:a.color},{name:"selection-box-border-width",type:a.size},{name:"active-bg-color",type:a.color},{name:"active-bg-opacity",type:a.zeroOneNumber},{name:"active-bg-size",type:a.size},{name:"outside-texture-bg-color",type:a.color},{name:"outside-texture-bg-opacity",type:a.zeroOneNumber}],k=[];o6.pieBackgroundN=16,k.push({name:"pie-size",type:a.sizeMaybePercent}),k.push({name:"pie-hole",type:a.sizeMaybePercent}),k.push({name:"pie-start-angle",type:a.angle});for(var P=1;P<=o6.pieBackgroundN;P++)k.push({name:"pie-"+P+"-background-color",type:a.color}),k.push({name:"pie-"+P+"-background-size",type:a.percent}),k.push({name:"pie-"+P+"-background-opacity",type:a.zeroOneNumber});var B=[];o6.stripeBackgroundN=16,B.push({name:"stripe-size",type:a.sizeMaybePercent}),B.push({name:"stripe-direction",type:a.axisDirectionPrimary});for(var A=1;A<=o6.stripeBackgroundN;A++)B.push({name:"stripe-"+A+"-background-color",type:a.color}),B.push({name:"stripe-"+A+"-background-size",type:a.percent}),B.push({name:"stripe-"+A+"-background-opacity",type:a.zeroOneNumber});var D=[],_=o6.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:a.arrowShape,triggersBounds:i},{name:"arrow-color",type:a.color},{name:"arrow-fill",type:a.arrowFill},{name:"arrow-width",type:a.arrowWidth}].forEach(function(e){_.forEach(function(t){var n=t+"-"+e.name,r=e.type,i=e.triggersBounds;D.push({name:n,type:r,triggersBounds:i})})},{});var R=o6.properties=[].concat(h,g,d,f,p,C,c,u,o,s,l,y,b,x,w,k,B,E,T,D,S),M=o6.propertyGroups={behavior:h,transition:g,visibility:d,overlay:f,underlay:p,ghost:C,commonLabel:c,labelDimensions:u,mainLabel:o,sourceLabel:s,targetLabel:l,nodeBody:y,nodeBorder:b,nodeOutline:x,backgroundImage:w,pie:k,stripe:B,compound:E,edgeLine:T,edgeArrow:D,core:S},O=o6.propertyGroupNames={};(o6.propertyGroupKeys=Object.keys(M)).forEach(function(e){O[e]=M[e].map(function(e){return e.name}),M[e].forEach(function(t){return t.groupKey=e})});var I=o6.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];o6.propertyNames=R.map(function(e){return e.name});for(var N=0;N<R.length;N++){var L=R[N];R[L.name]=L}for(var z=0;z<I.length;z++){var F=I[z],V=R[F.pointsTo],j={name:F.name,alias:!0,pointsTo:V};R.push(j),R[F.name]=j}}(),o6.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},o6.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=t$({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=o6.pieBackgroundN;n++){var r=t.name.replace("{{i}}",n),i=t.value;e[r]=i}return e},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=o6.stripeBackgroundN;n++){var r=t.name.replace("{{i}}",n),i=t.value;e[r]=i}return e},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(e,t){return o6.arrowPrefixes.forEach(function(n){var r=n+"-"+t.name,i=t.value;e[r]=i}),e},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var a=i.name,o=t[a],s=this.parse(a,o);n[a]=s}}return e.defaultProperties=n,e.defaultProperties},o6.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var o8={};o8.parse=function(e,t,n,r){if(tP(t))return this.parseImplWarn(e,t,n,r);var i,a=np(e,""+t,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),o=this.propCache=this.propCache||[];return(i=o[a])||(i=o[a]=this.parseImplWarn(e,t,n,r)),(n||"mapping"===r)&&(i=nP(i))&&(i.value=nP(i.value)),i},o8.parseImplWarn=function(e,t,n,r){var i=this.parseImpl(e,t,n,r);return i||null==t||nk("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&("width"===i.name||"height"===i.name)&&"label"===t&&nk("The style value of `label` is deprecated for `"+i.name+"`"),i},o8.parseImpl=function(e,t,n,r){e=tV(e);var i=this.properties[e],a=t,o=this.types;if(!i||void 0===t)return null;i.alias&&(e=(i=i.pointsTo).name);var s=tk(t);s&&(t=t.trim());var l=i.type;if(!l)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(tP(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:n};if(!s||r||t.length<7||"a"!==t[1]);else if(t.length>=7&&"d"===t[0]&&(g=new RegExp(o.data.regex).exec(t))){if(n)return!1;var u=o.data;return{name:e,value:g,strValue:""+t,mapped:u,field:g[1],bypass:n}}else if(t.length>=10&&"m"===t[0]&&(v=new RegExp(o.mapData.regex).exec(t))){if(n||l.multiple)return!1;var c=o.mapData;if(!(l.color||l.number))return!1;var h=this.parse(e,v[4]);if(!h||h.mapped)return!1;var d=this.parse(e,v[5]);if(!d||d.mapped)return!1;if(h.pfValue===d.pfValue||h.strValue===d.strValue)return nk("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+h.strValue+"`"),this.parse(e,h.strValue);if(l.color){var f=h.value,p=d.value;if(f[0]===p[0]&&f[1]===p[1]&&f[2]===p[2]&&(f[3]===p[3]||(null==f[3]||1===f[3])&&(null==p[3]||1===p[3])))return!1}return{name:e,value:v,strValue:""+t,mapped:c,field:v[1],fieldMin:parseFloat(v[2]),fieldMax:parseFloat(v[3]),valueMin:h.value,valueMax:d.value,bypass:n}}if(l.multiple&&"multiple"!==r){if(y=s?t.split(/\s+/):tB(t)?t:[t],l.evenMultiple&&y.length%2!=0)return null;for(var g,v,y,b=[],x=[],w=[],E="",T=!1,C=0;C<y.length;C++){var S=this.parse(e,y[C],n,"multiple");T=T||tk(S.value),b.push(S.value),w.push(null!=S.pfValue?S.pfValue:S.value),x.push(S.units),E+=(C>0?" ":"")+S.strValue}if(l.validate&&!l.validate(b,x))return null;if(l.singleEnum&&T)if(1===b.length&&tk(b[0]))return{name:e,value:b[0],strValue:b[0],bypass:n};else return null;return{name:e,value:b,pfValue:w,strValue:E,bypass:n,units:x}}var k=function(){for(var r=0;r<l.enums.length;r++)if(l.enums[r]===t)return{name:e,value:t,strValue:""+t,bypass:n};return null};if(l.number){var P,B,A="px";if(l.units&&(B=l.units),l.implicitUnits&&(A=l.implicitUnits),!l.unitless)if(s){var D="px|em"+(l.allowPercent?"|\\%":"");B&&(D=B);var _=t.match("^("+tY+")("+D+")?$");_&&(t=_[1],B=_[2]||A)}else(!B||l.implicitUnits)&&(B=A);if(isNaN(t=parseFloat(t))&&void 0===l.enums)return null;if(isNaN(t)&&void 0!==l.enums)return t=a,k();if(l.integer&&!(tD(P=t)&&Math.floor(P)===P)||void 0!==l.min&&(t<l.min||l.strictMin&&t===l.min)||void 0!==l.max&&(t>l.max||l.strictMax&&t===l.max))return null;var R={name:e,value:t,strValue:""+t+(B||""),units:B,bypass:n};return l.unitless||"px"!==B&&"em"!==B?R.pfValue=t:R.pfValue="px"!==B&&B?this.getEmSizeInPixels()*t:t,("ms"===B||"s"===B)&&(R.pfValue="ms"===B?t:1e3*t),("deg"===B||"rad"===B)&&(R.pfValue="rad"===B?t:Math.PI*t/180),"%"===B&&(R.pfValue=t/100),R}if(l.propList){var M=[],O=""+t;if("none"===O);else{for(var I=O.split(/\s*,\s*|\s+/),N=0;N<I.length;N++){var L=I[N].trim();this.properties[L]?M.push(L):nk("`"+L+"` is not a valid property name")}if(0===M.length)return null}return{name:e,value:M,strValue:0===M.length?"none":M.join(" "),bypass:n}}if(l.color){var z=t1(t);return z?{name:e,value:z,pfValue:z,strValue:"rgb("+z[0]+","+z[1]+","+z[2]+")",bypass:n}:null}if(l.regex||l.regexes){if(l.enums){var F=k();if(F)return F}for(var V=l.regexes?l.regexes:[l.regex],j=0;j<V.length;j++){var U=new RegExp(V[j]).exec(t);if(U)return{name:e,value:l.singleRegexMatchValue?U[1]:U,strValue:""+t,bypass:n}}return null}if(l.string)return{name:e,value:""+t,strValue:""+t,bypass:n};else if(l.enums)return k();else return null};var o9=function(e){return this instanceof o9?tI(e)?void(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):void nC("A style must have a core reference"):new o9(e)},o7=o9.prototype;o7.instanceString=function(){return"style"},o7.clear=function(){for(var e=this._private,t=e.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach(function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1}),this},o7.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},o7.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},o7.selector=function(e){var t="core"===e?null:new ak(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},o7.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],n=0;n<this.properties.length;n++){var r=this.properties[n],i=t[r.name];void 0===i&&(i=t[tj(r.name)]),void 0!==i&&this.cssRule(r.name,i)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},o7.style=o7.css,o7.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.name.match(/stripe-(\d+)-background-size/)&&n.value&&(this._private.hasStripe=!0),n.mapped&&this[r].mappedProperties.push(n),this[r].selector||(this._private.coreStyle[n.name]=n)}return this},o7.append=function(e){return tN(e)?e.appendToStyle(this):tB(e)?this.appendFromJson(e):tk(e)&&this.appendFromString(e),this},o9.fromJson=function(e,t){var n=new o9(e);return n.fromJson(t),n},o9.fromString=function(e,t){return new o9(e).fromString(t)},[o0,o1,o2,o5,o3,o4,o6,o8].forEach(function(e){t$(o7,e)}),o9.types=o7.types,o9.properties=o7.properties,o9.propertyGroups=o7.propertyGroups,o9.propertyGroupNames=o7.propertyGroupNames,o9.propertyGroupKeys=o7.propertyGroupKeys;var se={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return(null==t.selectionType&&(t.selectionType="single"),void 0===e)?t.selectionType:(("additive"===e||"single"===e)&&(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,n,r,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(tk(a[0]))return o[e=a[0]];if(tA(a[0])){if(!this._private.panningEnabled)return this;r=(n=a[0]).x,i=n.y,tD(r)&&(o.x=r),tD(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[0],t=a[1],("x"===e||"y"===e)&&tD(t)&&(o[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var n,r,i,a=arguments,o=this._private.pan;if(!this._private.panningEnabled)return this;switch(a.length){case 1:tA(e)&&(r=(n=a[0]).x,i=n.y,tD(r)&&(o.x+=r),tD(i)&&(o.y+=i),this.emit("pan viewport"));break;case 2:("x"===e||"y"===e)&&tD(t)&&(o[e]+=t),this.emit("pan viewport")}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(tD(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){if(tk(e)){var n,r,i,a=e;e=this.$(a)}else if(tA(n=e)&&tD(n.x1)&&tD(n.x2)&&tD(n.y1)&&tD(n.y2)){var o=e;(r={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=r.x2-r.x1,r.h=r.y2-r.y1}else tR(e)||(e=this.mutableElements());if(!(tR(e)&&e.empty())){r=r||e.boundingBox();var s=this.width(),l=this.height();if(t=tD(t)?t:0,!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){i=(i=(i=Math.min((s-2*t)/r.w,(l-2*t)/r.h))>this._private.maxZoom?this._private.maxZoom:i)<this._private.minZoom?this._private.minZoom:i;var u={x:(s-i*(r.x1+r.x2))/2,y:(l-i*(r.y1+r.y2))/2};return{zoom:i,pan:u}}}}},zoomRange:function(e,t){var n=this._private;if(null==t){var r=e;e=r.min,t=r.max}return tD(e)&&tD(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):tD(e)&&void 0===t&&e<=n.maxZoom?n.minZoom=e:tD(t)&&void 0===e&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,n,r=this._private,i=r.pan,a=r.zoom,o=!1;if(r.zoomingEnabled||(o=!0),tD(e)?n=e:tA(e)&&(n=e.level,null!=e.position?t=n0(e.position,a,i):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||r.panningEnabled||(o=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,o||!tD(n)||n===a||null!=t&&(!tD(t.x)||!tD(t.y)))return null;if(null==t)return{zoomed:!0,panned:!1,zoom:n,pan:i};var s=n,l={x:-s/a*(t.x-i.x)+t.x,y:-s/a*(t.y-i.y)+t.y};return{zoomed:!0,panned:!0,zoom:s,pan:l}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed&&(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport")),this},viewport:function(e){var t=this._private,n=!0,r=!0,i=[],a=!1;if(!e||(tD(e.zoom)||(n=!1),tA(e.pan)||(r=!1),!n&&!r))return this;if(n){var o=e.zoom;o<t.minZoom||o>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=o,i.push("zoom"))}if(r&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var s=e.pan;tD(s.x)&&(t.pan.x=s.x),tD(s.y)&&(t.pan.y=s.y),i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(tk(e)){var n=e;e=this.mutableElements().filter(n)}else tR(e)||(e=this.mutableElements());if(0!==e.length){var r=e.boundingBox(),i=this.width(),a=this.height();return{x:(i-(t=void 0===t?this._private.zoom:t)*(r.x1+r.x2))/2,y:(a-t*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled&&this.viewport({pan:{x:0,y:0},zoom:1}),this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(e=this.window().getComputedStyle(r),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:r.clientWidth-t("padding-left")-t("padding-right"),height:r.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};se.centre=se.center,se.autolockNodes=se.autolock,se.autoungrabifyNodes=se.autoungrabify;var st={data:as.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:as.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:as.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:as.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};st.attr=st.data,st.removeAttr=st.removeData;var sn=function(e){var t=this,n=(e=t$({},e)).container;n&&!t_(n)&&t_(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{}).cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var a=void 0!==tb&&void 0!==n&&!e.headless,o=e;o.layout=t$({name:a?"grid":"null"},o.layout),o.renderer=t$({name:a?"canvas":"null"},o.renderer);var s=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},l=this._private={container:n,ready:!1,options:o,elements:new oI(this),listeners:[],aniEles:new oI(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,o.zoomingEnabled),userZoomingEnabled:s(!0,o.userZoomingEnabled),panningEnabled:s(!0,o.panningEnabled),userPanningEnabled:s(!0,o.userPanningEnabled),boxSelectionEnabled:s(!0,o.boxSelectionEnabled),autolock:s(!1,o.autolock,o.autolockNodes),autoungrabify:s(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:s(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:tD(o.zoom)?o.zoom:1,pan:{x:tA(o.pan)&&tD(o.pan.x)?o.pan.x:0,y:tA(o.pan)&&tD(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:s(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),l.styleEnabled&&t.setStyle([]);var u=t$({},o,o.renderer);t.initRenderer(u);var c=function(e,n,r){t.notifications(!1);var i=t.mutableElements();i.length>0&&i.remove(),null!=e&&(tA(e)||tB(e))&&t.add(e),t.one("layoutready",function(e){t.notifications(!0),t.emit(e),t.one("load",n),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",r),t.emit("done")});var a=t$({},t._private.options.layout);a.eles=t.elements(),t.layout(a).run()};!function(e,t){if(e.some(tz))return i0.all(e).then(t);t(e)}([o.style,o.elements],function(e){var n=e[0],a=e[1];l.styleEnabled&&t.style().append(n),c(a,function(){t.startAnimationLoop(),l.ready=!0,tP(o.ready)&&t.on("ready",o.ready);for(var e=0;e<i.length;e++){var n=i[e];t.on("ready",n)}r&&(r.readies=[]),t.emit("ready")},o.done)})},sr=sn.prototype;t$(sr,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){if(!this.destroyed())return this.stopAnimationLoop(),this.destroyRenderer(),this.emit("destroy"),this._private.destroyed=!0,this},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return tb;var e=this._private.container.ownerDocument;return void 0===e||null==e?tb:e.defaultView||tb},mount:function(e){if(null!=e){var t=this._private,n=t.options;return!t_(e)&&t_(e[0])&&(e=e[0]),this.stopAnimationLoop(),this.destroyRenderer(),t.container=e,t.styleEnabled=!0,this.invalidateSize(),this.initRenderer(t$({},n,n.renderer,{name:"null"===n.renderer.name?"canvas":n.renderer.name})),this.startAnimationLoop(),this.style(n.style),this.emit("mount"),this}},unmount:function(){return this.stopAnimationLoop(),this.destroyRenderer(),this.initRenderer({name:"null"}),this.emit("unmount"),this},options:function(){return nP(this._private.options)},json:function(e){var t=this,n=t._private,r=t.mutableElements();if(tA(e)){if(t.startBatch(),e.elements){var i={},a=function(e,n){for(var r=[],a=[],o=0;o<e.length;o++){var s=e[o];if(!s.data.id){nk("cy.json() cannot handle elements without an ID attribute");continue}var l=""+s.data.id,u=t.getElementById(l);i[l]=!0,0!==u.length?a.push({ele:u,json:s}):(n&&(s.group=n),r.push(s))}t.add(r);for(var c=0;c<a.length;c++){var h=a[c],d=h.ele,f=h.json;d.json(f)}};if(tB(e.elements))a(e.elements);else for(var o=["nodes","edges"],s=0;s<o.length;s++){var l=o[s],u=e.elements[l];tB(u)&&a(u,l)}var c=t.collection();r.filter(function(e){return!i[e.id()]}).forEach(function(e){e.isParent()?c.merge(e):e.remove()}),c.forEach(function(e){return e.children().move({parent:null})}),c.forEach(function(e){return t.getElementById(e.id()).remove()})}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<h.length;d++){var f=h[d];null!=e[f]&&t[f](e[f])}return t.endBatch(),this}var p={};e?p.elements=this.elements().map(function(e){return e.json()}):(p.elements={},r.forEach(function(e){var t=e.group();p.elements[t]||(p.elements[t]=[]),p.elements[t].push(e.json())})),this._private.styleEnabled&&(p.style=t.style().json()),p.data=nP(t.data());var g=n.options;return p.zoomingEnabled=n.zoomingEnabled,p.userZoomingEnabled=n.userZoomingEnabled,p.zoom=n.zoom,p.minZoom=n.minZoom,p.maxZoom=n.maxZoom,p.panningEnabled=n.panningEnabled,p.userPanningEnabled=n.userPanningEnabled,p.pan=nP(n.pan),p.boxSelectionEnabled=n.boxSelectionEnabled,p.renderer=nP(g.renderer),p.hideEdgesOnViewport=g.hideEdgesOnViewport,p.textureOnViewport=g.textureOnViewport,p.wheelSensitivity=g.wheelSensitivity,p.motionBlur=g.motionBlur,p.multiClickDebounceTime=g.multiClickDebounceTime,p}}),sr.$id=sr.getElementById,[{add:function(e){var t;if(tR(e))if(e._private.cy===this)t=e.restore();else{for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(i.json())}t=new oI(this,n)}else if(tB(e))t=new oI(this,e);else if(tA(e)&&(tB(e.nodes)||tB(e.edges))){for(var a=[],o=["nodes","edges"],s=0,l=o.length;s<l;s++){var u=o[s],c=e[u];if(tB(c))for(var h=0,d=c.length;h<d;h++){var f=t$({group:u},c[h]);a.push(f)}}t=new oI(this,a)}else t=new nj(this,e).collection();return t},remove:function(e){if(tR(e));else if(tk(e)){var t=e;e=this.$(t)}return e.remove()}},oY,oG,oK,oZ,{notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();null!=t&&r.merge(t);return}if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],a=e[i];t.getElementById(i).data(a)}})}},oQ,oJ,{style:function(e){return e&&this.setStyle(e).update(),this._private.style},setStyle:function(e){var t=this._private;return tN(e)?t.style=e.generateStyle(this):tB(e)?t.style=o9.fromJson(this,e):tk(e)?t.style=o9.fromString(this,e):t.style=o9(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},se,st].forEach(function(e){t$(sr,e)});var si={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},sa={maximal:!1,acyclic:!1},so=function(e){return e.scratch("breadthfirst")},ss=function(e,t){return e.scratch("breadthfirst",t)};function sl(e){this.options=t$({},si,sa,e)}sl.prototype.run=function(){var e,t=this.options,n=t.cy,r=t.eles,i=r.nodes().filter(function(e){return e.isChildless()}),a=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,l=rs(s?t.boundingBox:structuredClone(n.extent()));if(tR(t.roots))e=t.roots;else if(tB(t.roots)){for(var u=[],c=0;c<t.roots.length;c++){var h=t.roots[c],d=n.getElementById(h);u.push(d)}e=n.collection(u)}else if(tk(t.roots))e=n.$(t.roots);else if(a)e=i.roots();else{var f=r.components();e=n.collection();for(var p=0;p<f.length;p++)!function(){var t=f[p],n=t.maxDegree(!1),r=t.filter(function(e){return e.degree(!1)===n});e=e.add(r)}()}var g=[],v={},y=function(e,t){null==g[t]&&(g[t]=[]);var n=g[t].length;g[t].push(e),ss(e,{index:n,depth:t})},b=function(e,t){var n=so(e),r=n.depth,i=n.index;g[r][i]=null,e.isChildless()&&y(e,t)};r.bfs({roots:e,directed:t.directed,visit:function(e,t,n,r,i){var a=e[0],o=a.id();a.isChildless()&&y(a,i),v[o]=!0}});for(var x=[],w=0;w<i.length;w++){var E=i[w];v[E.id()]||x.push(E)}var T=function(e){for(var t=g[e],n=0;n<t.length;n++){var r=t[n];if(null==r){t.splice(n,1),n--;continue}ss(r,{depth:e,index:n})}};if(a&&o){var C=[],S={},k=function(e){return C.push(e)};for(i.forEach(function(e){return C.push(e)});C.length>0;){var P=C.shift(),B=function(e,n){for(var i=so(e),a=e.incomers().filter(function(e){return e.isNode()&&r.has(e)}),o=-1,s=e.id(),l=0;l<a.length;l++)o=Math.max(o,so(a[l]).depth);if(i.depth<=o){if(!t.acyclic&&n[s])return null;var u=o+1;return b(e,u),n[s]=u,!0}return!1}(P,S);if(B)P.outgoers().filter(function(e){return e.isNode()&&r.has(e)}).forEach(k);else if(null===B){nk("Detected double maximal shift for node `"+P.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var A=0;if(t.avoidOverlap)for(var D=0;D<i.length;D++){var _=i[D].layoutDimensions(t),R=_.w,M=_.h;A=Math.max(A,R,M)}var O={},I=function(e){if(O[e.id()])return O[e.id()];for(var t=so(e).depth,n=e.neighborhood(),r=0,a=0,o=0;o<n.length;o++){var s=n[o];if(!(s.isEdge()||s.isParent())&&i.has(s)){var l=so(s);if(null!=l){var u=l.index,c=l.depth;if(null!=u&&null!=c){var h=g[c].length;c<t&&(r+=u/h,a++)}}}}return r/=a=Math.max(1,a),0===a&&(r=0),O[e.id()]=r,r},N=function(e,t){var n=I(e)-I(t);return 0===n?tZ(e.id(),t.id()):n};void 0!==t.depthSort&&(N=t.depthSort);for(var L=g.length,z=0;z<L;z++)g[z].sort(N),T(z);for(var F=[],V=0;V<x.length;V++)F.push(x[V]);if(F.length){g.unshift(F),L=g.length;for(var j=0;j<L;j++)T(j)}for(var U=0,q=0;q<L;q++)U=Math.max(g[q].length,U);var X={x:l.x1+l.w/2,y:l.y1+l.h/2},Y=i.reduce(function(e,n){var r;return r=n.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}),{w:-1===e.w?r.w:(e.w+r.w)/2,h:-1===e.h?r.h:(e.h+r.h)/2}},{w:-1,h:-1}),W=Math.max(1===L?0:s?(l.h-2*t.padding-Y.h)/(L-1):(l.h-2*t.padding-Y.h)/(L+1),A),H=g.reduce(function(e,t){return Math.max(e,t.length)},0),G=function(e){var n=so(e),r=n.depth,i=n.index;if(t.circle){var a=Math.min(l.w/2/L,l.h/2/L),o=(a=Math.max(a,A))*r+a-(L>0&&g[0].length<=3?a/2:0),u=2*Math.PI/g[r].length*i;return 0===r&&1===g[0].length&&(o=1),{x:X.x+o*Math.cos(u),y:X.y+o*Math.sin(u)}}var c=g[r].length,h=Math.max(1===c?0:s?(l.w-2*t.padding-Y.w)/((t.grid?H:c)-1):(l.w-2*t.padding-Y.w)/((t.grid?H:c)+1),A);return{x:X.x+(i+1-(c+1)/2)*h,y:X.y+(r+1-(L+1)/2)*W}},K={downward:0,leftward:90,upward:180,rightward:-90};return -1===Object.keys(K).indexOf(t.direction)&&nC("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(K).join(", "))),r.nodes().layoutPositions(this,t,function(e){return function(e,t,n){if(0===n)return e;var r,i,a,o,s=(t.x1+t.x2)/2,l=(t.y1+t.y2)/2,u=t.w/t.h,c=(r=e.x,i=e.y,{x:Math.cos(a=n*Math.PI/180)*(r-s)-Math.sin(a)*(i-l)+s,y:Math.sin(a)*(r-s)+Math.cos(a)*(i-l)+l}),h=(o=c.x,{x:(o-s)*u+s,y:(c.y-l)*(1/u)+l});return{x:h.x,y:h.y}}(G(e),l,K[t.direction])}),this};var su={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function sc(e){this.options=t$({},su,e)}sc.prototype.run=function(){var e,t=this.options,n=t.cy,r=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=r.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));for(var o=rs(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=(void 0===t.sweep?2*Math.PI-2*Math.PI/a.length:t.sweep)/Math.max(1,a.length-1),u=0,c=0;c<a.length;c++){var h=a[c].layoutDimensions(t);u=Math.max(u,h.w,h.h)}if(e=tD(t.radius)?t.radius:a.length<=1?0:Math.min(o.h,o.w)/2-u,a.length>1&&t.avoidOverlap){var d=Math.cos(l)-1,f=Math.sin(l)-0;e=Math.max(Math.sqrt((u*=1.75)*u/(d*d+f*f)),e)}return r.nodes().layoutPositions(this,t,function(n,r){var a=t.startAngle+r*l*(i?1:-1),o=e*Math.cos(a),u=e*Math.sin(a);return{x:s.x+o,y:s.y+u}}),this};var sh={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function sd(e){this.options=t$({},sh,e)}sd.prototype.run=function(){for(var e=this.options,t=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,n=e.cy,r=e.eles,i=r.nodes().not(":parent"),a=rs(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:a.x1+a.w/2,y:a.y1+a.h/2},s=[],l=0,u=0;u<i.length;u++){var c=i[u],h=void 0;h=e.concentric(c),s.push({value:h,node:c}),c._private.scratch.concentric=h}i.updateStyle();for(var d=0;d<i.length;d++){var f=i[d].layoutDimensions(e);l=Math.max(l,f.w,f.h)}s.sort(function(e,t){return t.value-e.value});for(var p=e.levelWidth(i),g=[[]],v=g[0],y=0;y<s.length;y++){var b=s[y];v.length>0&&Math.abs(v[0].value-b.value)>=p&&(v=[],g.push(v)),v.push(b)}var x=l+e.minNodeSpacing;if(!e.avoidOverlap){var w=g.length>0&&g[0].length>1,E=(Math.min(a.w,a.h)/2-x)/(g.length+w?1:0);x=Math.min(x,E)}for(var T=0,C=0;C<g.length;C++){var S=g[C],k=void 0===e.sweep?2*Math.PI-2*Math.PI/S.length:e.sweep,P=S.dTheta=k/Math.max(1,S.length-1);if(S.length>1&&e.avoidOverlap){var B=Math.cos(P)-1,A=Math.sin(P)-0;T=Math.max(Math.sqrt(x*x/(B*B+A*A)),T)}S.r=T,T+=x}if(e.equidistant){for(var D=0,_=0,R=0;R<g.length;R++)D=Math.max(D,g[R].r-_);_=0;for(var M=0;M<g.length;M++){var O=g[M];0===M&&(_=O.r),O.r=_,_+=D}}for(var I={},N=0;N<g.length;N++)for(var L=g[N],z=L.dTheta,F=L.r,V=0;V<L.length;V++){var j=L[V],U=e.startAngle+(t?1:-1)*z*V,q={x:o.x+F*Math.cos(U),y:o.y+F*Math.sin(U)};I[j.node.id()]=q}return r.nodes().layoutPositions(this,e,function(e){return I[e.id()]}),this};var sf={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function sp(e){this.options=t$({},sf,e),this.options.layout=this;var t=this.options.eles.nodes(),n=this.options.eles.edges().filter(function(e){var n=e.source().data("id"),r=e.target().data("id"),i=t.some(function(e){return e.data("id")===n}),a=t.some(function(e){return e.data("id")===r});return!i||!a});this.options.eles=this.options.eles.not(n)}sp.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,(!0===e.animate||!1===e.animate)&&n.emit({type:"layoutstart",layout:n}),ct=!0===e.debug;var r=sg(t,n,e);ct&&cn(r),e.randomize&&sm(r);var i=ni(),a=function(){sx(r,t,e),!0===e.fit&&t.fit(e.padding)},o=function(t){return!n.stopped&&!(t>=e.numIter)&&(sw(r,e),r.temperature=r.temperature*e.coolingFactor,!(r.temperature<e.minTemp))},s=function(){if(!0===e.animate||!1===e.animate)a(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var t=e.eles.nodes(),i=sb(r,e,t);t.layoutPositions(n,e,i)}},l=0,u=!0;if(!0===e.animate){var c=function(){for(var t=0;u&&t<e.refresh;)u=o(l),l++,t++;u?(ni()-i>=e.animationThreshold&&a(),no(c)):(sM(r,e),s())};c()}else{for(;u;)u=o(l),l++;sM(r,e),s()}return this},sp.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},sp.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var sg=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),a=rs(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},s=n.eles.components(),l={},u=0;u<s.length;u++)for(var c=s[u],h=0;h<c.length;h++){var d=c[h];l[d.id()]=u}for(var u=0;u<o.nodeSize;u++){var f=i[u],p=f.layoutDimensions(n),g={};g.isLocked=f.locked(),g.id=f.data("id"),g.parentId=f.data("parent"),g.cmptId=l[f.id()],g.children=[],g.positionX=f.position("x"),g.positionY=f.position("y"),g.offsetX=0,g.offsetY=0,g.height=p.w,g.width=p.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(f.style("padding")),g.padRight=parseFloat(f.style("padding")),g.padTop=parseFloat(f.style("padding")),g.padBottom=parseFloat(f.style("padding")),g.nodeRepulsion=tP(n.nodeRepulsion)?n.nodeRepulsion(f):n.nodeRepulsion,o.layoutNodes.push(g),o.idToIndex[g.id]=u}for(var v=[],y=0,b=-1,x=[],u=0;u<o.nodeSize;u++){var f=o.layoutNodes[u],w=f.parentId;null!=w?o.layoutNodes[o.idToIndex[w]].children.push(f.id):(v[++b]=f.id,x.push(f.id))}for(o.graphSet.push(x);y<=b;){var E=v[y++],T=o.idToIndex[E],d=o.layoutNodes[T],C=d.children;if(C.length>0){o.graphSet.push(C);for(var u=0;u<C.length;u++)v[++b]=C[u]}}for(var u=0;u<o.graphSet.length;u++)for(var S=o.graphSet[u],h=0;h<S.length;h++){var k=o.idToIndex[S[h]];o.indexToGraph[k]=u}for(var u=0;u<o.edgeSize;u++){var P=r[u],B={};B.id=P.data("id"),B.sourceId=P.data("source"),B.targetId=P.data("target");var A=tP(n.idealEdgeLength)?n.idealEdgeLength(P):n.idealEdgeLength,D=tP(n.edgeElasticity)?n.edgeElasticity(P):n.edgeElasticity,_=o.idToIndex[B.sourceId],R=o.idToIndex[B.targetId];if(o.indexToGraph[_]!=o.indexToGraph[R]){for(var M=sv(B.sourceId,B.targetId,o),O=o.graphSet[M],I=0,g=o.layoutNodes[_];-1===O.indexOf(g.id);)g=o.layoutNodes[o.idToIndex[g.parentId]],I++;for(g=o.layoutNodes[R];-1===O.indexOf(g.id);)g=o.layoutNodes[o.idToIndex[g.parentId]],I++;A*=I*n.nestingFactor}B.idealLength=A,B.elasticity=D,o.layoutEdges.push(B)}return o},sv=function(e,t,n){var r=sy(e,t,0,n);return 2>r.count?0:r.graph},sy=function(e,t,n,r){var i=r.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var a=0,o=0;o<i.length;o++){var s=i[o],l=r.idToIndex[s],u=r.layoutNodes[l].children;if(0!==u.length){var c=sy(e,t,r.indexToGraph[r.idToIndex[u[0]]],r);if(0===c.count)continue;if(1!==c.count)return c;if(2==++a)break}}return{count:a,graph:n}},sm=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var a=e.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*n,a.positionY=Math.random()*r)}},sb=function(e,t,n){var r=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,a){var o=e.layoutNodes[e.idToIndex[n.data("id")]];if(!t.boundingBox)return{x:o.positionX,y:o.positionY};var s=0===i.w?.5:(o.positionX-i.x1)/i.w,l=0===i.h?.5:(o.positionY-i.y1)/i.h;return{x:r.x1+s*r.w,y:r.y1+l*r.h}}},sx=function(e,t,n){var r=n.layout,i=n.eles.nodes(),a=sb(e,n,i);i.positions(a),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},sw=function(e,t,n){sE(e,t),sP(e),sB(e,t),sA(e),sD(e)},sE=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,a=0;a<i;a++)for(var o=e.layoutNodes[e.idToIndex[r[a]]],s=a+1;s<i;s++)sC(o,e.layoutNodes[e.idToIndex[r[s]]],e,t)},sT=function(e){return -1+2*e*Math.random()},sC=function(e,t,n,r){if(e.cmptId===t.cmptId||n.isCompound){var i=t.positionX-e.positionX,a=t.positionY-e.positionY;0===i&&0===a&&(i=sT(1),a=sT(1));var o=sS(e,t,i,a);if(o>0)var s=r.nodeOverlap*o,l=Math.sqrt(i*i+a*a),u=s*i/l,c=s*a/l;else var h=sk(e,i,a),d=sk(t,-1*i,-1*a),f=d.x-h.x,p=d.y-h.y,g=f*f+p*p,l=Math.sqrt(g),s=(e.nodeRepulsion+t.nodeRepulsion)/g,u=s*f/l,c=s*p/l;e.isLocked||(e.offsetX-=u,e.offsetY-=c),t.isLocked||(t.offsetX+=u,t.offsetY+=c)}},sS=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(r>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},sk=function(e,t,n){var r=e.positionX,i=e.positionY,a=e.height||1,o=e.width||1,s=n/t,l=a/o,u={};return 0===t&&0<n||0===t&&0>n?(u.x=r,u.y=i+a/2):0<t&&-1*l<=s&&s<=l?(u.x=r+o/2,u.y=i+o*n/2/t):0>t&&-1*l<=s&&s<=l?(u.x=r-o/2,u.y=i-o*n/2/t):0<n&&(s<=-1*l||s>=l)?(u.x=r+a*t/2/n,u.y=i+a/2):0>n&&(s<=-1*l||s>=l)&&(u.x=r-a*t/2/n,u.y=i-a/2),u},sP=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],a=e.layoutNodes[i],o=e.idToIndex[r.targetId],s=e.layoutNodes[o],l=s.positionX-a.positionX,u=s.positionY-a.positionY;if(0!==l||0!==u){var c=sk(a,l,u),h=sk(s,-1*l,-1*u),d=h.x-c.x,f=h.y-c.y,p=Math.sqrt(d*d+f*f),g=Math.pow(r.idealLength-p,2)/r.elasticity;if(0!==p)var v=g*d/p,y=g*f/p;else var v=0,y=0;a.isLocked||(a.offsetX+=v,a.offsetY+=y),s.isLocked||(s.offsetX-=v,s.offsetY-=y)}}},sB=function(e,t){if(0!==t.gravity)for(var n=0;n<e.graphSet.length;n++){var r=e.graphSet[n],i=r.length;if(0===n)var a=e.clientHeight/2,o=e.clientWidth/2;else var s=e.layoutNodes[e.idToIndex[r[0]]],l=e.layoutNodes[e.idToIndex[s.parentId]],a=l.positionX,o=l.positionY;for(var u=0;u<i;u++){var c=e.layoutNodes[e.idToIndex[r[u]]];if(!c.isLocked){var h=a-c.positionX,d=o-c.positionY,f=Math.sqrt(h*h+d*d);if(f>1){var p=t.gravity*h/f,g=t.gravity*d/f;c.offsetX+=p,c.offsetY+=g}}}}},sA=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;r<=i;){var a=n[r++],o=e.idToIndex[a],s=e.layoutNodes[o],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=u,d.offsetY+=c,n[++i]=l[h]}s.offsetX=0,s.offsetY=0}}},sD=function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length)&&!r.isLocked){var i=s_(r.offsetX,r.offsetY,e.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,sR(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},s_=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else var i={x:e,y:t};return i},sR=function(e,t){var n=e.parentId;if(null!=n){var r=t.layoutNodes[t.idToIndex[n]],i=!1;if((null==r.maxX||e.maxX+r.padRight>r.maxX)&&(r.maxX=e.maxX+r.padRight,i=!0),(null==r.minX||e.minX-r.padLeft<r.minX)&&(r.minX=e.minX-r.padLeft,i=!0),(null==r.maxY||e.maxY+r.padBottom>r.maxY)&&(r.maxY=e.maxY+r.padBottom,i=!0),(null==r.minY||e.minY-r.padTop<r.minY)&&(r.minY=e.minY-r.padTop,i=!0),i)return sR(r,t)}},sM=function(e,t){for(var n=e.layoutNodes,r=[],i=0;i<n.length;i++){var a=n[i],o=a.cmptId;(r[o]=r[o]||[]).push(a)}for(var s=0,i=0;i<r.length;i++){var l=r[i];if(l){l.x1=1/0,l.x2=-1/0,l.y1=1/0,l.y2=-1/0;for(var u=0;u<l.length;u++){var c=l[u];l.x1=Math.min(l.x1,c.positionX-c.width/2),l.x2=Math.max(l.x2,c.positionX+c.width/2),l.y1=Math.min(l.y1,c.positionY-c.height/2),l.y2=Math.max(l.y2,c.positionY+c.height/2)}l.w=l.x2-l.x1,l.h=l.y2-l.y1,s+=l.w*l.h}}r.sort(function(e,t){return t.w*t.h-e.w*e.h});for(var h=0,d=0,f=0,p=0,g=Math.sqrt(s)*e.clientWidth/e.clientHeight,i=0;i<r.length;i++){var l=r[i];if(l){for(var u=0;u<l.length;u++){var c=l[u];c.isLocked||(c.positionX+=h-l.x1,c.positionY+=d-l.y1)}h+=l.w+t.componentSpacing,f+=l.w+t.componentSpacing,p=Math.max(p,l.h),f>g&&(d+=p+t.componentSpacing,h=0,f=0,p=0)}}},sO={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function sI(e){this.options=t$({},sO,e)}sI.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=n.nodes().not(":parent");e.sort&&(r=r.sort(e.sort));var i=rs(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(0===i.h||0===i.w)n.nodes().layoutPositions(this,e,function(e){return{x:i.x1,y:i.y1}});else{var a=r.size(),o=Math.sqrt(a*i.h/i.w),s=Math.round(o),l=Math.round(i.w/i.h*o),u=function(e){if(null==e)return Math.min(s,l);Math.min(s,l)==s?s=e:l=e},c=function(e){if(null==e)return Math.max(s,l);Math.max(s,l)==s?s=e:l=e},h=e.rows,d=null!=e.cols?e.cols:e.columns;if(null!=h&&null!=d)s=h,l=d;else if(null!=h&&null==d)l=Math.ceil(a/(s=h));else if(null==h&&null!=d)s=Math.ceil(a/(l=d));else if(l*s>a){var f=u(),p=c();(f-1)*p>=a?u(f-1):(p-1)*f>=a&&c(p-1)}else for(;l*s<a;){var g=u(),v=c();(v+1)*g>=a?c(v+1):u(g+1)}var y=i.w/l,b=i.h/s;if(e.condense&&(y=0,b=0),e.avoidOverlap)for(var x=0;x<r.length;x++){var w=r[x],E=w._private.position;(null==E.x||null==E.y)&&(E.x=0,E.y=0);var T=w.layoutDimensions(e),C=e.avoidOverlapPadding,S=T.w+C,k=T.h+C;y=Math.max(y,S),b=Math.max(b,k)}for(var P={},B=function(e,t){return!!P["c-"+e+"-"+t]},A=function(e,t){P["c-"+e+"-"+t]=!0},D=0,_=0,R=function(){++_>=l&&(_=0,D++)},M={},O=0;O<r.length;O++){var I=r[O],N=e.position(I);if(N&&(void 0!==N.row||void 0!==N.col)){var L={row:N.row,col:N.col};if(void 0===L.col)for(L.col=0;B(L.row,L.col);)L.col++;else if(void 0===L.row)for(L.row=0;B(L.row,L.col);)L.row++;M[I.id()]=L,A(L.row,L.col)}}r.layoutPositions(this,e,function(e,t){if(e.locked()||e.isParent())return!1;var n,r,a=M[e.id()];if(a)n=a.col*y+y/2+i.x1,r=a.row*b+b/2+i.y1;else{for(;B(D,_);)R();n=_*y+y/2+i.x1,r=D*b+b/2+i.y1,A(D,_),R()}return{x:n,y:r}})}return this};var sN={ready:function(){},stop:function(){}};function sL(e){this.options=t$({},sN,e)}sL.prototype.run=function(){var e=this.options,t=e.eles;return e.cy,this.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",e.ready),this.emit("layoutready"),this.one("layoutstop",e.stop),this.emit("layoutstop"),this},sL.prototype.stop=function(){return this};var sz={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function sF(e){this.options=t$({},sz,e)}sF.prototype.run=function(){var e=this.options,t=e.eles.nodes(),n=tP(e.positions);return t.layoutPositions(this,e,function(t,r){var i=function(t){if(null==e.positions){var r;return{x:(r=t.position()).x,y:r.y}}if(n)return e.positions(t);var i=e.positions[t._private.data.id];return null==i?null:i}(t);return!t.locked()&&null!=i&&i}),this};var sV={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function sj(e){this.options=t$({},sV,e)}sj.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=rs(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return n.nodes().layoutPositions(this,e,function(e,t){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var sU=[{name:"breadthfirst",impl:sl},{name:"circle",impl:sc},{name:"concentric",impl:sd},{name:"cose",impl:sp},{name:"grid",impl:sI},{name:"null",impl:sL},{name:"preset",impl:sF},{name:"random",impl:sj}];function sq(e){this.options=e,this.notifications=0}var sX=function(){},sY=function(){throw Error("A headless instance can not render images")};sq.prototype={recalculateRenderedStyle:sX,notify:function(){this.notifications++},init:sX,isHeadless:function(){return!0},png:sY,jpg:sY};var sW={};sW.arrowShapeWidth=.3,sW.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,r,i,a,o){var s=i.x-n/2-o,l=i.x+n/2+o,u=i.y-n/2-o,c=i.y+n/2+o;return s<=e&&e<=l&&u<=t&&t<=c},r=function(e,t,n,r,i){var a=e*Math.cos(r)-t*Math.sin(r),o=e*Math.sin(r)+t*Math.cos(r);return{x:a*n+i.x,y:o*n+i.y}},i=function(e,t,n,i){for(var a=[],o=0;o<e.length;o+=2){var s=e[o],l=e[o+1];a.push(r(s,l,t,n,i))}return a},a=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.x,r.y)}return t},o=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},s=function(r,s){tk(s)&&(s=e[s]),e[r]=t$({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,r,o,s){return rk(e,t,a(i(this.points,n+2*s,r,o)))},roughCollide:n,draw:function(e,n,r,a){var o=i(this.points,n,r,a);t.arrowShapeImpl("polygon")(e,o)},spacing:function(e){return 0},gap:o},s)};s("none",{collide:nw,roughCollide:nw,draw:nT,spacing:nE,gap:nE}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,a,o,s){var l=i(this.points,n,a,o),u=this.controlPoint,c=r(u[0],u[1],n,a,o);t.arrowShapeImpl(this.name)(e,l,c)},gap:function(e){return .8*o(e)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,r,o,s,l){var u=a(i(this.points,n+2*l,r,o)),c=a(i(this.pointsTee,n+2*l,r,o));return rk(e,t,u)||rk(e,t,c)},draw:function(e,n,r,a,o){var s=i(this.points,n,r,a),l=i(this.pointsTee,n,r,a);t.arrowShapeImpl(this.name)(e,s,l)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(e,t,n,r,o,s,l){var u=Math.pow(o.x-e,2)+Math.pow(o.y-t,2)<=Math.pow((n+2*l)*this.radius,2);return rk(e,t,a(i(this.points,n+2*l,r,o)))||u},draw:function(e,n,r,a,o){var s=i(this.pointsTr,n,r,a);t.arrowShapeImpl(this.name)(e,s,a.x,a.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var n=this.baseCrossLinePts.slice(),r=t/e;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(e,t,n,r,o,s,l){var u=a(i(this.points,n+2*l,r,o)),c=a(i(this.crossLinePts(n,s),n+2*l,r,o));return rk(e,t,u)||rk(e,t,c)},draw:function(e,n,r,a,o){var s=i(this.points,n,r,a),l=i(this.crossLinePts(n,o),n,r,a);t.arrowShapeImpl(this.name)(e,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return .525*o(e)}}),s("circle",{radius:.15,collide:function(e,t,n,r,i,a,o){return Math.pow(i.x-e,2)+Math.pow(i.y-t,2)<=Math.pow((n+2*o)*this.radius,2)},draw:function(e,n,r,i,a){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return .95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})};var sH={};sH.projectIntoViewport=function(e,t){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],a=r[1],o=r[4],s=n.pan(),l=n.zoom();return[((e-i)/o-s.x)/l,((t-a)/o-s.y)/l]},sH.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=this.cy.window().getComputedStyle(e),r=function(e){return parseFloat(n.getPropertyValue(e))},i={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},a={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},o=e.clientWidth,s=e.clientHeight,l=i.left+i.right,u=i.top+i.bottom,c=a.left+a.right,h=t.width/(o+c),d=t.left+i.left+a.left,f=t.top+i.top+a.top;return this.containerBB=[d,f,o-l,s-u,h]},sH.invalidateContainerClientCoordsCache=function(){this.containerBB=null},sH.findNearestElement=function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]},sH.findNearestElements=function(e,t,n,r){var i,a,o=this,s=this,l=s.getCachedZSortedEles(),u=[],c=s.cy.zoom(),h=s.cy.hasCompoundNodes(),d=(r?24:8)/c,f=(r?8:2)/c,p=(r?8:2)/c,g=1/0;function v(e,t){if(e.isNode())if(a)return;else a=e,u.push(e);if(e.isEdge()&&(null==t||t<g))if(i){if(i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value){for(var n=0;n<u.length;n++)if(u[n].isEdge()){u[n]=e,i=e,g=null!=t?t:g;break}}}else u.push(e),i=e,g=null!=t?t:g}function y(n){var r=n.outerWidth()+2*f,i=n.outerHeight()+2*f,a=r/2,l=i/2,u=n.position(),c="auto"===n.pstyle("corner-radius").value?"auto":n.pstyle("corner-radius").pfValue,h=n._private.rscratch;if(u.x-a<=e&&e<=u.x+a&&u.y-l<=t&&t<=u.y+l&&s.nodeShapes[o.getNodeShape(n)].checkPoint(e,t,0,r,i,u.x,u.y,c,h))return v(n,0),!0}n&&(l=l.interactive);function b(n,r){var i,a=n._private;i=r?r+"-":"",n.boundingBox();var o=a.labelBounds[r||"main"],s=n.pstyle(i+"label").value;if("yes"===n.pstyle("text-events").strValue&&s){var l=nI(a.rscratch,"labelX",r),u=nI(a.rscratch,"labelY",r),c=nI(a.rscratch,"labelAngle",r),h=n.pstyle(i+"text-margin-x").pfValue,d=n.pstyle(i+"text-margin-y").pfValue,f=o.x1-p-h,g=o.x2+p-h,y=o.y1-p-d,b=o.y2+p-d;if(c){var x=Math.cos(c),w=Math.sin(c),E=function(e,t){return{x:(e-=l)*x-(t-=u)*w+l,y:e*w+t*x+u}},T=E(f,y),C=E(f,b),S=E(g,y),k=E(g,b);if(rk(e,t,[T.x+h,T.y+d,S.x+h,S.y+d,k.x+h,k.y+d,C.x+h,C.y+d]))return v(n),!0}else if(rg(o,e,t))return v(n),!0}}for(var x=l.length-1;x>=0;x--){var w=l[x];w.isNode()?y(w)||b(w):function(n){var r,i=n._private,a=i.rscratch,l=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,f=l/2+d,p=f*f,g=2*f,b=i.source,x=i.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var w=a.allpts,E=0;E+3<w.length;E+=2)if(rx(e,t,w[E],w[E+1],w[E+2],w[E+3],g)&&p>(r=rS(e,t,w[E],w[E+1],w[E+2],w[E+3])))return v(n,r),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType){for(var w=a.allpts,E=0;E+5<a.allpts.length;E+=4)if(rw(e,t,w[E],w[E+1],w[E+2],w[E+3],w[E+4],w[E+5],g)&&p>(r=rC(e,t,w[E],w[E+1],w[E+2],w[E+3],w[E+4],w[E+5])))return v(n,r),!0}for(var b=b||i.source,x=x||i.target,T=o.getArrowWidth(l,c),C=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}],E=0;E<C.length;E++){var S=C[E],k=s.arrowShapes[n.pstyle(S.name+"-arrow-shape").value],P=n.pstyle("width").pfValue;if(k.roughCollide(e,t,T,S.angle,{x:S.x,y:S.y},P,d)&&k.collide(e,t,T,S.angle,{x:S.x,y:S.y},P,d))return v(n),!0}h&&u.length>0&&(y(b),y(x))}(w)||b(w)||b(w,"source")||b(w,"target")}return u},sH.getAllInBox=function(e,t,n,r){var i=this.getCachedZSortedEles().interactive,a=2/this.cy.zoom(),o=[],s=Math.min(e,n),l=Math.max(e,n),u=Math.min(t,r),c=Math.max(t,r);e=s,n=l;var h=rs({x1:e,y1:t=u,x2:n,y2:r=c}),d=[{x:h.x1,y:h.y1},{x:h.x2,y:h.y1},{x:h.x2,y:h.y2},{x:h.x1,y:h.y2}],f=[[d[0],d[1]],[d[1],d[2]],[d[2],d[3]],[d[3],d[0]]];function p(e,t){var n=e._private;e.boundingBox();var r=n.labelBounds.main;if(!r)return null;var i=nI(n.rscratch,"labelX",t),o=nI(n.rscratch,"labelY",t),s=nI(n.rscratch,"labelAngle",t),l=e.pstyle("text-margin-x").pfValue,u=e.pstyle("text-margin-y").pfValue,c=r.x1-a-l,h=r.x2+a-l,d=r.y1-a-u,f=r.y2+a-u;if(!s)return[{x:c,y:d},{x:h,y:d},{x:h,y:f},{x:c,y:f}];var p=Math.cos(s),g=Math.sin(s),v=function(e,t){return{x:(e-=i)*p-(t-=o)*g+i,y:e*g+t*p+o}};return[v(c,d),v(h,d),v(h,f),v(c,f)]}for(var g=0;g<i.length;g++){var v=i[g];if(v.isNode()){var y="yes"===v.pstyle("text-events").strValue,b=v.pstyle("box-selection").strValue,x="yes"===v.pstyle("box-select-labels").strValue;if("none"===b)continue;var w=("overlap"===b||x)&&y,E=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:w});if("contain"===b){var T=!1;if(x&&y){var C=p(v);C&&rH(C,d)&&(o.push(v),T=!0)}!T&&ry(h,E)&&o.push(v)}else if("overlap"===b&&rp(h,E)){var S=v.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1});if(rH([{x:S.x1,y:S.y1},{x:S.x2,y:S.y1},{x:S.x2,y:S.y2},{x:S.x1,y:S.y2}],d))o.push(v);else{var k=p(v);k&&rH(k,d)&&o.push(v)}}}else{var P=v._private,B=P.rscratch,A=v.pstyle("box-selection").strValue;if("none"===A)continue;if("contain"===A){if(null!=B.startX&&null!=B.startY&&!rg(h,B.startX,B.startY)||null!=B.endX&&null!=B.endY&&!rg(h,B.endX,B.endY))continue;if("bezier"===B.edgeType||"multibezier"===B.edgeType||"self"===B.edgeType||"compound"===B.edgeType||"segments"===B.edgeType||"haystack"===B.edgeType){for(var D=P.rstyle.bezierPts||P.rstyle.linePts||P.rstyle.haystackPts,_=!0,R=0;R<D.length;R++)if(!rv(h,D[R])){_=!1;break}_&&o.push(v)}else"straight"===B.edgeType&&o.push(v)}else if("overlap"===A){var M=!1;if(null!=B.startX&&null!=B.startY&&null!=B.endX&&null!=B.endY&&(rg(h,B.startX,B.startY)||rg(h,B.endX,B.endY)))o.push(v),M=!0;else if(!M&&"haystack"===B.edgeType){for(var O=P.rstyle.haystackPts,I=0;I<O.length;I++)if(rv(h,O[I])){o.push(v),M=!0;break}}if(!M){var N=P.rstyle.bezierPts||P.rstyle.linePts||P.rstyle.haystackPts;if((!N||N.length<2)&&"straight"===B.edgeType&&null!=B.startX&&null!=B.startY&&null!=B.endX&&null!=B.endY&&(N=[{x:B.startX,y:B.startY},{x:B.endX,y:B.endY}]),!N||N.length<2)continue;for(var L=0;L<N.length-1;L++){for(var z=N[L],F=N[L+1],V=0;V<f.length;V++){var j=tp(f[V],2);if(function(e,t,n,r){function i(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}return i(e,n,r)!==i(t,n,r)&&i(e,t,n)!==i(e,t,r)}(z,F,j[0],j[1])){o.push(v),M=!0;break}}if(M)break}}}}}return o};var sG={};sG.calculateArrowAngles=function(e){var t=e._private.rscratch,n="haystack"===t.edgeType,r="bezier"===t.edgeType,i="multibezier"===t.edgeType,a="segments"===t.edgeType,o="compound"===t.edgeType,s="self"===t.edgeType;if(n?(y=t.haystackPts[0],b=t.haystackPts[1],x=t.haystackPts[2],w=t.haystackPts[3]):(y=t.arrowStartX,b=t.arrowStartY,x=t.arrowEndX,w=t.arrowEndY),h=t.midX,d=t.midY,a)g=y-t.segpts[0],v=b-t.segpts[1];else if(i||o||s||r){var l=t.allpts,u=rr(l[0],l[2],l[4],.1),c=rr(l[1],l[3],l[5],.1);g=y-u,v=b-c}else g=y-h,v=b-d;t.srcArrowAngle=n8(g,v);var h=t.midX,d=t.midY;if(n&&(h=(y+x)/2,d=(b+w)/2),g=x-y,v=w-b,a){var l=t.allpts;if(l.length/2%2==0){var f=l.length/2,p=f-2;g=l[f]-l[p],v=l[f+1]-l[p+1]}else if(t.isRound)g=t.midVector[1],v=-t.midVector[0];else{var f=l.length/2-1,p=f-2;g=l[f]-l[p],v=l[f+1]-l[p+1]}}else if(i||o||s){var g,v,y,b,x,w,h,d,E,T,C,S,l=t.allpts;if(t.ctrlpts.length/2%2==0){var k=l.length/2-1,P=k+2,B=P+2;E=rr(l[k],l[P],l[B],0),T=rr(l[k+1],l[P+1],l[B+1],0),C=rr(l[k],l[P],l[B],1e-4),S=rr(l[k+1],l[P+1],l[B+1],1e-4)}else{var P=l.length/2-1,k=P-2,B=P+2;E=rr(l[k],l[P],l[B],.4999),T=rr(l[k+1],l[P+1],l[B+1],.4999),C=rr(l[k],l[P],l[B],.5),S=rr(l[k+1],l[P+1],l[B+1],.5)}g=C-E,v=S-T}if(t.midtgtArrowAngle=n8(g,v),t.midDispX=g,t.midDispY=v,g*=-1,v*=-1,a){var l=t.allpts;if(l.length/2%2==0);else if(!t.isRound){var f=l.length/2-1,A=f+2;g=-(l[A]-l[f]),v=-(l[A+1]-l[f+1])}}if(t.midsrcArrowAngle=n8(g,v),a)g=x-t.segpts[t.segpts.length-2],v=w-t.segpts[t.segpts.length-1];else if(i||o||s||r){var l=t.allpts,D=l.length,u=rr(l[D-6],l[D-4],l[D-2],.9),c=rr(l[D-5],l[D-3],l[D-1],.9);g=x-u,v=w-c}else g=x-h,v=w-d;t.tgtArrowAngle=n8(g,v)},sG.getArrowWidth=sG.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=r),r};var sK,sZ,s$,sQ,sJ,s0,s1,s2,s5,s3,s4,s6,s8,s9,s7,le,lt,ln,lr,li,la,lo,ls,ll,lu,lc,lh,ld,lf,lp,lg,lv,ly,lm,lb,lx,lw,lE,lT,lC,lS,lk,lP,lB,lA,lD,l_,lR,lM,lO,lI,lN,lL,lz,lF,lV,lj,lU,lq,lX,lY,lW,lH,lG,lK,lZ,l$,lQ,lJ,l0,l1,l2,l5,l3,l4,l6,l8,l9,l7,ue,ut,un,ur,ui,ua,uo,us,ul,uu,uc,uh,ud,uf,up,ug,uv,uy,um,ub,ux,uw,uE,uT,uC,uS,uk,uP,uB,uA,uD,u_,uR,uM,uO,uI,uN,uL,uz,uF,uV,uj,uU,uq,uX,uY,uW,uH,uG,uK,uZ,u$,uQ,uJ,u0,u1,u2,u5,u3,u4,u6,u8,u9,u7,ce,ct,cn,cr,ci,ca,co,cs,cl,cu,cc,ch,cd,cf,cp,cg={},cv={},cy=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},cm=function(e,t){t.x=-1*e.x,t.y=-1*e.y,t.nx=-1*e.nx,t.ny=-1*e.ny,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},cb=function(e,o,s,l,u){if(e!==a?cy(o,e,cg):cm(cv,cg),cy(o,s,cv),ca=cg.nx*cv.ny-cg.ny*cv.nx,co=cg.nx*cv.nx- -(cg.ny*cv.ny),1e-6>Math.abs(cu=Math.asin(Math.max(-1,Math.min(1,ca))))){cr=o.x,ci=o.y,ch=cf=0;return}cs=1,cl=!1,co<0?cu<0?cu=Math.PI+cu:(cu=Math.PI-cu,cs=-1,cl=!0):cu>0&&(cs=-1,cl=!0),cf=void 0!==o.radius?o.radius:l,cc=cu/2,cp=Math.min(cg.len/2,cv.len/2),ch=u?(cd=Math.abs(Math.cos(cc)*cf/Math.sin(cc)))>cp?Math.abs((cd=cp)*Math.sin(cc)/Math.cos(cc)):cf:Math.abs((cd=Math.min(cp,cf))*Math.sin(cc)/Math.cos(cc)),r=o.x+cv.nx*cd,i=o.y+cv.ny*cd,cr=r-cv.ny*ch*cs,ci=i+cv.nx*ch*cs,t=o.x+cg.nx*cd,n=o.y+cg.ny*cd,a=o};function cx(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function cw(e,a,o,s){var l=!(arguments.length>4)||void 0===arguments[4]||arguments[4];return 0===s||0===a.radius?{cx:a.x,cy:a.y,radius:0,startX:a.x,startY:a.y,stopX:a.x,stopY:a.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(cb(e,a,o,s,l),{cx:cr,cy:ci,radius:ch,startX:t,startY:n,stopX:r,stopY:i,startAngle:cg.ang+Math.PI/2*cs,endAngle:cv.ang-Math.PI/2*cs,counterClockwise:cl})}var cE=Math.sqrt(.02),cT={};function cC(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t.push({x:r,y:i})}return t}}cT.findMidptPtsEtc=function(e,t){var n,r=t.posPts,i=t.intersectionPts,a=t.vectorNormInverse,o=e.pstyle("source-endpoint"),s=e.pstyle("target-endpoint"),l=null!=o.units&&null!=s.units;switch(e.pstyle("edge-distances").value){case"node-position":n=r;break;case"intersection":n=i;break;case"endpoints":if(l){var u,c,h,d=tp(this.manualEndptToPx(e.source()[0],o),2),f=d[0],p=d[1],g=tp(this.manualEndptToPx(e.target()[0],s),2),v=g[0],y=g[1];u=y-p,h=Math.sqrt((c=v-f)*c+u*u),a={x:-u/h,y:c/h},n={x1:f,y1:p,x2:v,y2:y}}else nk("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),n=i}return{midptPts:n,vectorNormInverse:a}},cT.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,i=r.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},i.target={x:Math.cos(a=2*Math.random()*Math.PI),y:Math.sin(a)}}var o=r.source,s=r.target,l=o.position(),u=s.position(),c=o.width(),h=s.width(),d=o.height(),f=s.height(),p=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+l.x,i.source.y*d*p+l.y,i.target.x*h*p+u.x,i.target.y*f*p+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},cT.findSegmentsPoints=function(e,t){var n=e._private.rscratch,r=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),a=e.pstyle("segment-radii"),o=e.pstyle("radius-type"),s=Math.min(r.pfValue.length,i.pfValue.length),l=a.pfValue[a.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var c=0;c<s;c++){var h=r.pfValue[c],d=i.pfValue[c],f=1-h,p=this.findMidptPtsEtc(e,t),g=p.midptPts,v=p.vectorNormInverse,y={x:g.x1*f+g.x2*h,y:g.y1*f+g.y2*h};n.segpts.push(y.x+v.x*d,y.y+v.y*d),n.radii.push(void 0!==a.pfValue[c]?a.pfValue[c]:l),n.isArcRadius.push((void 0!==o.pfValue[c]?o.pfValue[c]:u)==="arc-radius")}},cT.findLoopPoints=function(e,t,n,r){var i=e._private.rscratch,a=t.dirCounts,o=t.srcPos,s=e.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=n,f=h;r&&(d=0,f=l);var p=u-Math.PI/2,g=p-c/2,v=p+c/2,y=String(u+"_"+c);d=void 0===a[y]?a[y]=0:++a[y],i.ctrlpts=[o.x+1.4*Math.cos(g)*f*(d/3+1),o.y+1.4*Math.sin(g)*f*(d/3+1),o.x+1.4*Math.cos(v)*f*(d/3+1),o.y+1.4*Math.sin(v)*f*(d/3+1)]},cT.findCompoundLoopPoints=function(e,t,n,r){var i=e._private.rscratch;i.edgeType="compound";var a=t.srcPos,o=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),f=d?d.pfValue[0]:void 0,p=n,g=h;r&&(p=0,g=f);var v={x:a.x-s/2,y:a.y-l/2},y={x:o.x-u/2,y:o.y-c/2},b={x:Math.min(v.x,y.x),y:Math.min(v.y,y.y)},x=Math.max(.5,Math.log(.01*s)),w=Math.max(.5,Math.log(.01*u));i.ctrlpts=[b.x,b.y-1.7995514309304248*g*(p/3+1)*x,b.x-1.7995514309304248*g*(p/3+1)*w,b.y]},cT.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},cT.findBezierPoints=function(e,t,n,r,i){var a=e._private.rscratch,o=e.pstyle("control-point-step-size").pfValue,s=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,c=s?s.pfValue[0]:void 0,h=l.value[0];a.edgeType=r?"multibezier":"bezier",a.ctrlpts=[];for(var d=0;d<u;d++){var f=(.5-t.eles.length/2+n)*o*(i?-1:1),p=void 0,g=n7(f);r&&(c=s?s.pfValue[d]:o,h=l.value[d]);var v=void 0!==(p=r?c:void 0!==c?g*c:void 0)?p:f,y=1-h,b=h,x=this.findMidptPtsEtc(e,t),w=x.midptPts,E=x.vectorNormInverse,T={x:w.x1*y+w.x2*b,y:w.y1*y+w.y2*b};a.ctrlpts.push(T.x+E.x*v,T.y+E.y*v)}},cT.findTaxiPoints=function(e,t){var n,r=e._private.rscratch;r.edgeType="segments";var i="vertical",a="horizontal",o="leftward",s="rightward",l="downward",u="upward",c=t.posPts,h=t.srcW,d=t.srcH,f=t.tgtW,p=t.tgtH,g="node-position"!==e.pstyle("edge-distances").value,v=e.pstyle("taxi-direction").value,y=v,b=e.pstyle("taxi-turn"),x="%"===b.units,w=b.pfValue,E=e.pstyle("taxi-turn-min-distance").pfValue,T=c.x2-c.x1,C=c.y2-c.y1,S=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},k=S(T,g?(h+f)/2:0),P=S(C,g?(d+p)/2:0),B=!1;"auto"===y?v=Math.abs(k)>Math.abs(P)?a:i:y===u||y===l?(v=i,B=!0):(y===o||y===s)&&(v=a,B=!0);var A=v===i,D=A?P:k,_=A?C:T,R=n7(_),M=!1;!(B&&(x||w<0))&&(y===l&&_<0||y===u&&_>0||y===o&&_>0||y===s&&_<0)&&(R*=-1,D=R*Math.abs(D),M=!0);var O=function(e){return Math.abs(e)<E||Math.abs(e)>=Math.abs(D)},I=O(n=x?(w<0?1+w:w)*D:(w<0?D:0)+w*R),N=O(Math.abs(D)-Math.abs(n));if((I||N)&&!M)if(A){var L=Math.abs(T)<=f/2;if(Math.abs(_)<=d/2){var z=(c.x1+c.x2)/2;r.segpts=[z,c.y1,z,c.y2]}else if(L){var F=(c.y1+c.y2)/2;r.segpts=[c.x1,F,c.x2,F]}else r.segpts=[c.x1,c.y2]}else{var V=Math.abs(C)<=p/2;if(Math.abs(_)<=h/2){var j=(c.y1+c.y2)/2;r.segpts=[c.x1,j,c.x2,j]}else if(V){var U=(c.x1+c.x2)/2;r.segpts=[U,c.y1,U,c.y2]}else r.segpts=[c.x2,c.y1]}else if(A){var q=c.y1+n+(g?d/2*R:0);r.segpts=[c.x1,q,c.x2,q]}else{var X=c.x1+n+(g?h/2*R:0);r.segpts=[X,c.y1,X,c.y2]}if(r.isRound){var Y=e.pstyle("taxi-radius").value,W="arc-radius"===e.pstyle("radius-type").value[0];r.radii=Array(r.segpts.length/2).fill(Y),r.isArcRadius=Array(r.segpts.length/2).fill(W)}},cT.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if("bezier"===n.edgeType){var r=t.srcPos,i=t.tgtPos,a=t.srcW,o=t.srcH,s=t.tgtW,l=t.tgtH,u=t.srcShape,c=t.tgtShape,h=t.srcCornerRadius,d=t.tgtCornerRadius,f=t.srcRs,p=t.tgtRs,g=!tD(n.startX)||!tD(n.startY),v=!tD(n.arrowStartX)||!tD(n.arrowStartY),y=!tD(n.endX)||!tD(n.endY),b=!tD(n.arrowEndX)||!tD(n.arrowEndY),x=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),w=re({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),E=w<x,T=re({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),C=T<x,S=!1;if(g||v||E){S=!0;var k={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},P=Math.sqrt(k.x*k.x+k.y*k.y),B={x:k.x/P,y:k.y/P},A=Math.max(a,o),D={x:n.ctrlpts[0]+2*B.x*A,y:n.ctrlpts[1]+2*B.y*A},_=u.intersectLine(r.x,r.y,a,o,D.x,D.y,0,h,f);E?(n.ctrlpts[0]=n.ctrlpts[0]+B.x*(x-w),n.ctrlpts[1]=n.ctrlpts[1]+B.y*(x-w)):(n.ctrlpts[0]=_[0]+B.x*x,n.ctrlpts[1]=_[1]+B.y*x)}if(y||b||C){S=!0;var R={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},M=Math.sqrt(R.x*R.x+R.y*R.y),O={x:R.x/M,y:R.y/M},I=Math.max(a,o),N={x:n.ctrlpts[0]+2*O.x*I,y:n.ctrlpts[1]+2*O.y*I},L=c.intersectLine(i.x,i.y,s,l,N.x,N.y,0,d,p);C?(n.ctrlpts[0]=n.ctrlpts[0]+O.x*(x-T),n.ctrlpts[1]=n.ctrlpts[1]+O.y*(x-T)):(n.ctrlpts[0]=L[0]+O.x*x,n.ctrlpts[1]=L[1]+O.y*x)}S&&this.findEndpoints(e)}},cT.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n,r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);(t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0)?(n=t.allpts.length/2-1,t.midX=t.allpts[n],t.midY=t.allpts[n+1]):(n=t.allpts.length/2-3,t.midX=rr(t.allpts[n],t.allpts[n+2],t.allpts[n+4],.5),t.midY=rr(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var i=2;i+3<t.allpts.length;i+=2){var a=t.radii[i/2-1],o=t.isArcRadius[i/2-1];t.roundCorners.push(cw({x:t.allpts[i-2],y:t.allpts[i-1]},{x:t.allpts[i],y:t.allpts[i+1],radius:a},{x:t.allpts[i+2],y:t.allpts[i+3]},a,o))}}if(t.segpts.length%4==0){var s=t.segpts.length/2,l=s-2;t.midX=(t.segpts[l]+t.segpts[s])/2,t.midY=(t.segpts[l+1]+t.segpts[s+1])/2}else{var u=t.segpts.length/2-1;if(t.isRound){var c={x:t.segpts[u],y:t.segpts[u+1]},h=t.roundCorners[u/2];if(0===h.radius){var d={x:t.segpts[u+2],y:t.segpts[u+3]};t.midX=c.x,t.midY=c.y,t.midVector=[c.y-d.y,d.x-c.x]}else{var f=[c.x-h.cx,c.y-h.cy],p=h.radius/Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2));f=f.map(function(e){return e*p}),t.midX=h.cx+f[0],t.midY=h.cy+f[1],t.midVector=f}}else t.midX=t.segpts[u],t.midY=t.segpts[u+1]}}},cT.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||tD(t.startX)&&tD(t.startY)&&tD(t.endX)&&tD(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,nk("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},cT.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var n=this,r=n.cy.hasCompoundNodes(),i=new nz,a=function(e,t){return[].concat(tg(e),[+!!t]).join("-")},o=[],s=[],l=0;l<e.length;l++){var u=e[l],c=u._private,h=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace()){if("haystack"===h){s.push(u);continue}var d="unbundled-bezier"===h||tX(h,"segments")||"straight"===h||"straight-triangle"===h||tX(h,"taxi"),f="unbundled-bezier"===h||"bezier"===h,p=c.source,g=c.target,v=[p.poolIndex(),g.poolIndex()].sort(),y=a(v,d),b=i.get(y);null==b&&(b={eles:[]},o.push({pairId:v,edgeIsUnbundled:d}),i.set(y,b)),b.eles.push(u),d&&(b.hasUnbundled=!0),f&&(b.hasBezier=!0)}}for(var x=0;x<o.length;x++)!function(){var e,s=o[x],l=a(s.pairId,s.edgeIsUnbundled),u=i.get(l);if(!u.hasUnbundled){var c=u.eles[0].parallelEdges().filter(function(e){return e.isBundledBezier()});nM(u.eles),c.forEach(function(e){return u.eles.push(e)}),u.eles.sort(function(e,t){return e.poolIndex()-t.poolIndex()})}var h=u.eles[0],d=h.source(),f=h.target();if(d.poolIndex()>f.poolIndex()){var p=d;d=f,f=p}var g=u.srcPos=d.position(),v=u.tgtPos=f.position(),y=u.srcW=d.outerWidth(),b=u.srcH=d.outerHeight(),w=u.tgtW=f.outerWidth(),E=u.tgtH=f.outerHeight(),T=u.srcShape=n.nodeShapes[t.getNodeShape(d)],C=u.tgtShape=n.nodeShapes[t.getNodeShape(f)],S=u.srcCornerRadius="auto"===d.pstyle("corner-radius").value?"auto":d.pstyle("corner-radius").pfValue,k=u.tgtCornerRadius="auto"===f.pstyle("corner-radius").value?"auto":f.pstyle("corner-radius").pfValue,P=u.tgtRs=f._private.rscratch,B=u.srcRs=d._private.rscratch;u.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var A=0;A<u.eles.length;A++){var D=u.eles[A],_=D[0]._private.rscratch,R=D.pstyle("curve-style").value,M="unbundled-bezier"===R||tX(R,"segments")||tX(R,"taxi"),O=!d.same(D.source());if(!u.calculatedIntersection&&d!==f&&(u.hasBezier||u.hasUnbundled)){u.calculatedIntersection=!0;var I=T.intersectLine(g.x,g.y,y,b,v.x,v.y,0,S,B),N=u.srcIntn=I,L=C.intersectLine(v.x,v.y,w,E,g.x,g.y,0,k,P),z=u.tgtIntn=L,F=u.intersectionPts={x1:I[0],x2:L[0],y1:I[1],y2:L[1]},V=u.posPts={x1:g.x,x2:v.x,y1:g.y,y2:v.y},j=L[1]-I[1],U=L[0]-I[0],q=Math.sqrt(U*U+j*j);tD(q)&&q>=cE||(q=Math.sqrt(Math.max(U*U,.01)+Math.max(j*j,.01)));var X=u.vector={x:U,y:j},Y=u.vectorNorm={x:X.x/q,y:X.y/q},W={x:-Y.y,y:Y.x};u.nodesOverlap=!tD(q)||C.checkPoint(I[0],I[1],0,w,E,v.x,v.y,k,P)||T.checkPoint(L[0],L[1],0,y,b,g.x,g.y,S,B),u.vectorNormInverse=W,e={nodesOverlap:u.nodesOverlap,dirCounts:u.dirCounts,calculatedIntersection:!0,hasBezier:u.hasBezier,hasUnbundled:u.hasUnbundled,eles:u.eles,srcPos:v,srcRs:P,tgtPos:g,tgtRs:B,srcW:w,srcH:E,tgtW:y,tgtH:b,srcIntn:z,tgtIntn:N,srcShape:C,tgtShape:T,posPts:{x1:V.x2,y1:V.y2,x2:V.x1,y2:V.y1},intersectionPts:{x1:F.x2,y1:F.y2,x2:F.x1,y2:F.y1},vector:{x:-X.x,y:-X.y},vectorNorm:{x:-Y.x,y:-Y.y},vectorNormInverse:{x:-W.x,y:-W.y}}}var H=O?e:u;_.nodesOverlap=H.nodesOverlap,_.srcIntn=H.srcIntn,_.tgtIntn=H.tgtIntn,_.isRound=R.startsWith("round"),r&&(d.isParent()||d.isChild()||f.isParent()||f.isChild())&&(d.parents().anySame(f)||f.parents().anySame(d)||d.same(f)&&d.isParent())?t.findCompoundLoopPoints(D,H,A,M):d===f?t.findLoopPoints(D,H,A,M):R.endsWith("segments")?t.findSegmentsPoints(D,H):R.endsWith("taxi")?t.findTaxiPoints(D,H):"straight"!==R&&(M||u.eles.length%2!=1||A!==Math.floor(u.eles.length/2))?t.findBezierPoints(D,H,A,M,O):t.findStraightEdgePoints(D),t.findEndpoints(D),t.tryToCorrectInvalidPoints(D,H),t.checkForInvalidEdgeWarning(D),t.storeAllpts(D),t.storeEdgeProjections(D),t.calculateArrowAngles(D),t.recalculateEdgeLabelProjections(D),t.calculateLabelAngles(D)}}();this.findHaystackPoints(s)}},cT.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if(this.recalculateRenderedStyle(e),"segments"===t.edgeType)return cC(t.segpts)},cT.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var n=t.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return cC(t.ctrlpts)},cT.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var cS={};cS.manualEndptToPx=function(e,t){var n=e.position(),r=e.outerWidth(),i=e.outerHeight(),a=e._private.rscratch;if(2===t.value.length){var o=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(o[0]=o[0]*r),"%"===t.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var s=t.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(r,i),u=[n.x+Math.cos(s)*l,n.y+Math.sin(s)*l];return this.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,r,i,u[0],u[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,a)},cS.findEndpoints=function(e){var t,n,r,i,a,o,s,l,u,c=e.source()[0],h=e.target()[0],d=c.position(),f=h.position(),p=e.pstyle("target-arrow-shape").value,g=e.pstyle("source-arrow-shape").value,v=e.pstyle("target-distance-from-node").pfValue,y=e.pstyle("source-distance-from-node").pfValue,b=c._private.rscratch,x=h._private.rscratch,w=e.pstyle("curve-style").value,E=e._private.rscratch,T=E.edgeType,C=tX(w,"taxi"),S="self"===T||"compound"===T,k="bezier"===T||"multibezier"===T||S,P="bezier"!==T,B="straight"===T||"segments"===T,A="segments"===T,D=S||C,_=e.pstyle("source-endpoint"),R=D?"outside-to-node":_.value,M="auto"===c.pstyle("corner-radius").value?"auto":c.pstyle("corner-radius").pfValue,O=e.pstyle("target-endpoint"),I=D?"outside-to-node":O.value,N="auto"===h.pstyle("corner-radius").value?"auto":h.pstyle("corner-radius").pfValue;E.srcManEndpt=_,E.tgtManEndpt=O;var L=null!=(t=(null==O||null==(n=O.pfValue)?void 0:n.length)===2?O.pfValue:null)?t:[0,0],z=null!=(r=(null==_||null==(i=_.pfValue)?void 0:i.length)===2?_.pfValue:null)?r:[0,0];if(k){var F=[E.ctrlpts[0],E.ctrlpts[1]];o=P?[E.ctrlpts[E.ctrlpts.length-2],E.ctrlpts[E.ctrlpts.length-1]]:F,s=F}else if(B){var V=A?E.segpts.slice(0,2):[f.x+L[0],f.y+L[1]];o=A?E.segpts.slice(E.segpts.length-2):[d.x+z[0],d.y+z[1]],s=V}if("inside-to-node"===I)a=[f.x,f.y];else if(O.units)a=this.manualEndptToPx(h,O);else if("outside-to-line"===I)a=E.tgtIntn;else if("outside-to-node"===I||"outside-to-node-or-label"===I?l=o:("outside-to-line"===I||"outside-to-line-or-label"===I)&&(l=[d.x,d.y]),a=this.nodeShapes[this.getNodeShape(h)].intersectLine(f.x,f.y,h.outerWidth(),h.outerHeight(),l[0],l[1],0,N,x),"outside-to-node-or-label"===I||"outside-to-line-or-label"===I){var j=h._private.rscratch,U=j.labelWidth,q=j.labelHeight,X=j.labelX,Y=j.labelY,W=U/2,H=q/2,G=h.pstyle("text-valign").value;"top"===G?Y-=H:"bottom"===G&&(Y+=H);var K=h.pstyle("text-halign").value;"left"===K?X-=W:"right"===K&&(X+=W);var Z=rL(l[0],l[1],[X-W,Y-H,X+W,Y-H,X+W,Y+H,X-W,Y+H],f.x,f.y);if(Z.length>0){var $=rt(d,n2(a)),Q=rt(d,n2(Z)),J=$;Q<$&&(a=Z,J=Q),Z.length>2&&rt(d,{x:Z[2],y:Z[3]})<J&&(a=[Z[2],Z[3]])}}var ee=rF(a,o,this.arrowShapes[p].spacing(e)+v),et=rF(a,o,this.arrowShapes[p].gap(e)+v);if(E.endX=et[0],E.endY=et[1],E.arrowEndX=ee[0],E.arrowEndY=ee[1],"inside-to-node"===R)a=[d.x,d.y];else if(_.units)a=this.manualEndptToPx(c,_);else if("outside-to-line"===R)a=E.srcIntn;else if("outside-to-node"===R||"outside-to-node-or-label"===R?u=s:("outside-to-line"===R||"outside-to-line-or-label"===R)&&(u=[f.x,f.y]),a=this.nodeShapes[this.getNodeShape(c)].intersectLine(d.x,d.y,c.outerWidth(),c.outerHeight(),u[0],u[1],0,M,b),"outside-to-node-or-label"===R||"outside-to-line-or-label"===R){var en=c._private.rscratch,er=en.labelWidth,ei=en.labelHeight,ea=en.labelX,eo=en.labelY,es=er/2,el=ei/2,eu=c.pstyle("text-valign").value;"top"===eu?eo-=el:"bottom"===eu&&(eo+=el);var ec=c.pstyle("text-halign").value;"left"===ec?ea-=es:"right"===ec&&(ea+=es);var eh=rL(u[0],u[1],[ea-es,eo-el,ea+es,eo-el,ea+es,eo+el,ea-es,eo+el],d.x,d.y);if(eh.length>0){var ed=rt(f,n2(a)),ef=rt(f,n2(eh)),ep=ed;ef<ed&&(a=[eh[0],eh[1]],ep=ef),eh.length>2&&rt(f,{x:eh[2],y:eh[3]})<ep&&(a=[eh[2],eh[3]])}}var eg=rF(a,s,this.arrowShapes[g].spacing(e)+y),ev=rF(a,s,this.arrowShapes[g].gap(e)+y);E.startX=ev[0],E.startY=ev[1],E.arrowStartX=eg[0],E.arrowStartY=eg[1],(k||P||B)&&(tD(E.startX)&&tD(E.startY)&&tD(E.endX)&&tD(E.endY)?E.badLine=!1:E.badLine=!0)},cS.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;return(this.recalculateRenderedStyle(e),"haystack"===t.edgeType)?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},cS.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;return(this.recalculateRenderedStyle(e),"haystack"===t.edgeType)?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}};var ck={};ck.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){t.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)!function(e,t,n){for(var r=function(e,t,n,r){return rr(e,t,n,r)},i=t._private.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var o=e.bezierProjPcts[a];i.push({x:r(n[0],n[2],n[4],o),y:r(n[1],n[3],n[5],o)})}}(this,e,n.allpts.slice(i,i+6))}else if("segments"===r)for(var a=t.rstyle.linePts=[],i=0;i+1<n.allpts.length;i+=2)a.push({x:n.allpts[i],y:n.allpts[i+1]});else if("haystack"===r){var o=n.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},ck.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var cP={};cP.recalculateNodeLabelProjection=function(e){var t,n;if(!tL(e.pstyle("label").strValue)){var r=e._private,i=e.width(),a=e.height(),o=e.padding(),s=e.position(),l=e.pstyle("text-halign").strValue,u=e.pstyle("text-valign").strValue,c=r.rscratch,h=r.rstyle;switch(l){case"left":t=s.x-i/2-o;break;case"right":t=s.x+i/2+o;break;default:t=s.x}switch(u){case"top":n=s.y-a/2-o;break;case"bottom":n=s.y+a/2+o;break;default:n=s.y}c.labelX=t,c.labelY=n,h.labelX=t,h.labelY=n,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var cB=function(e,t){var n=Math.atan(t/e);return 0===e&&n<0&&(n*=-1),n},cA=function(e,t){return cB(t.x-e.x,t.y-e.y)},cD=function(e,t,n,r){var i=ro(0,r-.001,1),a=ro(0,r+.001,1);return cA(ri(e,t,n,i),ri(e,t,n,a))};cP.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,i=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:r.midX,y:r.midY};var o=function(e,t,r){nN(n.rscratch,e,t,r),nN(n.rstyle,e,t,r)};o("labelX",null,t.x),o("labelY",null,t.y),o("labelAutoAngle",null,cB(r.midDispX,r.midDispY));var s=function(){if(s.cache)return s.cache;for(var e=[],t=0;t+5<r.allpts.length;t+=4){var a={x:r.allpts[t],y:r.allpts[t+1]},o={x:r.allpts[t+2],y:r.allpts[t+3]},l={x:r.allpts[t+4],y:r.allpts[t+5]};e.push({p0:a,p1:o,p2:l,startDist:0,length:0,segments:[]})}var u=n.rstyle.bezierPts,c=i.bezierProjPcts.length;function h(e,t,n,r,i){var a=re(t,n),o=e.segments[e.segments.length-1],s={p0:t,p1:n,t0:r,t1:i,startDist:o?o.startDist+o.length:0,length:a};e.segments.push(s),e.length+=a}for(var d=0;d<e.length;d++){var f=e[d],p=e[d-1];p&&(f.startDist=p.startDist+p.length),h(f,f.p0,u[d*c],0,i.bezierProjPcts[0]);for(var g=0;g<c-1;g++)h(f,u[d*c+g],u[d*c+g+1],i.bezierProjPcts[g],i.bezierProjPcts[g+1]);h(f,u[d*c+c-1],f.p2,i.bezierProjPcts[c-1],1)}return s.cache=e},l=function(n){var i="source"===n;if(a[n]){var l=e.pstyle(n+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var u,c,h=s(),d=0,f=0,p=0;p<h.length;p++){for(var g=h[i?p:h.length-1-p],v=0;v<g.segments.length;v++){var y=g.segments[i?v:g.segments.length-1-v],b=p===h.length-1&&v===g.segments.length-1;if(d=f,(f+=y.length)>=l||b){c={cp:g,segment:y};break}}if(c)break}var x=c.cp,w=c.segment,E=(l-d)/w.length,T=w.t1-w.t0,C=i?w.t0+T*E:w.t1-T*E;C=ro(0,C,1),t=ri(x.p0,x.p1,x.p2,C),u=cD(x.p0,x.p1,x.p2,C);break;case"straight":case"segments":case"haystack":for(var S,k,P,B,A=0,D=r.allpts.length,_=0;_+3<D&&(i?(S={x:r.allpts[_],y:r.allpts[_+1]},k={x:r.allpts[_+2],y:r.allpts[_+3]}):(S={x:r.allpts[D-2-_],y:r.allpts[D-1-_]},k={x:r.allpts[D-4-_],y:r.allpts[D-3-_]}),P=re(S,k),B=A,!((A+=P)>=l));_+=2);var R=(l-B)/P;t=ra(S,k,R=ro(0,R,1)),u=cA(S,k)}o("labelX",n,t.x),o("labelY",n,t.y),o("labelAutoAngle",n,u)}};l("source"),l("target"),this.applyLabelDimensions(e)}},cP.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},cP.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),i=nf(r,e._private.labelDimsKey);if(nI(n.rscratch,"prefixedLabelDimsKey",t)!==i){nN(n.rscratch,"prefixedLabelDimsKey",t,i);var a=this.calculateLabelDimensions(e,r),o=e.pstyle("line-height").pfValue,s=e.pstyle("text-wrap").strValue,l=nI(n.rscratch,"labelWrapCachedLines",t)||[],u="wrap"!==s?1:Math.max(l.length,1),c=a.height/u,h=a.width,d=a.height+(u-1)*(o-1)*c;nN(n.rstyle,"labelWidth",t,h),nN(n.rscratch,"labelWidth",t,h),nN(n.rstyle,"labelHeight",t,d),nN(n.rscratch,"labelHeight",t,d),nN(n.rscratch,"labelLineHeight",t,c*o)}},cP.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",i=e.pstyle(r+"label").strValue,a=e.pstyle("text-transform").value,o=function(e,r){return r?(nN(n.rscratch,e,t,r),r):nI(n.rscratch,e,t)};if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var s=e.pstyle("text-wrap").value;if("wrap"===s){var l=o("labelKey");if(null!=l&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u=i.split("\n"),c=e.pstyle("text-max-width").pfValue,h="anywhere"===e.pstyle("text-overflow-wrap").value,d=[],f=/[\s\u200b]+|$/g,p=0;p<u.length;p++){var g=u[p],v=this.calculateLabelDimensions(e,g).width;if(h&&(g=g.split("").join("")),v>c){var y,b=g.matchAll(f),x="",w=0,E=td(b);try{for(E.s();!(y=E.n()).done;){var T=y.value,C=T[0],S=g.substring(w,T.index);w=T.index+C.length;var k=0===x.length?S:x+S+C;this.calculateLabelDimensions(e,k).width<=c?x+=S+C:(x&&d.push(x),x=S+C)}}catch(e){E.e(e)}finally{E.f()}x.match(/^[\s\u200b]+$/)||d.push(x)}else d.push(g)}o("labelWrapCachedLines",d),i=o("labelWrapCachedText",d.join("\n")),o("labelWrapKey",l)}else if("ellipsis"===s){var P=e.pstyle("text-max-width").pfValue,B="",A=!1;if(this.calculateLabelDimensions(e,i).width<P)return i;for(var D=0;D<i.length&&!(this.calculateLabelDimensions(e,B+i[D]+"").width>P);D++)B+=i[D],D===i.length-1&&(A=!0);return A||(B+=""),B}return i},cP.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},cP.calculateLabelDimensions=function(e,t){var n=this.cy.window().document,r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue,a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=this.labelCalcCanvas,l=this.labelCalcCanvasContext;if(!s){s=this.labelCalcCanvas=n.createElement("canvas"),l=this.labelCalcCanvasContext=s.getContext("2d");var u=s.style;u.position="absolute",u.left="-9999px",u.top="-9999px",u.zIndex="-1",u.visibility="hidden",u.pointerEvents="none"}l.font="".concat(r," ").concat(o," ").concat(i,"px ").concat(a);for(var c=0,h=0,d=t.split("\n"),f=0;f<d.length;f++){var p=d[f];c=Math.max(Math.ceil(l.measureText(p).width),c),h+=i}return{width:c+=0,height:h+=0}},cP.calculateLabelAngle=function(e,t){var n=e._private.rscratch,r=e.isEdge(),i=e.pstyle((t?t+"-":"")+"text-rotation"),a=i.strValue;return"none"===a?0:r&&"autorotate"===a?n.labelAutoAngle:"autorotate"===a?0:i.pfValue},cP.calculateLabelAngles=function(e){var t=e.isEdge(),n=e._private.rscratch;n.labelAngle=this.calculateLabelAngle(e),t&&(n.sourceLabelAngle=this.calculateLabelAngle(e,"source"),n.targetLabelAngle=this.calculateLabelAngle(e,"target"))};var c_={},cR=!1;c_.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(28>e.width()||28>e.height()))return cR||(nk("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),cR=!0),"rectangle";if(e.isParent())if("rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t)return t;else return"rectangle";if("polygon"===t){var n=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return t};var cM={};cM.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),n=this,r=function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t.merge(e),n)for(var r=0;r<e.length;r++){var i=e[r]._private.rstyle;i.clean=!1,i.cleanConnected=!1}};n.binder(e).on("bounds.* dirty.*",function(e){r(e.target)}).on("style.* background.*",function(e){r(e.target,!1)});var i=function(i){if(i){var a=n.onUpdateEleCalcsFns;t.cleanStyle();for(var o=0;o<t.length;o++){var s=t[o],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(r(s.connectedEdges()),l.cleanConnected=!0)}if(a)for(var u=0;u<a.length;u++)(0,a[u])(i,t);n.recalculateRenderedStyle(t),t=e.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},cM.onUpdateEleCalcs=function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},cM.recalculateRenderedStyle=function(e,t){var n=function(e){return e._private.rstyle.cleanConnected};if(0!==e.length){var r=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var a=0;a<e.length;a++){var o=e[a],s=o._private,l=s.rstyle;!o.isEdge()||n(o.source())&&n(o.target())||(l.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(e){return!e._private.rstyle.clean&&e.isBundledBezier()})&&(l.clean=!1),t&&l.clean||o.removed()||"none"!==o.pstyle("display").value&&("nodes"===s.group?i.push(o):r.push(o),l.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],h=c._private.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var f=0;f<r.length;f++){var p=r[f]._private,g=p.rstyle,v=p.rscratch;g.srcX=v.arrowStartX,g.srcY=v.arrowStartY,g.tgtX=v.arrowEndX,g.tgtY=v.arrowEndY,g.midX=v.midX,g.midY=v.midY,g.labelAngle=v.labelAngle,g.sourceLabelAngle=v.sourceLabelAngle,g.targetLabelAngle=v.targetLabelAngle}}}};var cO={};cO.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?t.push(r):i.inDragLayer?e.drag.push(r):e.nondrag.push(r)}for(var n=0;n<t.length;n++){var r=t[n];e.drag.push(r)}}},cO.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},cO.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(op),t.interactive=t.filter(function(e){return e.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var cI={};[sH,sG,cT,cS,ck,cP,c_,cM,cO].forEach(function(e){t$(cI,e)});var cN={};cN.getCachedImage=function(e,t,n){var r=this.imageCache=this.imageCache||{},i=r[e];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var a=(i=r[e]=r[e]||{}).image=new Image;a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0});var o="data:";return e.substring(0,o.length).toLowerCase()!==o&&(a.crossOrigin=t="null"===t?null:t),a.src=e,a};var cL={};cL.registerBinding=function(e,t,n,r){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var a=[],o=0;o<e.length;o++){var s=e[o];if(void 0!==s){var l=this.binder(s);a.push(l.on.apply(l,i))}}return a}var l=this.binder(e);return l.on.apply(l,i)},cL.binder=function(e){var t=this,n=t.cy.window(),r=e===n||e===n.document||e===n.document.body||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement;if(null==t.supportsPassiveEvents){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});n.addEventListener("test",null,a)}catch(e){}t.supportsPassiveEvents=i}var o=function(n,i,a){var o=Array.prototype.slice.call(arguments);return r&&t.supportsPassiveEvents&&(o[2]={capture:null!=a&&a,passive:!1,once:!1}),t.bindings.push({target:e,args:o}),(e.addEventListener||e.on).apply(e,o),this};return{on:o,addEventListener:o,addListener:o,bind:o}},cL.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},cL.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},cL.load=function(){var e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,g,v,y,b,x,w,E,T,C,S,k=this,P=k.cy.window(),B=function(e){return e.selected()},A=function(e,t,n,r){null==e&&(e=k.cy);for(var i=0;i<t.length;i++){var a=t[i];e.emit({originalEvent:n,type:a,position:r})}},D=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},_=function(e,t){var n=!0;if(k.cy.hasCompoundNodes()&&e&&e.pannable())for(var r=0;t&&r<t.length;r++){var e=t[r];if(e.isNode()&&e.isParent()&&!e.pannable()){n=!1;break}}else n=!0;return n},R=function(e){e[0]._private.grabbed=!0},M=function(e){e[0]._private.grabbed=!1},O=function(e){e[0]._private.rscratch.inDragLayer=!0},I=function(e){e[0]._private.rscratch.inDragLayer=!1},N=function(e){e[0]._private.rscratch.isGrabTarget=!0},L=function(e){e[0]._private.rscratch.isGrabTarget=!1},z=function(e,t){var n=t.addToList;!n.has(e)&&e.grabbable()&&!e.locked()&&(n.merge(e),R(e))},F=function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var n=e.descendants();t.inDragLayer&&(n.forEach(O),n.connectedEdges().forEach(O)),t.addToList&&z(n,t)}},V=function(e,t){t=t||{};var n=e.cy().hasCompoundNodes();t.inDragLayer&&(e.forEach(O),e.neighborhood().stdFilter(function(e){return!n||e.isEdge()}).forEach(O)),t.addToList&&e.forEach(function(e){z(e,t)}),F(e,t),U(e,{inDragLayer:t.inDragLayer}),k.updateCachedGrabbedEles()},j=function(e){e&&(k.getCachedZSortedEles().forEach(function(e){M(e),I(e),L(e)}),k.updateCachedGrabbedEles())},U=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var n=e.ancestors().orphans();if(!n.same(e)){var r=n.descendants().spawnSelf().merge(n).unmerge(e).unmerge(e.descendants()),i=r.connectedEdges();t.inDragLayer&&(i.forEach(O),r.forEach(O)),t.addToList&&r.forEach(function(e){z(e,t)})}}},q=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},X="undefined"!=typeof MutationObserver,Y="undefined"!=typeof ResizeObserver;X?(k.removeObserver=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var n=e[t].removedNodes;if(n){for(var r=0;r<n.length;r++)if(n[r]===k.container){k.destroy();break}}}}),k.container.parentNode&&k.removeObserver.observe(k.container.parentNode,{childList:!0})):k.registerBinding(k.container,"DOMNodeRemoved",function(e){k.destroy()});var W=nn(function(){k.cy.resize()},100);X&&(k.styleObserver=new MutationObserver(W),k.styleObserver.observe(k.container,{attributes:!0})),k.registerBinding(P,"resize",W),Y&&(k.resizeObserver=new ResizeObserver(W),k.resizeObserver.observe(k.container));for(var H=function(){k.invalidateContainerClientCoordsCache()},G=k.container;null!=G;){e=G,k.registerBinding(e,"transitionend",H),k.registerBinding(e,"animationend",H),k.registerBinding(e,"scroll",H),G=G.parentNode}k.registerBinding(k.container,"contextmenu",function(e){e.preventDefault()});var K=function(e){for(var t=k.findContainerClientCoords(),n=t[0],r=t[1],i=t[2],a=t[3],o=e.touches?e.touches:[e],s=!1,l=0;l<o.length;l++){var u=o[l];if(n<=u.clientX&&u.clientX<=n+i&&r<=u.clientY&&u.clientY<=r+a){s=!0;break}}if(!s)return!1;for(var c=k.container,h=e.target.parentNode,d=!1;h;){if(h===c){d=!0;break}h=h.parentNode}return!!d};k.registerBinding(k.container,"mousedown",function(e){if(K(e)&&(1!==k.hoverData.which||1===e.which)){e.preventDefault(),q(),k.hoverData.capture=!0,k.hoverData.which=e.which;var t=k.cy,n=[e.clientX,e.clientY],r=k.projectIntoViewport(n[0],n[1]),i=k.selection,a=k.findNearestElements(r[0],r[1],!0,!1),o=a[0],s=k.dragData.possibleDragElements;k.hoverData.mdownPos=r,k.hoverData.mdownGPos=n;var l=function(t){return{originalEvent:e,type:t,position:{x:r[0],y:r[1]}}};if(3==e.which){k.hoverData.cxtStarted=!0;var u={originalEvent:e,type:"cxttapstart",position:{x:r[0],y:r[1]}};o?(o.activate(),o.emit(u),k.hoverData.down=o):t.emit(u),k.hoverData.downTime=new Date().getTime(),k.hoverData.cxtDragged=!1}else if(1==e.which){if(o&&o.activate(),null!=o&&k.nodeIsGrabbable(o)){if(N(o),o.selected()){s=k.dragData.possibleDragElements=t.collection();var c=t.$(function(e){return e.isNode()&&e.selected()&&k.nodeIsGrabbable(e)});V(c,{addToList:s}),o.emit(l("grabon")),c.forEach(function(e){e.emit(l("grab"))})}else V(o,{addToList:s=k.dragData.possibleDragElements=t.collection()}),o.emit(l("grabon")).emit(l("grab"));k.redrawHint("eles",!0),k.redrawHint("drag",!0)}k.hoverData.down=o,k.hoverData.downs=a,k.hoverData.downTime=new Date().getTime(),A(o,["mousedown","tapstart","vmousedown"],e,{x:r[0],y:r[1]}),null==o?(i[4]=1,k.data.bgActivePosistion={x:r[0],y:r[1]},k.redrawHint("select",!0),k.redraw()):o.pannable()&&(i[4]=1),k.hoverData.tapholdCancelled=!1,clearTimeout(k.hoverData.tapholdTimeout),k.hoverData.tapholdTimeout=setTimeout(function(){if(!k.hoverData.tapholdCancelled){var e=k.hoverData.down;e?e.emit(l("taphold")):t.emit(l("taphold"))}},k.tapholdDuration)}i[0]=i[2]=r[0],i[1]=i[3]=r[1]}},!1);var Z=function(e){var t=e.getRootNode();if(t&&11===t.nodeType&&void 0!==t.host)return t}(k.container);k.registerBinding([P,Z],"mousemove",function(e){var t,n;if(k.hoverData.capture||K(e)){var r=!1,i=k.cy,a=i.zoom(),o=[e.clientX,e.clientY],s=k.projectIntoViewport(o[0],o[1]),l=k.hoverData.mdownPos,u=k.hoverData.mdownGPos,c=k.selection,h=null;k.hoverData.draggingEles||k.hoverData.dragging||k.hoverData.selecting||(h=k.findNearestElement(s[0],s[1],!0,!1));var d=k.hoverData.last,f=k.hoverData.down,p=[s[0]-c[2],s[1]-c[3]],g=k.dragData.possibleDragElements;if(u){var v=o[0]-u[0],y=o[1]-u[1];k.hoverData.isOverThresholdDrag=t=v*v+y*y>=k.desktopTapThreshold2}var b=D(e);t&&(k.hoverData.tapholdCancelled=!0),r=!0,A(h,["mousemove","vmousemove","tapdrag"],e,{x:s[0],y:s[1]});var x=function(t){return{originalEvent:e,type:t,position:{x:s[0],y:s[1]}}},w=function(){k.data.bgActivePosistion=void 0,k.hoverData.selecting||i.emit(x("boxstart")),c[4]=1,k.hoverData.selecting=!0,k.redrawHint("select",!0),k.redraw()};if(3===k.hoverData.which){if(t){var E=x("cxtdrag");f?f.emit(E):i.emit(E),k.hoverData.cxtDragged=!0,(!k.hoverData.cxtOver||h!==k.hoverData.cxtOver)&&(k.hoverData.cxtOver&&k.hoverData.cxtOver.emit(x("cxtdragout")),k.hoverData.cxtOver=h,h&&h.emit(x("cxtdragover")))}}else if(k.hoverData.dragging){if(r=!0,i.panningEnabled()&&i.userPanningEnabled()){if(k.hoverData.justStartedPan){var T=k.hoverData.mdownPos;n={x:(s[0]-T[0])*a,y:(s[1]-T[1])*a},k.hoverData.justStartedPan=!1}else n={x:p[0]*a,y:p[1]*a};i.panBy(n),i.emit(x("dragpan")),k.hoverData.dragged=!0}s=k.projectIntoViewport(e.clientX,e.clientY)}else if(1==c[4]&&(null==f||f.pannable()))t&&(!k.hoverData.dragging&&i.boxSelectionEnabled()&&(b||!i.panningEnabled()||!i.userPanningEnabled())?w():!k.hoverData.selecting&&i.panningEnabled()&&i.userPanningEnabled()&&_(f,k.hoverData.downs)&&(k.hoverData.dragging=!0,k.hoverData.justStartedPan=!0,c[4]=0,k.data.bgActivePosistion=n2(l),k.redrawHint("select",!0),k.redraw()),f&&f.pannable()&&f.active()&&f.unactivate());else{if(f&&f.pannable()&&f.active()&&f.unactivate(),f&&f.grabbed()||h==d||(d&&A(d,["mouseout","tapdragout"],e,{x:s[0],y:s[1]}),h&&A(h,["mouseover","tapdragover"],e,{x:s[0],y:s[1]}),k.hoverData.last=h),f)if(t){if(i.boxSelectionEnabled()&&b)f&&f.grabbed()&&(j(g),f.emit(x("freeon")),g.emit(x("free")),k.dragData.didDrag&&(f.emit(x("dragfreeon")),g.emit(x("dragfree")))),w();else if(f&&f.grabbed()&&k.nodeIsDraggable(f)){var C,S=!k.dragData.didDrag;S&&k.redrawHint("eles",!0),k.dragData.didDrag=!0,k.hoverData.draggingEles||V(g,{inDragLayer:!0});var P={x:0,y:0};if(tD(p[0])&&tD(p[1])&&(P.x+=p[0],P.y+=p[1],S)){var B=k.hoverData.dragDelta;B&&tD(B[0])&&tD(B[1])&&(P.x+=B[0],P.y+=B[1])}k.hoverData.draggingEles=!0,g.silentShift(P).emit(x("position")).emit(x("drag")),k.redrawHint("drag",!0),k.redraw()}}else 0===(C=k.hoverData.dragDelta=k.hoverData.dragDelta||[]).length?(C.push(p[0]),C.push(p[1])):(C[0]+=p[0],C[1]+=p[1]);r=!0}if(c[2]=s[0],c[3]=s[1],r)return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}},!1),k.registerBinding(P,"mouseup",function(e){if((1!==k.hoverData.which||1===e.which||!k.hoverData.capture)&&k.hoverData.capture){k.hoverData.capture=!1;var i=k.cy,a=k.projectIntoViewport(e.clientX,e.clientY),o=k.selection,s=k.findNearestElement(a[0],a[1],!0,!1),l=k.dragData.possibleDragElements,u=k.hoverData.down,c=D(e);k.data.bgActivePosistion&&(k.redrawHint("select",!0),k.redraw()),k.hoverData.tapholdCancelled=!0,k.data.bgActivePosistion=void 0,u&&u.unactivate();var h=function(t){return{originalEvent:e,type:t,position:{x:a[0],y:a[1]}}};if(3===k.hoverData.which){var d=h("cxttapend");if(u?u.emit(d):i.emit(d),!k.hoverData.cxtDragged){var f=h("cxttap");u?u.emit(f):i.emit(f)}k.hoverData.cxtDragged=!1,k.hoverData.which=null}else if(1===k.hoverData.which){if(A(s,["mouseup","tapend","vmouseup"],e,{x:a[0],y:a[1]}),k.dragData.didDrag||k.hoverData.dragged||k.hoverData.selecting||k.hoverData.isOverThresholdDrag||(A(u,["click","tap","vclick"],e,{x:a[0],y:a[1]}),n=!1,e.timeStamp-r<=i.multiClickDebounceTime()?(t&&clearTimeout(t),n=!0,r=null,A(u,["dblclick","dbltap","vdblclick"],e,{x:a[0],y:a[1]})):(t=setTimeout(function(){n||A(u,["oneclick","onetap","voneclick"],e,{x:a[0],y:a[1]})},i.multiClickDebounceTime()),r=e.timeStamp)),null!=u||k.dragData.didDrag||k.hoverData.selecting||k.hoverData.dragged||D(e)||(i.$(B).unselect(["tapunselect"]),l.length>0&&k.redrawHint("eles",!0),k.dragData.possibleDragElements=l=i.collection()),s!=u||k.dragData.didDrag||k.hoverData.selecting||null==s||!s._private.selectable||(k.hoverData.dragging||("additive"===i.selectionType()||c?s.selected()?s.unselect(["tapunselect"]):s.select(["tapselect"]):c||(i.$(B).unmerge(s).unselect(["tapunselect"]),s.select(["tapselect"]))),k.redrawHint("eles",!0)),k.hoverData.selecting){var p=i.collection(k.getAllInBox(o[0],o[1],o[2],o[3]));k.redrawHint("select",!0),p.length>0&&k.redrawHint("eles",!0),i.emit(h("boxend"));"additive"===i.selectionType()||c||i.$(B).unmerge(p).unselect(),p.emit(h("box")).stdFilter(function(e){return e.selectable()&&!e.selected()}).select().emit(h("boxselect")),k.redraw()}if(k.hoverData.dragging&&(k.hoverData.dragging=!1,k.redrawHint("select",!0),k.redrawHint("eles",!0),k.redraw()),!o[4]){k.redrawHint("drag",!0),k.redrawHint("eles",!0);var g=u&&u.grabbed();j(l),g&&(u.emit(h("freeon")),l.emit(h("free")),k.dragData.didDrag&&(u.emit(h("dragfreeon")),l.emit(h("dragfree"))))}}o[4]=0,k.hoverData.down=null,k.hoverData.cxtStarted=!1,k.hoverData.draggingEles=!1,k.hoverData.selecting=!1,k.hoverData.isOverThresholdDrag=!1,k.dragData.didDrag=!1,k.hoverData.dragged=!1,k.hoverData.dragDelta=[],k.hoverData.mdownPos=null,k.hoverData.mdownGPos=null,k.hoverData.which=null}},!1);var $=[],Q=1e5,J=function(e,t){for(var n=0;n<e.length;n++)if(e[n]%t!=0)return!1;return!0},ee=function(e){for(var t=Math.abs(e[0]),n=1;n<e.length;n++)if(Math.abs(e[n])!==t)return!1;return!0},et=function(e){var t=!1,n=e.deltaY;if(null==n&&(null!=e.wheelDeltaY?n=e.wheelDeltaY/4:null!=e.wheelDelta&&(n=e.wheelDelta/4)),0!==n){if(null==i)if($.length>=4){if(!(i=J($,5))){var r=Math.abs($[0]);i=ee($)&&r>5}if(i)for(var a=0;a<$.length;a++)Q=Math.min(Math.abs($[a]),Q)}else $.push(n),t=!0;else i&&(Q=Math.min(Math.abs(n),Q));if(!k.scrollingPage){var o=k.cy,s=o.zoom(),l=o.pan(),u=k.projectIntoViewport(e.clientX,e.clientY),c=[u[0]*s+l.x,u[1]*s+l.y];if(k.hoverData.draggingEles||k.hoverData.dragging||k.hoverData.cxtStarted||0!==k.selection[4])return void e.preventDefault();if(o.panningEnabled()&&o.userPanningEnabled()&&o.zoomingEnabled()&&o.userZoomingEnabled()){e.preventDefault(),k.data.wheelZooming=!0,clearTimeout(k.data.wheelTimeout),k.data.wheelTimeout=setTimeout(function(){k.data.wheelZooming=!1,k.redrawHint("eles",!0),k.redraw()},150),t&&Math.abs(n)>5&&(n=5*n7(n)),h=-(n/250),i&&(h/=Q,h*=3),h*=k.wheelSensitivity,1===e.deltaMode&&(h*=33);var h,d=o.zoom()*Math.pow(10,h);"gesturechange"===e.type&&(d=k.gestureStartZoom*e.scale),o.zoom({level:d,renderedPosition:{x:c[0],y:c[1]}}),o.emit({type:"gesturechange"===e.type?"pinchzoom":"scrollzoom",originalEvent:e,position:{x:u[0],y:u[1]}})}}}};k.registerBinding(k.container,"wheel",et,!0),k.registerBinding(P,"scroll",function(e){k.scrollingPage=!0,clearTimeout(k.scrollingPageTimeout),k.scrollingPageTimeout=setTimeout(function(){k.scrollingPage=!1},250)},!0),k.registerBinding(k.container,"gesturestart",function(e){k.gestureStartZoom=k.cy.zoom(),k.hasTouchStarted||e.preventDefault()},!0),k.registerBinding(k.container,"gesturechange",function(e){k.hasTouchStarted||et(e)},!0),k.registerBinding(k.container,"mouseout",function(e){var t=k.projectIntoViewport(e.clientX,e.clientY);k.cy.emit({originalEvent:e,type:"mouseout",position:{x:t[0],y:t[1]}})},!1),k.registerBinding(k.container,"mouseover",function(e){var t=k.projectIntoViewport(e.clientX,e.clientY);k.cy.emit({originalEvent:e,type:"mouseover",position:{x:t[0],y:t[1]}})},!1);var en=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},er=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};if(k.registerBinding(k.container,"touchstart",b=function(e){if(k.hasTouchStarted=!0,K(e)){q(),k.touchData.capture=!0,k.data.bgActivePosistion=void 0;var t=k.cy,n=k.touchData.now,r=k.touchData.earlier;if(e.touches[0]){var i=k.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);n[0]=i[0],n[1]=i[1]}if(e.touches[1]){var i=k.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);n[2]=i[0],n[3]=i[1]}if(e.touches[2]){var i=k.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);n[4]=i[0],n[5]=i[1]}var b=function(t){return{originalEvent:e,type:t,position:{x:n[0],y:n[1]}}};if(e.touches[1]){k.touchData.singleTouchMoved=!0,j(k.dragData.touchDragEles);var x=k.findContainerClientCoords();f=x[0],p=x[1],g=x[2],v=x[3],a=e.touches[0].clientX-f,o=e.touches[0].clientY-p,s=e.touches[1].clientX-f,l=e.touches[1].clientY-p,y=0<=a&&a<=g&&0<=s&&s<=g&&0<=o&&o<=v&&0<=l&&l<=v;var w=t.pan(),E=t.zoom();if(u=en(a,o,s,l),c=er(a,o,s,l),d=[((h=[(a+s)/2,(o+l)/2])[0]-w.x)/E,(h[1]-w.y)/E],c<4e4&&!e.touches[2]){var T=k.findNearestElement(n[0],n[1],!0,!0),C=k.findNearestElement(n[2],n[3],!0,!0);T&&T.isNode()?(T.activate().emit(b("cxttapstart")),k.touchData.start=T):C&&C.isNode()?(C.activate().emit(b("cxttapstart")),k.touchData.start=C):t.emit(b("cxttapstart")),k.touchData.start&&(k.touchData.start._private.grabbed=!1),k.touchData.cxt=!0,k.touchData.cxtDragged=!1,k.data.bgActivePosistion=void 0,k.redraw();return}}if(e.touches[2])t.boxSelectionEnabled()&&e.preventDefault();else if(e.touches[1]);else if(e.touches[0]){var S=k.findNearestElements(n[0],n[1],!0,!0),P=S[0];if(null!=P&&(P.activate(),k.touchData.start=P,k.touchData.starts=S,k.nodeIsGrabbable(P))){var B=k.dragData.touchDragEles=t.collection(),D=null;k.redrawHint("eles",!0),k.redrawHint("drag",!0),P.selected()?V(D=t.$(function(e){return e.selected()&&k.nodeIsGrabbable(e)}),{addToList:B}):V(P,{addToList:B}),N(P),P.emit(b("grabon")),D?D.forEach(function(e){e.emit(b("grab"))}):P.emit(b("grab"))}A(P,["touchstart","tapstart","vmousedown"],e,{x:n[0],y:n[1]}),null==P&&(k.data.bgActivePosistion={x:i[0],y:i[1]},k.redrawHint("select",!0),k.redraw()),k.touchData.singleTouchMoved=!1,k.touchData.singleTouchStartTime=+new Date,clearTimeout(k.touchData.tapholdTimeout),k.touchData.tapholdTimeout=setTimeout(function(){!1!==k.touchData.singleTouchMoved||k.pinching||k.touchData.selecting||A(k.touchData.start,["taphold"],e,{x:n[0],y:n[1]})},k.tapholdDuration)}if(e.touches.length>=1){for(var _=k.touchData.startPosition=[null,null,null,null,null,null],R=0;R<n.length;R++)_[R]=r[R]=n[R];var M=e.touches[0];k.touchData.startGPosition=[M.clientX,M.clientY]}}},!1),k.registerBinding(P,"touchmove",x=function(e){var t=k.touchData.capture;if(t||K(e)){var n=k.selection,r=k.cy,i=k.touchData.now,h=k.touchData.earlier,g=r.zoom();if(e.touches[0]){var v=k.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=v[0],i[1]=v[1]}if(e.touches[1]){var v=k.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);i[2]=v[0],i[3]=v[1]}if(e.touches[2]){var v=k.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);i[4]=v[0],i[5]=v[1]}var b=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}},x=k.touchData.startGPosition;if(t&&e.touches[0]&&x){for(var w=[],E=0;E<i.length;E++)w[E]=i[E]-h[E];var T=e.touches[0].clientX-x[0],C=T*T,S=e.touches[0].clientY-x[1];et=C+S*S>=k.touchTapThreshold2}if(t&&k.touchData.cxt){e.preventDefault();var P=e.touches[0].clientX-f,B=e.touches[0].clientY-p,D=e.touches[1].clientX-f,R=e.touches[1].clientY-p,M=er(P,B,D,R);if(M/c>=2.25||M>=22500){k.touchData.cxt=!1,k.data.bgActivePosistion=void 0,k.redrawHint("select",!0);var O=b("cxttapend");k.touchData.start?(k.touchData.start.unactivate().emit(O),k.touchData.start=null):r.emit(O)}}if(t&&k.touchData.cxt){var O=b("cxtdrag");k.data.bgActivePosistion=void 0,k.redrawHint("select",!0),k.touchData.start?k.touchData.start.emit(O):r.emit(O),k.touchData.start&&(k.touchData.start._private.grabbed=!1),k.touchData.cxtDragged=!0;var I=k.findNearestElement(i[0],i[1],!0,!0);(!k.touchData.cxtOver||I!==k.touchData.cxtOver)&&(k.touchData.cxtOver&&k.touchData.cxtOver.emit(b("cxtdragout")),k.touchData.cxtOver=I,I&&I.emit(b("cxtdragover")))}else if(t&&e.touches[2]&&r.boxSelectionEnabled())e.preventDefault(),k.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,k.touchData.selecting||r.emit(b("boxstart")),k.touchData.selecting=!0,k.touchData.didSelect=!0,n[4]=1,n&&0!==n.length&&void 0!==n[0]?(n[2]=(i[0]+i[2]+i[4])/3,n[3]=(i[1]+i[3]+i[5])/3):(n[0]=(i[0]+i[2]+i[4])/3,n[1]=(i[1]+i[3]+i[5])/3,n[2]=(i[0]+i[2]+i[4])/3+1,n[3]=(i[1]+i[3]+i[5])/3+1),k.redrawHint("select",!0),k.redraw();else if(t&&e.touches[1]&&!k.touchData.didSelect&&r.zoomingEnabled()&&r.panningEnabled()&&r.userZoomingEnabled()&&r.userPanningEnabled()){e.preventDefault(),k.data.bgActivePosistion=void 0,k.redrawHint("select",!0);var N=k.dragData.touchDragEles;if(N){k.redrawHint("drag",!0);for(var L=0;L<N.length;L++){var z=N[L]._private;z.grabbed=!1,z.rscratch.inDragLayer=!1}}var F=k.touchData.start,P=e.touches[0].clientX-f,B=e.touches[0].clientY-p,D=e.touches[1].clientX-f,R=e.touches[1].clientY-p,U=en(P,B,D,R),q=U/u;if(y){var X=P-a,Y=B-o,W=D-s,H=R-l,G=r.zoom(),Z=G*q,$=r.pan(),Q=d[0]*G+$.x,J=d[1]*G+$.y,ee={x:-Z/G*(Q-$.x-(X+W)/2)+Q,y:-Z/G*(J-$.y-(Y+H)/2)+J};if(F&&F.active()){var N=k.dragData.touchDragEles;j(N),k.redrawHint("drag",!0),k.redrawHint("eles",!0),F.unactivate().emit(b("freeon")),N.emit(b("free")),k.dragData.didDrag&&(F.emit(b("dragfreeon")),N.emit(b("dragfree")))}r.viewport({zoom:Z,pan:ee,cancelOnFailedZoom:!0}),r.emit(b("pinchzoom")),u=U,a=P,o=B,s=D,l=R,k.pinching=!0}if(e.touches[0]){var v=k.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=v[0],i[1]=v[1]}if(e.touches[1]){var v=k.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);i[2]=v[0],i[3]=v[1]}if(e.touches[2]){var v=k.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);i[4]=v[0],i[5]=v[1]}}else if(e.touches[0]&&!k.touchData.didSelect){var et,I,ei=k.touchData.start,ea=k.touchData.last;if(k.hoverData.draggingEles||k.swipePanning||(I=k.findNearestElement(i[0],i[1],!0,!0)),t&&null!=ei&&e.preventDefault(),t&&null!=ei&&k.nodeIsDraggable(ei))if(et){var N=k.dragData.touchDragEles,eo=!k.dragData.didDrag;eo&&V(N,{inDragLayer:!0}),k.dragData.didDrag=!0;var es={x:0,y:0};if(tD(w[0])&&tD(w[1])&&(es.x+=w[0],es.y+=w[1],eo)){k.redrawHint("eles",!0);var el=k.touchData.dragDelta;el&&tD(el[0])&&tD(el[1])&&(es.x+=el[0],es.y+=el[1])}k.hoverData.draggingEles=!0,N.silentShift(es).emit(b("position")).emit(b("drag")),k.redrawHint("drag",!0),k.touchData.startPosition[0]==h[0]&&k.touchData.startPosition[1]==h[1]&&k.redrawHint("eles",!0),k.redraw()}else{var el=k.touchData.dragDelta=k.touchData.dragDelta||[];0===el.length?(el.push(w[0]),el.push(w[1])):(el[0]+=w[0],el[1]+=w[1])}if(A(ei||I,["touchmove","tapdrag","vmousemove"],e,{x:i[0],y:i[1]}),ei&&ei.grabbed()||I==ea||(ea&&ea.emit(b("tapdragout")),I&&I.emit(b("tapdragover"))),k.touchData.last=I,t)for(var L=0;L<i.length;L++)i[L]&&k.touchData.startPosition[L]&&et&&(k.touchData.singleTouchMoved=!0);if(t&&(null==ei||ei.pannable())&&r.panningEnabled()&&r.userPanningEnabled()){_(ei,k.touchData.starts)&&(e.preventDefault(),k.data.bgActivePosistion||(k.data.bgActivePosistion=n2(k.touchData.startPosition)),k.swipePanning?(r.panBy({x:w[0]*g,y:w[1]*g}),r.emit(b("dragpan"))):et&&(k.swipePanning=!0,r.panBy({x:T*g,y:S*g}),r.emit(b("dragpan")),ei&&(ei.unactivate(),k.redrawHint("select",!0),k.touchData.start=null)));var v=k.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=v[0],i[1]=v[1]}}for(var E=0;E<i.length;E++)h[E]=i[E];t&&e.touches.length>0&&!k.hoverData.draggingEles&&!k.swipePanning&&null!=k.data.bgActivePosistion&&(k.data.bgActivePosistion=void 0,k.redrawHint("select",!0),k.redraw())}},!1),k.registerBinding(P,"touchcancel",w=function(e){var t=k.touchData.start;k.touchData.capture=!1,t&&t.unactivate()}),k.registerBinding(P,"touchend",E=function(e){var t,n=k.touchData.start;if(k.touchData.capture){0===e.touches.length&&(k.touchData.capture=!1),e.preventDefault();var r=k.selection;k.swipePanning=!1,k.hoverData.draggingEles=!1;var i=k.cy,a=i.zoom(),o=k.touchData.now,s=k.touchData.earlier;if(e.touches[0]){var l=k.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);o[0]=l[0],o[1]=l[1]}if(e.touches[1]){var l=k.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);o[2]=l[0],o[3]=l[1]}if(e.touches[2]){var l=k.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);o[4]=l[0],o[5]=l[1]}var u=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}};if(n&&n.unactivate(),k.touchData.cxt){if(t=u("cxttapend"),n?n.emit(t):i.emit(t),!k.touchData.cxtDragged){var c=u("cxttap");n?n.emit(c):i.emit(c)}k.touchData.start&&(k.touchData.start._private.grabbed=!1),k.touchData.cxt=!1,k.touchData.start=null,k.redraw();return}if(!e.touches[2]&&i.boxSelectionEnabled()&&k.touchData.selecting){k.touchData.selecting=!1;var h=i.collection(k.getAllInBox(r[0],r[1],r[2],r[3]));r[0]=void 0,r[1]=void 0,r[2]=void 0,r[3]=void 0,r[4]=0,k.redrawHint("select",!0),i.emit(u("boxend")),h.emit(u("box")).stdFilter(function(e){return e.selectable()&&!e.selected()}).select().emit(u("boxselect")),h.nonempty()&&k.redrawHint("eles",!0),k.redraw()}if(null!=n&&n.unactivate(),e.touches[2])k.data.bgActivePosistion=void 0,k.redrawHint("select",!0);else if(e.touches[1]);else if(e.touches[0]);else if(!e.touches[0]){k.data.bgActivePosistion=void 0,k.redrawHint("select",!0);var d=k.dragData.touchDragEles;if(null!=n){var f=n._private.grabbed;j(d),k.redrawHint("drag",!0),k.redrawHint("eles",!0),f&&(n.emit(u("freeon")),d.emit(u("free")),k.dragData.didDrag&&(n.emit(u("dragfreeon")),d.emit(u("dragfree")))),A(n,["touchend","tapend","vmouseup","tapdragout"],e,{x:o[0],y:o[1]}),n.unactivate(),k.touchData.start=null}else A(k.findNearestElement(o[0],o[1],!0,!0),["touchend","tapend","vmouseup","tapdragout"],e,{x:o[0],y:o[1]});var p=k.touchData.startPosition[0]-o[0],g=k.touchData.startPosition[1]-o[1];k.touchData.singleTouchMoved||(n||i.$(":selected").unselect(["tapunselect"]),A(n,["tap","vclick"],e,{x:o[0],y:o[1]}),T=!1,e.timeStamp-S<=i.multiClickDebounceTime()?(C&&clearTimeout(C),T=!0,S=null,A(n,["dbltap","vdblclick"],e,{x:o[0],y:o[1]})):(C=setTimeout(function(){T||A(n,["onetap","voneclick"],e,{x:o[0],y:o[1]})},i.multiClickDebounceTime()),S=e.timeStamp)),null!=n&&!k.dragData.didDrag&&n._private.selectable&&(p*p+g*g)*a*a<k.touchTapThreshold2&&!k.pinching&&("single"===i.selectionType()?(i.$(B).unmerge(n).unselect(["tapunselect"]),n.select(["tapselect"])):n.selected()?n.unselect(["tapunselect"]):n.select(["tapselect"]),k.redrawHint("eles",!0)),k.touchData.singleTouchMoved=!0}for(var v=0;v<o.length;v++)s[v]=o[v];k.dragData.didDrag=!1,0===e.touches.length&&(k.touchData.dragDelta=[],k.touchData.startPosition=[null,null,null,null,null,null],k.touchData.startGPosition=null,k.touchData.didSelect=!1),e.touches.length<2&&(1===e.touches.length&&(k.touchData.startGPosition=[e.touches[0].clientX,e.touches[0].clientY]),k.pinching=!1,k.redrawHint("eles",!0),k.redraw())}},!1),"undefined"==typeof TouchEvent){var ei=[],ea=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},eo=function(e){ei.push({event:e,touch:ea(e)})},es=function(e){for(var t=0;t<ei.length;t++)if(ei[t].event.pointerId===e.pointerId)return void ei.splice(t,1)},el=function(e){var t=ei.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=ea(e)},eu=function(e){e.touches=ei.map(function(e){return e.touch})},ec=function(e){return"mouse"===e.pointerType||4===e.pointerType};k.registerBinding(k.container,"pointerdown",function(e){ec(e)||(e.preventDefault(),eo(e),eu(e),b(e))}),k.registerBinding(k.container,"pointerup",function(e){ec(e)||(es(e),eu(e),E(e))}),k.registerBinding(k.container,"pointercancel",function(e){ec(e)||(es(e),eu(e),w(e))}),k.registerBinding(k.container,"pointermove",function(e){ec(e)||(e.preventDefault(),el(e),eu(e),x(e))})}};var cz={};cz.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,n,r,i,a){this.renderer.nodeShapeImpl("polygon",e,t,n,r,i,this.points)},intersectLine:function(e,t,n,r,i,a,o,s){return rL(i,a,this.points,e,t,n/2,r/2,o)},checkPoint:function(e,t,n,r,i,a,o,s){return rP(e,t,this.points,a,o,r,i,[0,-1],n)},hasMiterBounds:"rectangle"!==e,miterBounds:function(e,t,n,r,i,a){var o,s,l;return o=this.points,s=function(e,t){if(e.length<3)throw Error("Need at least 3 vertices");var n=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},r=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},i=function(e,t){return{x:e.x*t,y:e.y*t}},a=function(e,t){return e.x*t.y-e.y*t.x},o=e.map(function(e){return{x:e.x,y:e.y}});0>function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n],i=e[(n+1)%e.length];t+=r.x*i.y-i.x*r.y}return t/2}(o)&&o.reverse();for(var s=o.length,l=[],u=0;u<s;u++){var c=o[u],h=r(o[(u+1)%s],c),d=function(e){var t=rm(e.x,e.y);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}}({x:h.y,y:-h.x});l.push(d)}for(var f=l.map(function(e,r){return{p1:n(o[r],i(e,t)),p2:n(o[(r+1)%s],i(e,t))}}),p=[],g=0;g<s;g++){var v=f[(g-1+s)%s],y=f[g],b=function(e,t,o,s){var l=r(t,e),u=r(s,o),c=a(l,u);if(1e-9>Math.abs(c))return n(e,i(l,.5));var h=a(r(o,e),u)/c;return n(e,i(l,h))}(v.p1,v.p2,y.p1,y.p2);p.push(b)}return p}(rN(o,e,t,n,r),i),l=rs(),s.forEach(function(e){return rc(l,e.x,e.y)}),l}}},cz.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o,s){return r_(i,a,e,t,n/2+o,r/2+o)},checkPoint:function(e,t,n,r,i,a,o,s){return rR(e,t,r,i,a,o,n)}}},cz.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(e,n,r,i,a,o,s){if(void 0!==o[s]&&o[s+"-cx"]===e&&o[s+"-cy"]===n)return o[s];o[s]=Array(t.length/2),o[s+"-cx"]=e,o[s+"-cy"]=n;var l=r/2,u=i/2;a="auto"===a?rX(r,i):a;for(var c=Array(t.length/2),h=0;h<t.length/2;h++)c[h]={x:e+l*t[2*h],y:n+u*t[2*h+1]};var d,f,p,g,v=c.length;for(d=0,f=c[v-1];d<v;d++)p=c[d%v],g=c[(d+1)%v],o[s][d]=cw(f,p,g,a),f=p,p=g;return o[s]},draw:function(e,t,n,r,i,a,o){this.renderer.nodeShapeImpl("round-polygon",e,t,n,r,i,this.points,this.getOrCreateCorners(t,n,r,i,a,o,"drawCorners"))},intersectLine:function(e,t,n,r,i,a,o,s,l){return rz(i,a,this.points,e,t,n,r,o,this.getOrCreateCorners(e,t,n,r,s,l,"corners"))},checkPoint:function(e,t,n,r,i,a,o,s,l){return rB(e,t,this.points,a,o,r,i,this.getOrCreateCorners(a,o,r,i,s,l,"corners"))}}},cz.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:rV(4,0),draw:function(e,t,n,r,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i,this.points,a)},intersectLine:function(e,t,n,r,i,a,o,s){return rb(i,a,e,t,n,r,o,s)},checkPoint:function(e,t,n,r,i,a,o,s){var l=r/2,u=i/2,c=2*(s=Math.min(l,u,s="auto"===s?rq(r,i):s));return!!(rP(e,t,this.points,a,o,r,i-c,[0,-1],n)||rP(e,t,this.points,a,o,r-c,i,[0,-1],n)||rR(e,t,c,c,a-l+s,o-u+s,n)||rR(e,t,c,c,a+l-s,o-u+s,n)||rR(e,t,c,c,a+l-s,o+u-s,n)||rR(e,t,c,c,a-l+s,o+u-s,n))}}},cz.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:rY(),points:rV(4,0),draw:function(e,t,n,r,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i,null,a)},generateCutTrianglePts:function(e,t,n,r,i){var a="auto"===i?this.cornerLength:i,o=t/2,s=e/2,l=n-s,u=n+s,c=r-o,h=r+o;return{topLeft:[l,c+a,l+a,c,l+a,c+a],topRight:[u-a,c,u,c+a,u-a,c+a],bottomRight:[u,h-a,u-a,h,u-a,h-a],bottomLeft:[l+a,h,l,h-a,l+a,h-a]}},intersectLine:function(e,t,n,r,i,a,o,s){var l=this.generateCutTrianglePts(n+2*o,r+2*o,e,t,s);return rL(i,a,[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]),e,t)},checkPoint:function(e,t,n,r,i,a,o,s){var l="auto"===s?this.cornerLength:s;if(rP(e,t,this.points,a,o,r,i-2*l,[0,-1],n)||rP(e,t,this.points,a,o,r-2*l,i,[0,-1],n))return!0;var u=this.generateCutTrianglePts(r,i,a,o);return rk(e,t,u.topLeft)||rk(e,t,u.topRight)||rk(e,t,u.bottomRight)||rk(e,t,u.bottomLeft)}}},cz.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:rV(4,0),draw:function(e,t,n,r,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o,s){var l=this.generateBarrelBezierPts(n+2*o,r+2*o,e,t),u=function(e){var t=ri({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),n=ri({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),r=ri({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,n.x,n.y,r.x,r.y,e[4],e[5]]};return rL(i,a,[].concat(u(l.topLeft),u(l.topRight),u(l.bottomRight),u(l.bottomLeft)),e,t)},generateBarrelBezierPts:function(e,t,n,r){var i=t/2,a=e/2,o=n-a,s=n+a,l=r-i,u=r+i,c=rW(e,t),h=c.heightOffset,d=c.widthOffset,f=c.ctrlPtOffsetPct*e,p={topLeft:[o,l+h,o+f,l,o+d,l],topRight:[s-d,l,s-f,l,s,l+h],bottomRight:[s,u-h,s-f,u,s-d,u],bottomLeft:[o+d,u,o+f,u,o,u-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,n,r,i,a,o,s){var l=rW(r,i),u=l.heightOffset,c=l.widthOffset;if(rP(e,t,this.points,a,o,r,i-2*u,[0,-1],n)||rP(e,t,this.points,a,o,r-2*c,i,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(r,i,a,o),d=Object.keys(h),f=0;f<d.length;f++){var p=h[d[f]],g=function(e,t,n){var r=n[4],i=n[2],a=n[0],o=n[5],s=n[1],l=Math.min(r,a),u=Math.max(r,a),c=Math.min(o,s),h=Math.max(o,s);if(l<=e&&e<=u&&c<=t&&t<=h){var d=[r-2*i+a,2*(i-r),r],f=rE(d[0],d[1],d[2],e).filter(function(e){return 0<=e&&e<=1});if(f.length>0)return f[0]}return null}(e,t,p);if(null!=g){var v=rr(p[5],p[3],p[1],g);if(p.isTop&&v<=t||p.isBottom&&t<=v)return!0}}return!1}}},cz.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:rV(4,0),draw:function(e,t,n,r,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i,this.points,a)},intersectLine:function(e,t,n,r,i,a,o,s){var l=e-(n/2+o),u=t-(r/2+o),c=e+(n/2+o),h=rI(i,a,e,t,l,u,c,u,!1);return h.length>0?h:rb(i,a,e,t,n,r,o,s)},checkPoint:function(e,t,n,r,i,a,o,s){var l=2*(s="auto"===s?rq(r,i):s);if(rP(e,t,this.points,a,o,r,i-l,[0,-1],n)||rP(e,t,this.points,a,o,r-l,i,[0,-1],n))return!0;var u=r/2+2*n,c=i/2+2*n;return!!(rk(e,t,[a-u,o-c,a-u,o,a+u,o,a+u,o-c])||rR(e,t,l,l,a+r/2-s,o+i/2-s,n)||rR(e,t,l,l,a-r/2+s,o+i/2-s,n))}}},cz.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",rV(3,0)),this.generateRoundPolygon("round-triangle",rV(3,0)),this.generatePolygon("rectangle",rV(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",rV(5,0)),this.generateRoundPolygon("round-pentagon",rV(5,0)),this.generatePolygon("hexagon",rV(6,0)),this.generateRoundPolygon("round-hexagon",rV(6,0)),this.generatePolygon("heptagon",rV(7,0)),this.generateRoundPolygon("round-heptagon",rV(7,0)),this.generatePolygon("octagon",rV(8,0)),this.generateRoundPolygon("round-octagon",rV(8,0));var r=Array(20),i=rU(5,0),a=rU(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[2*s]*=o,a[2*s+1]*=o;for(var s=0;s<5;s++)r[4*s]=i[2*s],r[4*s+1]=i[2*s+1],r[4*s+2]=a[2*s],r[4*s+3]=a[2*s+1];r=rj(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var n,r="polygon-"+e.join("$");return(n=this[r])?n:t.generatePolygon(r,e)}};var cF={};cF.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},cF.redraw=function(e){e=e||nD(),void 0===this.averageRedrawTime&&(this.averageRedrawTime=0),void 0===this.lastRedrawTime&&(this.lastRedrawTime=0),void 0===this.lastDrawTime&&(this.lastDrawTime=0),this.requestedFrame=!0,this.renderOptions=e},cF.beforeRender=function(e,t){if(!this.destroyed){null==t&&nC("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(e,t){return t.priority-e.priority})}};var cV=function(e,t,n){for(var r=e.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(t,n)};cF.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var n=function(r){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){cV(e,!0,r);var i=ni();e.render(e.renderOptions);var a=e.lastDrawTime=ni();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=a-i;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else cV(e,!1,r);e.skipFrame=!1,no(n)}};no(n)}};var cj=function(e){this.init(e)},cU=cj.prototype;cU.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],cU.init=function(e){this.options=e,this.cy=e.cy;var t=this.container=e.cy.container(),n=this.cy.window();if(n){var r=n.document,i=r.head,a="__________cytoscape_stylesheet",o="__________cytoscape_container",s=null!=r.getElementById(a);if(0>t.className.indexOf(o)&&(t.className=(t.className||"")+" "+o),!s){var l=r.createElement("style");l.id=a,l.textContent="."+o+" { position: relative; }",i.insertBefore(l,i.children[0])}"static"===n.getComputedStyle(t).getPropertyValue("position")&&nk("A Cytoscape container has style position:static and so can not use UI extensions properly")}this.selection=[void 0,void 0,void 0,void 0,0],this.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.redraws=0,this.showFps=e.showFps,this.debug=e.debug,this.webgl=e.webgl,this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.textureOnViewport=e.textureOnViewport,this.wheelSensitivity=e.wheelSensitivity,this.motionBlurEnabled=e.motionBlur,this.forcedPixelRatio=tD(e.pixelRatio)?e.pixelRatio:null,this.motionBlur=e.motionBlur,this.motionBlurOpacity=e.motionBlurOpacity,this.motionBlurTransparency=1-this.motionBlurOpacity,this.motionBlurPxRatio=1,this.mbPxRBlurry=1,this.minMbLowQualFrames=4,this.fullQualityMb=!1,this.clearedForMotionBlur=[],this.desktopTapThreshold=e.desktopTapThreshold,this.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,this.touchTapThreshold=e.touchTapThreshold,this.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,this.tapholdDuration=500,this.bindings=[],this.beforeRenderCallbacks=[],this.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},this.registerNodeShapes(),this.registerArrowShapes(),this.registerCalculationListeners()},cU.notify=function(e,t){var n=this.cy;if(!this.destroyed){if("init"===e)return void this.load();if("destroy"===e)return void this.destroy();("add"===e||"remove"===e||"move"===e&&n.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&this.invalidateCachedZSortedEles(),"viewport"===e&&this.redrawHint("select",!0),"gc"===e&&this.redrawHint("gc",!0),("load"===e||"resize"===e||"mount"===e)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.container)),this.redrawHint("eles",!0),this.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},cU.destroy=function(){this.destroyed=!0,this.cy.stopAnimationLoop();for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],n=t.target;(n.off||n.removeEventListener).apply(n,t.args)}if(this.bindings=[],this.beforeRenderCallbacks=[],this.onUpdateEleCalcsFns=[],this.removeObserver&&this.removeObserver.disconnect(),this.styleObserver&&this.styleObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(e){}},cU.isHeadless=function(){return!1},[sW,cI,cN,cL,cz,cF].forEach(function(e){t$(cU,e)});var cq=1e3/60,cX={setupDequeueing:function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=nn(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),i=e.priority||nT;n.beforeRender(function(i,a){var o=ni(),s=n.averageRedrawTime,l=n.lastRedrawTime,u=[],c=n.cy.extent(),h=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var d=ni(),f=d-o,p=d-a;if(l<cq){var g=cq-(i?s:0);if(p>=e.deqFastCost*g)break}else if(i){if(f>=e.deqCost*l||f>=e.deqAvgCost*s)break}else if(p>=e.deqNoDrawCost*cq)break;var v=e.deq(t,h,c);if(v.length>0)for(var y=0;y<v.length;y++)u.push(v[y]);else break}u.length>0&&(e.onDeqd(t,u),!i&&e.shouldRedraw(t,u,h,c)&&r())},i(t))}}}},cY=th(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nw;tc(this,e),this.idsByKey=new nz,this.keyForId=new nz,this.cachesByLvl=new nz,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n},[{key:"getIdsFor",value:function(e){null==e&&nC("Can not get id list for null key");var t=this.idsByKey,n=this.idsByKey.get(e);return n||(n=new nV,t.set(e,n)),n}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t),r=this.getKey(e);this.deleteIdForKey(n,t),this.addIdForKey(r,t),this.keyForId.set(t,r)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteIdForKey(n,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,n=this.lvls,r=t.get(e);return r||(r=new nz,t.set(e,r),n.push(e)),r}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var n=this.getKey(e),r=this.getCache(n,t);return null!=r&&this.updateKeyMappingFor(e),r}},{key:"getForCachedKey",value:function(e,t){var n=this.keyForId.get(e.id());return this.getCache(n,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var n=this.getKey(e);return this.hasCache(n,t)}},{key:"setCache",value:function(e,t,n){n.key=e,this.getCachesAt(t).set(e,n)}},{key:"set",value:function(e,t,n){var r=this.getKey(e);this.setCache(r,t,n),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var n=this.getKey(e);this.deleteCache(n,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach(function(n){return t.deleteCache(e,n)})}},{key:"invalidate",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteKeyMappingFor(e);var r=this.doesEleInvalidateKey(e);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),cW={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},cH=n_({getKey:null,doesEleInvalidateKey:nw,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:nx,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),cG=function(e,t){this.renderer=e,this.onDequeues=[];var n=cH(t);t$(this,n),this.lookup=new cY(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},cK=cG.prototype;cK.reasons=cW,cK.getTextureQueue=function(e){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[e]=this.eleImgCaches[e]||[]},cK.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},cK.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new nW(function(e,t){return t.reqs-e.reqs})},cK.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},cK.getElement=function(e,t,n,r,i){var a,o,s,l=this,u=this.renderer,c=u.cy.zoom(),h=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!l.allowEdgeTxrCaching&&e.isEdge()||!l.allowParentTxrCaching&&e.isParent())return null;if(null==r&&(r=Math.ceil(n9(c*n))),r<-4)r=-4;else if(c>=7.99||r>3)return null;var d=Math.pow(2,r),f=t.h*d,p=t.w*d,g=u.eleTextBiggerThanMin(e,d);if(!this.isVisible(e,g))return null;var v=h.get(e,r);if(v&&v.invalidated&&(v.invalidated=!1,v.texture.invalidatedWidth-=v.width),v)return v;if(a=f<=25?25:f<=50?50:50*Math.ceil(f/50),f>1024||p>1024)return null;var y=l.getTextureQueue(a),b=y[y.length-2],x=function(){return l.recycleTexture(a,p)||l.addTexture(a,p)};b||(b=y[y.length-1]),b||(b=x()),b.width-b.usedWidth<p&&(b=x());for(var w=function(e){return e&&e.scaledLabelShown===g},E=i&&i===cW.dequeue,T=i&&i===cW.highQuality,C=i&&i===cW.downscale,S=r+1;S<=3;S++){var k=h.get(e,S);if(k){o=k;break}}var P=o&&o.level===r+1?o:null,B=function(){b.context.drawImage(P.texture.canvas,P.x,0,P.width,P.height,b.usedWidth,0,p,f)};if(b.context.setTransform(1,0,0,1,0,0),b.context.clearRect(b.usedWidth,0,p,a),w(P))B();else if(w(o))if(!T)return l.queueElement(e,o.level-1),o;else{for(var A=o.level;A>r;A--)P=l.getElement(e,t,n,A,cW.downscale);B()}else{if(!E&&!T&&!C)for(var D=r-1;D>=-4;D--){var _=h.get(e,D);if(_){s=_;break}}if(w(s))return l.queueElement(e,r),s;b.context.translate(b.usedWidth,0),b.context.scale(d,d),this.drawElement(b.context,e,t,g,!1),b.context.scale(1/d,1/d),b.context.translate(-b.usedWidth,0)}return v={x:b.usedWidth,texture:b,level:r,scale:d,width:p,height:f,scaledLabelShown:g},b.usedWidth+=Math.ceil(p+8),b.eleCaches.push(v),h.set(e,r,v),l.checkTextureFullness(b),v},cK.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},cK.invalidateElement=function(e){var t=this.lookup,n=[];if(t.isInvalid(e)){for(var r=-4;r<=3;r++){var i=t.getForCachedKey(e,r);i&&n.push(i)}if(t.invalidate(e))for(var a=0;a<n.length;a++){var o=n[a],s=o.texture;s.invalidatedWidth+=o.width,o.invalidated=!0,this.checkTextureUtility(s)}this.removeFromQueue(e)}},cK.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},cK.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?nR(t,e):e.fullnessChecks++},cK.retireTexture=function(e){var t=e.height,n=this.getTextureQueue(t),r=this.lookup;nR(n,e),e.retired=!0;for(var i=e.eleCaches,a=0;a<i.length;a++){var o=i[a];r.deleteCache(o.key,o.level)}nM(i),this.getRetiredTextureQueue(t).push(e)},cK.addTexture=function(e,t){var n=this.getTextureQueue(e),r={};return n.push(r),r.eleCaches=[],r.height=e,r.width=Math.max(1024,t),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},cK.recycleTexture=function(e,t){for(var n=this.getTextureQueue(e),r=this.getRetiredTextureQueue(e),i=0;i<r.length;i++){var a=r[i];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,nM(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),nR(r,a),n.push(a),a}},cK.queueElement=function(e,t){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(e),a=r[i];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,n.updateItem(a);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:i};n.push(o),r[i]=o}},cK.dequeue=function(e){for(var t=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,a=0;a<1;a++)if(t.size()>0){var o=t.pop(),s=o.key,l=o.eles[0],u=i.hasCache(l,o.level);if(n[s]=null,u)continue;r.push(o);var c=this.getBoundingBox(l);this.getElement(l,c,e,o.level,cW.dequeue)}else break;return r},cK.removeFromQueue=function(e){var t=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(e),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=nb,t.updateItem(i),t.pop(),n[r]=null):i.eles.unmerge(e))},cK.onDequeue=function(e){this.onDequeues.push(e)},cK.offDequeue=function(e){nR(this.onDequeues,e)},cK.setupDequeueing=cX.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++)(0,e.onDequeues[n])(t)},shouldRedraw:function(e,t,n,r){for(var i=0;i<t.length;i++)for(var a=t[i].eles,o=0;o<a.length;o++)if(rp(a[o].boundingBox(),r))return!0;return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var cZ=function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=ni()-500,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=nn(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},50),n.beforeRender(function(e,n){n-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip),t.layersQueue=new nW(function(e,t){return t.reqs-e.reqs}),t.setupDequeueing()},c$=cZ.prototype,cQ=0;c$.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),i=Math.ceil(e.h*n),a=this.renderer.makeOffscreenCanvas(r,i),o={id:cQ=++cQ%0x1fffffffffffff,bb:e,level:t,width:r,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(n,n),s.translate(l,u),o},c$.getLayers=function(e,t,n){var r,i,a=this,o=a.renderer.cy.zoom(),s=a.firstGet;if(a.firstGet=!1,null==n){if((n=Math.ceil(n9(o*t)))<-4)n=-4;else if(o>=3.99||n>2)return null}a.validateLayersElesOrdering(n,e);var l=a.layersByLevel,u=Math.pow(2,n),c=l[n]=l[n]||[];if(a.levelIsComplete(n,e))return c;var h=function(t){if(a.validateLayersElesOrdering(t,e),a.levelIsComplete(t,e))return i=l[t],!0},d=function(e){if(!i)for(var t=n+e;-4<=t&&t<=2&&!h(t);t+=e);};d(1),d(-1);for(var f=c.length-1;f>=0;f--){var p=c[f];p.invalid&&nR(c,p)}var g=function(){if(!r){r=rs();for(var t=0;t<e.length;t++)ru(r,e[t].boundingBox())}return r};if(a.skipping&&!s)return null;for(var v=null,y=e.length/1,b=!s,x=0;x<e.length;x++){var w=e[x],E=w._private.rscratch,T=E.imgLayerCaches=E.imgLayerCaches||{},C=T[n];if(C){v=C;continue}if((!v||v.eles.length>=y||!ry(v.bb,w.boundingBox()))&&!(v=function(e){var t=(e=e||{}).after;g();var i=Math.ceil(r.w*u),o=Math.ceil(r.h*u);if(i>32767||o>32767||i*o>16e6)return null;var s=a.makeLayer(r,n);if(null!=t){var l=c.indexOf(t)+1;c.splice(l,0,s)}else(void 0===e.insert||e.insert)&&c.unshift(s);return s}({insert:!0,after:v})))return null;i||b?a.queueLayer(v,w):a.drawEleInLayer(v,w,n,t),v.eles.push(w),T[n]=v}return i||(b?null:c)},c$.getEleLevelForLayerLevel=function(e,t){return e},c$.drawEleInLayer=function(e,t,n,r){var i=this.renderer,a=e.context,o=t.boundingBox();0!==o.w&&0!==o.h&&t.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(a,!1),i.drawCachedElement(a,t,null,null,n,!0),i.setImgSmoothing(a,!0))},c$.levelIsComplete=function(e,t){var n=this.layersByLevel[e];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var a=n[i];if(a.reqs>0||a.invalid)return!1;r+=a.eles.length}return r===t.length},c$.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],a=-1,o=0;o<t.length;o++)if(i.eles[0]===t[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==t[s+o]){this.invalidateLayer(i);break}}},c$.updateElementsInLayers=function(e,t){for(var n=tM(e[0]),r=0;r<e.length;r++)for(var i=n?null:e[r],a=n?e[r]:e[r].ele,o=a._private.rscratch,s=o.imgLayerCaches=o.imgLayerCaches||{},l=-4;l<=2;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||t(u,a,i))}},c$.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var n=this.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e},c$.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=ni(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(e,n,r){t.invalidateLayer(e)}))},c$.invalidateLayer=function(e){if(this.lastInvalidationTime=ni(),!e.invalid){var t=e.level,n=e.eles;nR(this.layersByLevel[t],e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var r=0;r<n.length;r++){var i=n[r]._private.rscratch.imgLayerCaches;i&&(i[t]=null)}}},c$.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(e,n,r){var i=e.replacement;if(i||((i=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,i.eles=e.eles),!i.reqs)for(var a=0;a<i.eles.length;a++)t.queueLayer(i,i.eles[a])})},c$.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},c$.queueLayer=function(e,t){var n=this.layersQueue,r=e.elesQueue,i=r.hasId=r.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;r.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,n.updateItem(e)):(e.reqs=1,n.push(e))}},c$.dequeue=function(e){for(var t=this.layersQueue,n=[],r=0;r<1&&0!==t.size();){var i=t.peek();if(i.replacement||i.replaces&&i!==i.replaces.replacement||i.invalid){t.pop();continue}var a=i.elesQueue.shift();a&&(this.drawEleInLayer(i,a,i.level,e),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(t.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}return n},c$.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],n=e.replaces,r=t.indexOf(n);if(!(r<0)&&!n.invalid){t[r]=e;for(var i=0;i<e.eles.length;i++){var a=e.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},c$.requestRedraw=nn(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),c$.setupDequeueing=cX.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t){return e.dequeue(t)},onDeqd:nT,shouldRedraw:nx,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var cJ={};function c0(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}function c1(e,t,n){for(var r,i=0;i<t.length;i++){var a=t[i];0===i&&(r=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}function c2(e,t,n){e.beginPath&&e.beginPath();for(var r=0;r<t.length;r++){var i=t[r];e.lineTo(i.x,i.y)}var a=n[0];e.moveTo(a.x,a.y);for(var r=1;r<n.length;r++){var i=n[r];e.lineTo(i.x,i.y)}e.closePath&&e.closePath()}function c5(e,t,n,r,i){e.beginPath&&e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1);var a=t[0];e.moveTo(a.x,a.y);for(var o=0;o<t.length;o++){var s=t[o];e.lineTo(s.x,s.y)}e.closePath&&e.closePath()}function c3(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}cJ.arrowShapeImpl=function(e){return(o||(o={polygon:c0,"triangle-backcurve":c1,"triangle-tee":c2,"circle-triangle":c5,"triangle-cross":c2,circle:c3}))[e]};var c4={};c4.drawElement=function(e,t,n,r,i,a){t.isNode()?this.drawNode(e,t,n,r,i,a):this.drawEdge(e,t,n,r,i,a)},c4.drawElementOverlay=function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},c4.drawElementUnderlay=function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},c4.drawCachedElementPortion=function(e,t,n,r,i,a,o,s){var l=n.getBoundingBox(t);if(0!==l.w&&0!==l.h){var u=n.getElement(t,l,r,i,a);if(null!=u){var c,h,d,f,p,g,v=s(this,t);if(0===v)return;var y=o(this,t),b=l.x1,x=l.y1,w=l.w,E=l.h;if(0!==y){var T=n.getRotationPoint(t);d=T.x,f=T.y,e.translate(d,f),e.rotate(y),(p=this.getImgSmoothing(e))||this.setImgSmoothing(e,!0);var C=n.getRotationOffset(t);c=C.x,h=C.y}else c=b,h=x;1!==v&&(g=e.globalAlpha,e.globalAlpha=g*v),e.drawImage(u.texture.canvas,u.x,0,u.width,u.height,c,h,w,E),1!==v&&(e.globalAlpha=g),0!==y&&(e.rotate(-y),e.translate(-d,-f),p||this.setImgSmoothing(e,!1))}else n.drawElement(e,t)}};var c6=function(){return 0},c8=function(e,t){return e.getTextAngle(t,null)},c9=function(e,t){return e.getTextAngle(t,"source")},c7=function(e,t){return e.getTextAngle(t,"target")},he=function(e,t){return t.effectiveOpacity()},ht=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};c4.drawCachedElement=function(e,t,n,r,i,a){var o=this.data,s=o.eleTxrCache,l=o.lblTxrCache,u=o.slbTxrCache,c=o.tlbTxrCache,h=t.boundingBox(),d=!0===a?s.reasons.highQuality:null;if(0!==h.w&&0!==h.h&&t.visible()&&(!r||rp(h,r))){var f=t.isEdge(),p=t.element()._private.rscratch.badLine;this.drawElementUnderlay(e,t),this.drawCachedElementPortion(e,t,s,n,i,d,c6,he),f&&p||this.drawCachedElementPortion(e,t,l,n,i,d,c8,ht),f&&!p&&(this.drawCachedElementPortion(e,t,u,n,i,d,c9,ht),this.drawCachedElementPortion(e,t,c,n,i,d,c7,ht)),this.drawElementOverlay(e,t)}},c4.drawElements=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this.drawElement(e,r)}},c4.drawCachedElements=function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];this.drawCachedElement(e,a,n,r)}},c4.drawCachedNodes=function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];a.isNode()&&this.drawCachedElement(e,a,n,r)}},c4.drawLayeredElements=function(e,t,n,r){var i=this.data.lyrTxrCache.getLayers(t,n);if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o.bb;0!==s.w&&0!==s.h&&e.drawImage(o.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,n,r)};var hn={};hn.drawEdge=function(e,t,n){var r,i=!(arguments.length>3)||void 0===arguments[3]||arguments[3],a=!(arguments.length>4)||void 0===arguments[4]||arguments[4],o=!(arguments.length>5)||void 0===arguments[5]||arguments[5],s=this,l=t._private.rscratch;if((!o||t.visible())&&!(l.badLine||null==l.allpts||isNaN(l.allpts[0]))){n&&(r=n,e.translate(-r.x1,-r.y1));var u=o?t.pstyle("opacity").value:1,c=o?t.pstyle("line-opacity").value:1,h=t.pstyle("curve-style").value,d=t.pstyle("line-style").value,f=t.pstyle("width").pfValue,p=t.pstyle("line-cap").value,g=t.pstyle("line-outline-width").value,v=t.pstyle("line-outline-color").value,y=u*c,b=u*c,x=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;"straight-triangle"===h?(s.eleStrokeStyle(e,t,n),s.drawEdgeTrianglePath(t,e,l.allpts)):(e.lineWidth=f,e.lineCap=p,s.eleStrokeStyle(e,t,n),s.drawEdgePath(t,e,l.allpts,d),e.lineCap="butt")},w=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;s.drawArrowheads(e,t,n)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var E=t.pstyle("ghost-offset-x").pfValue,T=t.pstyle("ghost-offset-y").pfValue,C=y*t.pstyle("ghost-opacity").value;e.translate(E,T),x(C),w(C),e.translate(-E,-T)}else!function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;if(e.lineWidth=f+g,e.lineCap=p,g>0)s.colorStrokeStyle(e,v[0],v[1],v[2],n);else{e.lineCap="butt";return}"straight-triangle"===h?s.drawEdgeTrianglePath(t,e,l.allpts):(s.drawEdgePath(t,e,l.allpts,d),e.lineCap="butt")}();a&&s.drawEdgeUnderlay(e,t),x(),w(),a&&s.drawEdgeOverlay(e,t),s.drawElementText(e,t,null,i),n&&e.translate(r.x1,r.y1)}};var hr=function(e){if(!["overlay","underlay"].includes(e))throw Error("Invalid state");return function(t,n){if(n.visible()){var r=n.pstyle("".concat(e,"-opacity")).value;if(0!==r){var i=this.usePaths(),a=n._private.rscratch,o=n.pstyle("".concat(e,"-padding")).pfValue,s=n.pstyle("".concat(e,"-color")).value;t.lineWidth=2*o,"self"!==a.edgeType||i?t.lineCap="round":t.lineCap="butt",this.colorStrokeStyle(t,s[0],s[1],s[2],r),this.drawEdgePath(n,t,a.allpts,"solid")}}}};hn.drawEdgeOverlay=hr("overlay"),hn.drawEdgeUnderlay=hr("underlay"),hn.drawEdgePath=function(e,t,n,r){var i=e._private.rscratch,a=t,o=!1,s=this.usePaths(),l=e.pstyle("line-dash-pattern").pfValue,u=e.pstyle("line-dash-offset").pfValue;if(s){var c=n.join("$");i.pathCacheKey&&i.pathCacheKey===c?(f=t=i.pathCache,o=!0):(f=t=new Path2D,i.pathCacheKey=c,i.pathCache=f)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=u;break;case"solid":a.setLineDash([])}if(!o&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<n.length;h+=4)t.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"haystack":for(var d=2;d+1<n.length;d+=2)t.lineTo(n[d],n[d+1]);break;case"segments":if(i.isRound){var f,p,g=td(i.roundCorners);try{for(g.s();!(p=g.n()).done;){var v=p.value;cx(t,v)}}catch(e){g.e(e)}finally{g.f()}t.lineTo(n[n.length-2],n[n.length-1])}else for(var y=2;y+1<n.length;y+=2)t.lineTo(n[y],n[y+1])}t=a,s?t.stroke(f):t.stroke(),t.setLineDash&&t.setLineDash([])},hn.drawEdgeTrianglePath=function(e,t,n){t.fillStyle=t.strokeStyle;for(var r=e.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var a=[n[i+2]-n[i],n[i+3]-n[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],l=[s[0]*r/2,s[1]*r/2];t.beginPath(),t.moveTo(n[i]-l[0],n[i+1]-l[1]),t.lineTo(n[i]+l[0],n[i+1]+l[1]),t.lineTo(n[i+2],n[i+3]),t.closePath(),t.fill()}},hn.drawArrowheads=function(e,t,n){var r=t._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},hn.drawArrowhead=function(e,t,n,r,i,a,o){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(a))&&null!=a){var s=t.pstyle(n+"-arrow-shape").value;if("none"!==s){var l="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",u=t.pstyle(n+"-arrow-fill").value,c=t.pstyle("width").pfValue,h=t.pstyle(n+"-arrow-width"),d="match-line"===h.value?c:h.pfValue;"%"===h.units&&(d*=c);var f=t.pstyle("opacity").value;void 0===o&&(o=f);var p=e.globalCompositeOperation;(1!==o||"hollow"===u)&&(e.globalCompositeOperation="destination-out",this.colorFillStyle(e,255,255,255,1),this.colorStrokeStyle(e,255,255,255,1),this.drawArrowShape(t,e,l,c,s,d,r,i,a),e.globalCompositeOperation=p);var g=t.pstyle(n+"-arrow-color").value;this.colorFillStyle(e,g[0],g[1],g[2],o),this.colorStrokeStyle(e,g[0],g[1],g[2],o),this.drawArrowShape(t,e,u,c,s,d,r,i,a)}}},hn.drawArrowShape=function(e,t,n,r,i,a,o,s,l){var u,c=this.usePaths()&&"triangle-cross"!==i,h=!1,d=t,f=e.pstyle("arrow-scale").value,p=this.getArrowWidth(r,f),g=this.arrowShapes[i];if(c){var v=this.arrowPathCache=this.arrowPathCache||[],y=nf(i),b=v[y];null!=b?(u=t=b,h=!0):(u=t=new Path2D,v[y]=u)}!h&&(t.beginPath&&t.beginPath(),c?g.draw(t,1,0,{x:0,y:0},1):g.draw(t,p,l,{x:o,y:s},r),t.closePath&&t.closePath()),t=d,c&&(t.translate(o,s),t.rotate(l),t.scale(p,p)),("filled"===n||"both"===n)&&(c?t.fill(u):t.fill()),("hollow"===n||"both"===n)&&(t.lineWidth=a/(c?p:1),t.lineJoin="miter",c?t.stroke(u):t.stroke()),c&&(t.scale(1/p,1/p),t.rotate(-l),t.translate(-o,-s))};var hi={};hi.safeDrawImage=function(e,t,n,r,i,a,o,s,l,u){if(!(i<=0)&&!(a<=0)&&!(l<=0)&&!(u<=0))try{e.drawImage(t,n,r,i,a,o,s,l,u)}catch(e){nk(e)}},hi.drawInscribedImage=function(e,t,n,r,i){var a=n.position(),o=a.x,s=a.y,l=n.cy().style(),u=l.getIndexedStyle.bind(l),c=u(n,"background-fit","value",r),h=u(n,"background-repeat","value",r),d=n.width(),f=n.height(),p=2*n.padding(),g=d+("inner"===u(n,"background-width-relative-to","value",r)?0:p),v=f+("inner"===u(n,"background-height-relative-to","value",r)?0:p),y=n._private.rscratch,b="node"===u(n,"background-clip","value",r),x=u(n,"background-image-opacity","value",r)*i,w=u(n,"background-image-smoothing","value",r),E=n.pstyle("corner-radius").value;"auto"!==E&&(E=n.pstyle("corner-radius").pfValue);var T=t.width||t.cachedW,C=t.height||t.cachedH;(null==T||null==C)&&(document.body.appendChild(t),T=t.cachedW=t.width||t.offsetWidth,C=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var S=T,k=C;if("auto"!==u(n,"background-width","value",r)&&(S="%"===u(n,"background-width","units",r)?u(n,"background-width","pfValue",r)*g:u(n,"background-width","pfValue",r)),"auto"!==u(n,"background-height","value",r)&&(k="%"===u(n,"background-height","units",r)?u(n,"background-height","pfValue",r)*v:u(n,"background-height","pfValue",r)),0!==S&&0!==k){if("contain"===c){var P=Math.min(g/S,v/k);S*=P,k*=P}else if("cover"===c){var P=Math.max(g/S,v/k);S*=P,k*=P}var B=o-g/2,A=u(n,"background-position-x","units",r),D=u(n,"background-position-x","pfValue",r);"%"===A?B+=(g-S)*D:B+=D;var _=u(n,"background-offset-x","units",r),R=u(n,"background-offset-x","pfValue",r);"%"===_?B+=(g-S)*R:B+=R;var M=s-v/2,O=u(n,"background-position-y","units",r),I=u(n,"background-position-y","pfValue",r);"%"===O?M+=(v-k)*I:M+=I;var N=u(n,"background-offset-y","units",r),L=u(n,"background-offset-y","pfValue",r);"%"===N?M+=(v-k)*L:M+=L,y.pathCache&&(B-=o,M-=s,o=0,s=0);var z=e.globalAlpha;e.globalAlpha=x;var F=this.getImgSmoothing(e),V=!1;if("no"===w&&F?(this.setImgSmoothing(e,!1),V=!0):"yes"!==w||F||(this.setImgSmoothing(e,!0),V=!0),"no-repeat"===h)b&&(e.save(),y.pathCache?e.clip(y.pathCache):(this.nodeShapes[this.getNodeShape(n)].draw(e,o,s,g,v,E,y),e.clip())),this.safeDrawImage(e,t,0,0,T,C,B,M,S,k),b&&e.restore();else{var j=e.createPattern(t,h);e.fillStyle=j,this.nodeShapes[this.getNodeShape(n)].draw(e,o,s,g,v,E,y),e.translate(B,M),e.fill(),e.translate(-B,-M)}e.globalAlpha=z,V&&this.setImgSmoothing(e,F)}};var ha={};function ho(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,o=Math.min(a,r/2,i/2);e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath()}ha.eleTextBiggerThanMin=function(e,t){return t||(t=Math.pow(2,Math.ceil(n9(e.cy().zoom()*this.getPixelRatio())))),!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},ha.drawElementText=function(e,t,n,r,i){var a,o=!(arguments.length>5)||void 0===arguments[5]||arguments[5];if(null==r){if(o&&!this.eleTextBiggerThanMin(t))return}else if(!1===r)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;e.textAlign=this.getLabelJustification(t),e.textBaseline="bottom"}else{var l=t.element()._private.rscratch.badLine,u=t.pstyle("label"),c=t.pstyle("source-label"),h=t.pstyle("target-label");if(l||(!u||!u.value)&&(!c||!c.value)&&(!h||!h.value))return;e.textAlign="center",e.textBaseline="bottom"}var d=!n;n&&(a=n,e.translate(-a.x1,-a.y1)),null==i?(this.drawText(e,t,null,d,o),t.isEdge()&&(this.drawText(e,t,"source",d,o),this.drawText(e,t,"target",d,o))):this.drawText(e,t,i,d,o),n&&e.translate(a.x1,a.y1)},ha.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((t=this.fontCaches[n]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},ha.setupTextStyle=function(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,o=t.pstyle("font-weight").strValue,s=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*s,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=r+" "+o+" "+i+" "+a,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},ha.getTextAngle=function(e,t){var n,r=e._private.rscratch,i=t?t+"-":"",a=e.pstyle(i+"text-rotation");if("autorotate"===a.strValue){var o=nI(r,"labelAngle",t);n=e.isEdge()?o:0}else n="none"===a.strValue?0:a.pfValue;return n},ha.drawText=function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=t._private.rscratch,o=i?t.effectiveOpacity():1;if(!i||0!==o&&0!==t.pstyle("text-opacity").value){"main"===n&&(n=null);var s=nI(a,"labelX",n),l=nI(a,"labelY",n),u=this.getLabelText(t,n);if(null!=u&&""!==u&&!isNaN(s)&&!isNaN(l)){this.setupTextStyle(e,t,i);var c,h,d,f=n?n+"-":"",p=nI(a,"labelWidth",n),g=nI(a,"labelHeight",n),v=t.pstyle(f+"text-margin-x").pfValue,y=t.pstyle(f+"text-margin-y").pfValue,b=t.isEdge(),x=t.pstyle("text-halign").value,w=t.pstyle("text-valign").value;switch(b&&(x="center",w="center"),s+=v,l+=y,0!==(d=r?this.getTextAngle(t,n):0)&&(c=s,h=l,e.translate(c,h),e.rotate(d),s=0,l=0),w){case"top":break;case"center":l+=g/2;break;case"bottom":l+=g}var E=t.pstyle("text-background-opacity").value,T=t.pstyle("text-border-opacity").value,C=t.pstyle("text-border-width").pfValue,S=t.pstyle("text-background-padding").pfValue,k=t.pstyle("text-background-shape").strValue,P="round-rectangle"===k||"roundrectangle"===k;if(E>0||C>0&&T>0){var B,A,D=e.fillStyle,_=e.strokeStyle,R=e.lineWidth,M=t.pstyle("text-background-color").value,O=t.pstyle("text-border-color").value,I=t.pstyle("text-border-style").value,N=E>0,L=C>0&&T>0,z=s-S;switch(x){case"left":z-=p;break;case"center":z-=p/2}var F=l-g-S,V=p+2*S,j=g+2*S;if(N&&(e.fillStyle="rgba(".concat(M[0],",").concat(M[1],",").concat(M[2],",").concat(E*o,")")),L&&(e.strokeStyle="rgba(".concat(O[0],",").concat(O[1],",").concat(O[2],",").concat(T*o,")"),e.lineWidth=C,e.setLineDash))switch(I){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=C/4,e.setLineDash([]);break;default:e.setLineDash([])}if(P?(e.beginPath(),ho(e,z,F,V,j,2)):"circle"===k?(e.beginPath(),B=z,A=Math.min(V,j),e.beginPath(),e.arc(B+V/2,F+j/2,A/2,0,2*Math.PI),e.closePath()):(e.beginPath(),e.rect(z,F,V,j)),N&&e.fill(),L&&e.stroke(),L&&"double"===I){var U=C/2;e.beginPath(),P?ho(e,z+U,F+U,V-2*U,j-2*U,2):e.rect(z+U,F+U,V-2*U,j-2*U),e.stroke()}e.fillStyle=D,e.strokeStyle=_,e.lineWidth=R,e.setLineDash&&e.setLineDash([])}var q=2*t.pstyle("text-outline-width").pfValue;if(q>0&&(e.lineWidth=q),"wrap"===t.pstyle("text-wrap").value){var X=nI(a,"labelWrapCachedLines",n),Y=nI(a,"labelLineHeight",n),W=p/2,H=this.getLabelJustification(t);switch("auto"===H||("left"===x?"left"===H?s+=-p:"center"===H&&(s+=-W):"center"===x?"left"===H?s+=-W:"right"===H&&(s+=W):"right"===x&&("center"===H?s+=W:"right"===H&&(s+=p))),w){case"top":case"center":case"bottom":l-=(X.length-1)*Y}for(var G=0;G<X.length;G++)q>0&&e.strokeText(X[G],s,l),e.fillText(X[G],s,l),l+=Y}else q>0&&e.strokeText(u,s,l),e.fillText(u,s,l);0!==d&&(e.rotate(-d),e.translate(-c,-h))}}};var hs={};hs.drawNode=function(e,t,n){var r,i,a,o,s=!(arguments.length>3)||void 0===arguments[3]||arguments[3],l=!(arguments.length>4)||void 0===arguments[4]||arguments[4],u=!(arguments.length>5)||void 0===arguments[5]||arguments[5],c=this,h=t._private,d=h.rscratch,f=t.position();if(tD(f.x)&&tD(f.y)&&(!u||t.visible())){var p=u?t.effectiveOpacity():1,g=c.usePaths(),v=!1,y=t.padding();r=t.width()+2*y,i=t.height()+2*y,n&&(o=n,e.translate(-o.x1,-o.y1));for(var b=t.pstyle("background-image").value,x=Array(b.length),w=Array(b.length),E=0,T=0;T<b.length;T++){var C=b[T];if(x[T]=null!=C&&"none"!==C){var S=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",T);E++,w[T]=c.getCachedImage(C,S,function(){h.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var k=t.pstyle("background-blacken").value,P=t.pstyle("border-width").pfValue,B=t.pstyle("background-opacity").value*p,A=t.pstyle("border-color").value,D=t.pstyle("border-style").value,_=t.pstyle("border-join").value,R=t.pstyle("border-cap").value,M=t.pstyle("border-position").value,O=t.pstyle("border-dash-pattern").pfValue,I=t.pstyle("border-dash-offset").pfValue,N=t.pstyle("border-opacity").value*p,L=t.pstyle("outline-width").pfValue,z=t.pstyle("outline-color").value,F=t.pstyle("outline-style").value,V=t.pstyle("outline-opacity").value*p,j=t.pstyle("outline-offset").value,U=t.pstyle("corner-radius").value;"auto"!==U&&(U=t.pstyle("corner-radius").pfValue);var q=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;c.eleFillStyle(e,t,n)},X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;c.colorStrokeStyle(e,A[0],A[1],A[2],t)},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;c.colorStrokeStyle(e,z[0],z[1],z[2],t)},W=function(e,t,n,r){var i,a=c.nodePathCache=c.nodePathCache||[],o=np("polygon"===n?n+","+r.join(","):n,""+t,""+e,""+U),s=a[o],l=!1;return null!=s?(l=!0,d.pathCache=i=s):(i=new Path2D,a[o]=d.pathCache=i),{path:i,cacheHit:l}},H=t.pstyle("shape").strValue,G=t.pstyle("shape-polygon-points").pfValue;if(g){e.translate(f.x,f.y);var K=W(r,i,H,G);a=K.path,v=K.cacheHit}var Z=function(){if(!v){var n=f;g&&(n={x:0,y:0}),c.nodeShapes[c.getNodeShape(t)].draw(a||e,n.x,n.y,r,i,U,d)}g?e.fill(a):e.fill()},$=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=h.backgrounding,a=0,o=0;o<w.length;o++){var s=t.cy().style().getIndexedStyle(t,"background-image-containment","value",o);if(r&&"over"===s||!r&&"inside"===s){a++;continue}x[o]&&w[o].complete&&!w[o].error&&(a++,c.drawInscribedImage(e,w[o],t,o,n))}h.backgrounding=a!==E,i!==h.backgrounding&&t.updateStyle(!1)},Q=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;c.hasPie(t)&&(c.drawPie(e,t,a),n&&!g&&c.nodeShapes[c.getNodeShape(t)].draw(e,f.x,f.y,r,i,U,d))},J=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;c.hasStripe(t)&&(e.save(),g?e.clip(d.pathCache):(c.nodeShapes[c.getNodeShape(t)].draw(e,f.x,f.y,r,i,U,d),e.clip()),c.drawStripe(e,t,a),e.restore(),n&&!g&&c.nodeShapes[c.getNodeShape(t)].draw(e,f.x,f.y,r,i,U,d))},ee=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=k>0?0:255;0!==k&&(c.colorFillStyle(e,n,n,n,(k>0?k:-k)*t),g?e.fill(a):e.fill())},et=function(){if(P>0){if(e.lineWidth=P,e.lineCap=R,e.lineJoin=_,e.setLineDash)switch(D){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(O),e.lineDashOffset=I;break;case"solid":case"double":e.setLineDash([])}if("center"!==M){if(e.save(),e.lineWidth*=2,"inside"===M)g?e.clip(a):e.clip();else{var t=new Path2D;t.rect(-r/2-P,-i/2-P,r+2*P,i+2*P),t.addPath(a),e.clip(t,"evenodd")}g?e.stroke(a):e.stroke(),e.restore()}else g?e.stroke(a):e.stroke();if("double"===D){e.lineWidth=P/3;var n=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",g?e.stroke(a):e.stroke(),e.globalCompositeOperation=n}e.setLineDash&&e.setLineDash([])}},en=function(){if(L>0){if(e.lineWidth=L,e.lineCap="butt",e.setLineDash)switch(F){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var n=f;g&&(n={x:0,y:0});var a=c.getNodeShape(t),o=P;"inside"===M&&(o=0),"outside"===M&&(o*=2);var s=(r+o+(L+j))/r,l=(i+o+(L+j))/i,u=r*s,h=i*l,d=c.nodeShapes[a].points;if(g&&(S=W(u,h,a,d).path),"ellipse"===a)c.drawEllipsePath(S||e,n.x,n.y,u,h);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(a)){var p=0,v=0,y=0;"round-diamond"===a?p=(o+j+L)*1.4:"round-heptagon"===a?(p=(o+j+L)*1.075,y=-(o/2+j+L)/35):"round-hexagon"===a?p=(o+j+L)*1.12:"round-pentagon"===a?(p=(o+j+L)*1.13,y=-(o/2+j+L)/15):"round-tag"===a?(p=(o+j+L)*1.12,v=(o/2+L+j)*.07):"round-triangle"===a&&(p=Math.PI/2*(o+j+L),y=-(o+j/2+L)/Math.PI),0!==p&&(s=(r+p)/r,u=r*s,["round-hexagon","round-tag"].includes(a)||(l=(i+p)/i,h=i*l)),U="auto"===U?rX(u,h):U;for(var b=u/2,x=h/2,w=U+(o+L+j)/2,E=Array(d.length/2),T=Array(d.length/2),C=0;C<d.length/2;C++)E[C]={x:n.x+v+b*d[2*C],y:n.y+y+x*d[2*C+1]};var S,k,B,A,D,_=E.length;for(k=0,B=E[_-1];k<_;k++)A=E[k%_],D=E[(k+1)%_],T[k]=cw(B,A,D,w),B=A,A=D;c.drawRoundPolygonPath(S||e,n.x+v,n.y+y,r*s,i*l,d,T)}else["roundrectangle","round-rectangle"].includes(a)?(U="auto"===U?rq(u,h):U,c.drawRoundRectanglePath(S||e,n.x,n.y,u,h,U+(o+L+j)/2)):["cutrectangle","cut-rectangle"].includes(a)?(U="auto"===U?rY():U,c.drawCutRectanglePath(S||e,n.x,n.y,u,h,null,U+(o+L+j)/4)):["bottomroundrectangle","bottom-round-rectangle"].includes(a)?(U="auto"===U?rq(u,h):U,c.drawBottomRoundRectanglePath(S||e,n.x,n.y,u,h,U+(o+L+j)/2)):"barrel"===a?c.drawBarrelPath(S||e,n.x,n.y,u,h):(d=a.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(a)?rA(rD(d,(o+L+j)/r)):rA(rD(d,-((o+L+j)/r))),c.drawPolygonPath(S||e,n.x,n.y,r,i,d));if(g?e.stroke(S):e.stroke(),"double"===F){e.lineWidth=o/3;var R=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",g?e.stroke(S):e.stroke(),e.globalCompositeOperation=R}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var er=t.pstyle("ghost-offset-x").pfValue,ei=t.pstyle("ghost-offset-y").pfValue,ea=t.pstyle("ghost-opacity").value,eo=ea*p;e.translate(er,ei),Y(),en(),q(ea*B),Z(),$(eo,!0),X(ea*N),et(),Q(0!==k||0!==P),J(0!==k||0!==P),$(eo,!1),ee(eo),e.translate(-er,-ei)}g&&e.translate(-f.x,-f.y),l&&c.drawNodeUnderlay(e,t,f,r,i),g&&e.translate(f.x,f.y),Y(),en(),q(),Z(),$(p,!0),X(),et(),Q(0!==k||0!==P),J(0!==k||0!==P),$(p,!1),ee(),g&&e.translate(-f.x,-f.y),c.drawElementText(e,t,null,s),l&&c.drawNodeOverlay(e,t,f,r,i),n&&e.translate(o.x1,o.y1)}};var hl=function(e){if(!["overlay","underlay"].includes(e))throw Error("Invalid state");return function(t,n,r,i,a){if(n.visible()){var o=n.pstyle("".concat(e,"-padding")).pfValue,s=n.pstyle("".concat(e,"-opacity")).value,l=n.pstyle("".concat(e,"-color")).value,u=n.pstyle("".concat(e,"-shape")).value,c=n.pstyle("".concat(e,"-corner-radius")).value;if(s>0){if(r=r||n.position(),null==i||null==a){var h=n.padding();i=n.width()+2*h,a=n.height()+2*h}this.colorFillStyle(t,l[0],l[1],l[2],s),this.nodeShapes[u].draw(t,r.x,r.y,i+2*o,a+2*o,c),t.fill()}}}};hs.drawNodeOverlay=hl("overlay"),hs.drawNodeUnderlay=hl("underlay"),hs.hasPie=function(e){return(e=e[0])._private.hasPie},hs.hasStripe=function(e){return(e=e[0])._private.hasStripe},hs.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var i,a=t.cy().style(),o=t.pstyle("pie-size"),s=t.pstyle("pie-hole"),l=t.pstyle("pie-start-angle").pfValue,u=r.x,c=r.y,h=Math.min(t.width(),t.height())/2,d=0;if(this.usePaths()&&(u=0,c=0),"%"===o.units?h*=o.pfValue:void 0!==o.pfValue&&(h=o.pfValue/2),"%"===s.units?i=h*s.pfValue:void 0!==s.pfValue&&(i=s.pfValue/2),!(i>=h))for(var f=1;f<=a.pieBackgroundN;f++){var p=t.pstyle("pie-"+f+"-background-size").value,g=t.pstyle("pie-"+f+"-background-color").value,v=t.pstyle("pie-"+f+"-background-opacity").value*n,y=p/100;y+d>1&&(y=1-d);var b=1.5*Math.PI+2*Math.PI*d,x=2*Math.PI*y,w=(b+=l)+x;0===p||d>=1||d+y>1||(0===i?(e.beginPath(),e.moveTo(u,c),e.arc(u,c,h,b,w)):(e.beginPath(),e.arc(u,c,h,b,w),e.arc(u,c,i,w,b,!0)),e.closePath(),this.colorFillStyle(e,g[0],g[1],g[2],v),e.fill(),d+=y)}},hs.drawStripe=function(e,t,n,r){t=t[0],r=r||t.position();var i=t.cy().style(),a=r.x,o=r.y,s=t.width(),l=t.height(),u=0,c=this.usePaths();e.save();var h=t.pstyle("stripe-direction").value,d=t.pstyle("stripe-size");switch(h){case"vertical":break;case"righward":e.rotate(-Math.PI/2)}var f=s,p=l;"%"===d.units?(f*=d.pfValue,p*=d.pfValue):void 0!==d.pfValue&&(f=d.pfValue,p=d.pfValue),c&&(a=0,o=0),o-=f/2,a-=p/2;for(var g=1;g<=i.stripeBackgroundN;g++){var v=t.pstyle("stripe-"+g+"-background-size").value,y=t.pstyle("stripe-"+g+"-background-color").value,b=t.pstyle("stripe-"+g+"-background-opacity").value*n,x=v/100;x+u>1&&(x=1-u),0===v||u>=1||u+x>1||(e.beginPath(),e.rect(a,o+p*u,f,p*x),e.closePath(),this.colorFillStyle(e,y[0],y[1],y[2],b),e.fill(),u+=x)}e.restore()};var hu={};function hc(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error(e.getShaderInfoLog(r));return r}function hh(e,t,n){void 0===n&&(n=t);var r=e.makeOffscreenCanvas(t,n),i=r.context=r.getContext("2d");return r.clear=function(){return i.clearRect(0,0,r.width,r.height)},r.clear(),r}function hd(e){var t=e.pixelRatio,n=e.cy.zoom(),r=e.cy.pan();return{zoom:n*t,pan:{x:r.x*t,y:r.y*t}}}function hf(e){return"solid"===e.pstyle("background-fill").value&&"none"===e.pstyle("background-image").strValue&&(0===e.pstyle("border-width").value||0===e.pstyle("border-opacity").value||"solid"===e.pstyle("border-style").value)}function hp(e,t,n){var r=e[0]/255,i=e[1]/255,a=e[2]/255,o=n||[,,,,];return o[0]=r*t,o[1]=i*t,o[2]=a*t,o[3]=t,o}function hg(e,t){var n=t||[,,,,];return n[0]=((0|e)&255)/255,n[1]=(e>>8&255)/255,n[2]=(e>>16&255)/255,n[3]=(e>>24&255)/255,n}function hv(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function hy(e,t,n){switch(t){case e.FLOAT:return new Float32Array(n);case e.INT:return new Int32Array(n)}}function hm(e,t,n,r){var i=tp(hv(e,n),3),a=i[0],o=i[1],s=i[2],l=hy(e,o,t*a),u=a*s,c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,t*u,e.DYNAMIC_DRAW),e.enableVertexAttribArray(r),o===e.FLOAT?e.vertexAttribPointer(r,a,o,!1,u,0):o===e.INT&&e.vertexAttribIPointer(r,a,o,u,0),e.vertexAttribDivisor(r,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var h=Array(t),d=0;d<t;d++)h[d]=function(e,t,n,r,i,a){switch(t){case e.FLOAT:return new Float32Array(n.buffer,a*r,i);case e.INT:return new Int32Array(n.buffer,a*r,i)}}(e,o,l,u,a,d);return c.dataArray=l,c.stride=u,c.size=a,c.getView=function(e){return h[e]},c.setPoint=function(e,t,n){var r=h[e];r[0]=t,r[1]=n},c.bufferSubData=function(t){e.bindBuffer(e.ARRAY_BUFFER,c),t?e.bufferSubData(e.ARRAY_BUFFER,0,l,0,t*a):e.bufferSubData(e.ARRAY_BUFFER,0,l)},c}hu.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=this.cy.window(),n=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/n},hu.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((t=n[i]).context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},hu.createGradientStyleFor=function(e,t,n,r,i){var a,o=this.usePaths(),s=n.pstyle(t+"-gradient-stop-colors").value,l=n.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),h=n.midpoint(),d=re(u,h),f=re(c,h);a=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,f))}else{var p=o?{x:0,y:0}:n.position(),g=n.paddedWidth(),v=n.paddedHeight();a=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,v))}else if(n.isEdge()){var y=n.sourceEndpoint(),b=n.targetEndpoint();a=e.createLinearGradient(y.x,y.y,b.x,b.y)}else{var x=o?{x:0,y:0}:n.position(),w=n.paddedWidth(),E=n.paddedHeight(),T=w/2,C=E/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":a=e.createLinearGradient(x.x,x.y-C,x.x,x.y+C);break;case"to-top":a=e.createLinearGradient(x.x,x.y+C,x.x,x.y-C);break;case"to-left":a=e.createLinearGradient(x.x+T,x.y,x.x-T,x.y);break;case"to-right":a=e.createLinearGradient(x.x-T,x.y,x.x+T,x.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(x.x-T,x.y-C,x.x+T,x.y+C);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(x.x-T,x.y+C,x.x+T,x.y-C);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(x.x+T,x.y-C,x.x-T,x.y+C);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(x.x+T,x.y+C,x.x-T,x.y-C)}}if(!a)return null;for(var S=l.length===s.length,k=s.length,P=0;P<k;P++)a.addColorStop(S?l[P]:P/(k-1),"rgba("+s[P][0]+","+s[P][1]+","+s[P][2]+","+i+")");return a},hu.gradientFillStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"background",t,n,r);if(!i)return null;e.fillStyle=i},hu.colorFillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},hu.eleFillStyle=function(e,t,n){var r=t.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(e,t,r,n);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],n)}},hu.gradientStrokeStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"line",t,n,r);if(!i)return null;e.strokeStyle=i},hu.colorStrokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},hu.eleStrokeStyle=function(e,t,n){var r=t.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(e,t,r,n);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],n)}},hu.matchCanvasSize=function(e){var t,n=this.data,r=this.findContainerClientCoords(),i=r[2],a=r[3],o=this.getPixelRatio(),s=this.motionBlurPxRatio;(e===this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_NODE]||e===this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=i*o,u=a*o;if(l!==this.canvasWidth||u!==this.canvasHeight){this.fontCaches=null;var c=n.canvasContainer;c.style.width=i+"px",c.style.height=a+"px";for(var h=0;h<this.CANVAS_LAYERS;h++)(t=n.canvases[h]).width=l,t.height=u,t.style.width=i+"px",t.style.height=a+"px";for(var h=0;h<this.BUFFER_COUNT;h++)(t=n.bufferCanvases[h]).width=l,t.height=u,t.style.width=i+"px",t.style.height=a+"px";this.textureMult=1,o<=1&&(t=n.bufferCanvases[this.TEXTURE_BUFFER],this.textureMult=2,t.width=l*this.textureMult,t.height=u*this.textureMult),this.canvasWidth=l,this.canvasHeight=u,this.pixelRatio=o}},hu.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},hu.clearCanvas=function(){var e=this,t=e.data;function n(t){t.clearRect(0,0,e.canvasWidth,e.canvasHeight)}n(t.contexts[e.NODE]),n(t.contexts[e.DRAG])},hu.render=function(e){var t=this;e=e||nD();var n=t.cy,r=e.forcedContext,i=e.drawAllLayers,a=e.drawOnlyNodeLayer,o=e.forcedZoom,s=e.forcedPan,l=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,u=t.data,c=u.canvasNeedsRedraw,h=t.textureOnViewport&&!r&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),d=void 0!==e.motionBlur?e.motionBlur:t.motionBlur,f=t.motionBlurPxRatio,p=n.hasCompoundNodes(),g=t.hoverData.draggingEles,v=!!t.hoverData.selecting||!!t.touchData.selecting,y=d=d&&!r&&t.motionBlurEnabled&&!v;r||(t.prevPxRatio!==l&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=l),!r&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),d&&(null==t.mbFrames&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(y=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!h&&(c[t.NODE]=!0,c[t.SELECT_BOX]=!0);var b=n.style(),x=n.zoom(),w=void 0!==o?o:x,E=n.pan(),T={x:E.x,y:E.y},C={zoom:x,pan:{x:E.x,y:E.y}},S=t.prevViewport;void 0===S||C.zoom!==S.zoom||C.pan.x!==S.pan.x||C.pan.y!==S.pan.y||g&&!p||(t.motionBlurPxRatio=1),s&&(T=s),w*=l,T.x*=l,T.y*=l;var k=t.getCachedZSortedEles();function P(e,n,r,i,a){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",t.colorFillStyle(e,255,255,255,t.motionBlurTransparency),e.fillRect(n,r,i,a),e.globalCompositeOperation=o}function B(e,n){var a,l,c,h;t.clearingMotionBlur||e!==u.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&e!==u.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?(a=T,l=w,c=t.canvasWidth,h=t.canvasHeight):(a={x:E.x*f,y:E.y*f},l=x*f,c=t.canvasWidth*f,h=t.canvasHeight*f),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?P(e,0,0,c,h):!r&&(void 0===n||n)&&e.clearRect(0,0,c,h),i||(e.translate(a.x,a.y),e.scale(l,l)),s&&e.translate(s.x,s.y),o&&e.scale(o,o)}if(h||(t.textureDrawLastFrame=!1),h){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=n.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var A=t.data.bufferContexts[t.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:l*t.textureMult});var C=t.textureCache.viewport={zoom:n.zoom(),pan:n.pan(),width:t.canvasWidth,height:t.canvasHeight};C.mpan={x:(0-C.pan.x)/C.zoom,y:(0-C.pan.y)/C.zoom}}c[t.DRAG]=!1,c[t.NODE]=!1;var D=u.contexts[t.NODE],_=t.textureCache.texture,C=t.textureCache.viewport;D.setTransform(1,0,0,1,0,0),d?P(D,0,0,C.width,C.height):D.clearRect(0,0,C.width,C.height);var R=b.core("outside-texture-bg-color").value,M=b.core("outside-texture-bg-opacity").value;t.colorFillStyle(D,R[0],R[1],R[2],M),D.fillRect(0,0,C.width,C.height);var x=n.zoom();B(D,!1),D.clearRect(C.mpan.x,C.mpan.y,C.width/C.zoom/l,C.height/C.zoom/l),D.drawImage(_,C.mpan.x,C.mpan.y,C.width/C.zoom/l,C.height/C.zoom/l)}else t.textureOnViewport&&!r&&(t.textureCache=null);var O=n.extent(),I=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),N=t.hideEdgesOnViewport&&I,L=[];if(L[t.NODE]=!c[t.NODE]&&d&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,L[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),L[t.DRAG]=!c[t.DRAG]&&d&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,L[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),c[t.NODE]||i||a||L[t.NODE]){var z=d&&!L[t.NODE]&&1!==f,D=r||(z?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:u.contexts[t.NODE]);B(D,d&&!z?"motionBlur":void 0),N?t.drawCachedNodes(D,k.nondrag,l,O):t.drawLayeredElements(D,k.nondrag,l,O),t.debug&&t.drawDebugPoints(D,k.nondrag),i||d||(c[t.NODE]=!1)}if(!a&&(c[t.DRAG]||i||L[t.DRAG])){var z=d&&!L[t.DRAG]&&1!==f,D=r||(z?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:u.contexts[t.DRAG]);B(D,d&&!z?"motionBlur":void 0),N?t.drawCachedNodes(D,k.drag,l,O):t.drawCachedElements(D,k.drag,l,O),t.debug&&t.drawDebugPoints(D,k.drag),i||d||(c[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,B),d&&1!==f){var F=u.contexts[t.NODE],V=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],j=u.contexts[t.DRAG],U=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],q=function(e,n,r){e.setTransform(1,0,0,1,0,0),r||!y?e.clearRect(0,0,t.canvasWidth,t.canvasHeight):P(e,0,0,t.canvasWidth,t.canvasHeight),e.drawImage(n,0,0,t.canvasWidth*f,t.canvasHeight*f,0,0,t.canvasWidth,t.canvasHeight)};(c[t.NODE]||L[t.NODE])&&(q(F,V,L[t.NODE]),c[t.NODE]=!1),(c[t.DRAG]||L[t.DRAG])&&(q(j,U,L[t.DRAG]),c[t.DRAG]=!1)}t.prevViewport=C,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),d&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!h,t.mbFrames=0,c[t.NODE]=!0,c[t.DRAG]=!0,t.redraw()},100)),r||n.emit("render")},hu.drawSelectionRectangle=function(e,t){var n=this.cy,r=this.data,i=n.style(),a=e.drawOnlyNodeLayer,o=e.drawAllLayers,l=r.canvasNeedsRedraw,u=e.forcedContext;if(this.showFps||!a&&l[this.SELECT_BOX]&&!o){var c=u||r.contexts[this.SELECT_BOX];if(t(c),1==this.selection[4]&&(this.hoverData.selecting||this.touchData.selecting)){var h=this.cy.zoom(),d=i.core("selection-box-border-width").value/h;c.lineWidth=d,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(this.selection[0],this.selection[1],this.selection[2]-this.selection[0],this.selection[3]-this.selection[1]),d>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(this.selection[0],this.selection[1],this.selection[2]-this.selection[0],this.selection[3]-this.selection[1]))}if(r.bgActivePosistion&&!this.hoverData.selecting){var h=this.cy.zoom(),f=r.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(f.x,f.y,i.core("active-bg-size").pfValue/h,0,2*Math.PI),c.fill()}var p=this.lastRedrawTime;if(this.showFps&&p){var g=Math.round(1e3/(p=Math.round(p))),v="1 frame = "+p+" ms = "+g+" fps";c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",s||(s=c.measureText(v).actualBoundingBoxAscent),c.fillText(v,0,s),c.strokeRect(0,s+10,250,20),c.fillRect(0,s+10,250*Math.min(g/60,1),20)}o||(l[this.SELECT_BOX]=!1)}};var hb="undefined"!=typeof Float32Array?Float32Array:Array;function hx(){var e=new hb(9);return hb!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function hw(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function hE(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=n[0],f=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=d*r+f*o+u,e[7]=d*i+f*s+c,e[8]=d*a+f*l+h,e}function hT(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=Math.sin(n),f=Math.cos(n);return e[0]=f*r+d*o,e[1]=f*i+d*s,e[2]=f*a+d*l,e[3]=f*o-d*r,e[4]=f*s-d*i,e[5]=f*l-d*a,e[6]=u,e[7]=c,e[8]=h,e}function hC(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var hS=th(function e(t,n,r,i){tc(this,e),this.debugID=Math.floor(1e4*Math.random()),this.r=t,this.texSize=n,this.texRows=r,this.texHeight=Math.floor(n/r),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(t,n,n),this.scratch=i(t,n,this.texHeight,"scratch")},[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(e){var t=e.w,n=e.h,r=this.texHeight,i=this.texSize,a=r/n,o=t*a,s=n*a;return o>i&&(a=i/t,o=t*a,s=n*a),{scale:a,texW:o,texH:s}}},{key:"draw",value:function(e,t,n){var r,i,a,o,s,l,u,c=this;if(this.locked)throw Error("can't draw, atlas is locked");var h=this.texSize,d=this.texRows,f=this.texHeight,p=this.getScale(t),g=p.scale,v=p.texW,y=p.texH,b=function(e,r){if(n&&r){var i=r.context,a=e.x,o=f*e.row;i.save(),i.translate(a,o),i.scale(g,g),n(i,t),i.restore()}},x=[null,null],w=function(){b(c.freePointer,c.canvas),x[0]={x:c.freePointer.x,y:c.freePointer.row*f,w:v,h:y},x[1]={x:c.freePointer.x+v,y:c.freePointer.row*f,w:0,h:y},c.freePointer.x+=v,c.freePointer.x==h&&(c.freePointer.x=0,c.freePointer.row++)},E=function(){c.freePointer.x=0,c.freePointer.row++};if(this.freePointer.x+v<=h)w();else{if(this.freePointer.row>=d-1)return!1;this.freePointer.x===h?(E(),w()):this.enableWrapping?(r=c.scratch,i=c.canvas,r.clear(),b({x:0,row:0},r),o=v-(a=h-c.freePointer.x),s=c.freePointer.x,l=c.freePointer.row*f,i.context.drawImage(r,0,0,a,f,s,l,a,f),x[0]={x:s,y:l,w:a,h:y},u=(c.freePointer.row+1)*f,i&&i.context.drawImage(r,a,0,o,f,0,u,o,f),x[1]={x:0,y:u,w:o,h:y},c.freePointer.x=o,c.freePointer.row++):(E(),w())}return this.keyToLocation.set(e,x),this.needsBuffer=!0,x}},{key:"getOffsets",value:function(e){return this.keyToLocation.get(e)}},{key:"isEmpty",value:function(){return 0===this.freePointer.x&&0===this.freePointer.row}},{key:"canFit",value:function(e){if(this.locked)return!1;var t=this.texSize,n=this.texRows,r=this.getScale(e).texW;return!(this.freePointer.x+r>t)||this.freePointer.row<n-1}},{key:"bufferIfNeeded",value:function(e){var t;this.texture||(this.texture=(this.debugID,(t=e.createTexture()).buffer=function(n){e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},t.deleteTexture=function(){e.deleteTexture(t)},t)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}]),hk=th(function e(t,n,r,i){tc(this,e),this.r=t,this.texSize=n,this.texRows=r,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set},[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){return new hS(this.r,this.texSize,this.texRows,this.createTextureCanvas)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var e=this.r,t=this.texSize,n=this.texRows,r=this.createTextureCanvas,i=Math.floor(t/n);this.scratch=r(e,t,i,"scratch")}return this.scratch}},{key:"draw",value:function(e,t,n){var r=this.styleKeyToAtlas.get(e);return r||((r=this.atlases[this.atlases.length-1])&&r.canFit(t)||(r&&r.lock(),r=this._createAtlas(),this.atlases.push(r)),r.draw(e,t,n),this.styleKeyToAtlas.set(e,r)),r}},{key:"getAtlas",value:function(e){return this.styleKeyToAtlas.get(e)}},{key:"hasAtlas",value:function(e){return this.styleKeyToAtlas.has(e)}},{key:"markKeyForGC",value:function(e){this.markedKeys.add(e)}},{key:"gc",value:function(){var e=this,t=this.markedKeys;if(0===t.size)return void console.log("nothing to garbage collect");var n,r=[],i=new Map,a=null,o=td(this.atlases);try{for(o.s();!(n=o.n()).done;)if(function(){var o=n.value,s=o.getKeys(),l=function(e,t){return e.intersection?e.intersection(t):new Set(tg(e).filter(function(e){return t.has(e)}))}(t,s);if(0===l.size)return r.push(o),s.forEach(function(e){return i.set(e,o)}),1;a||(a=e._createAtlas(),r.push(a));var u,c=td(s);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(!l.has(h)){var d=o.getOffsets(h),f=tp(d,2),p=f[0],g=f[1];a.canFit({w:p.w+g.w,h:p.h})||(a.lock(),a=e._createAtlas(),r.push(a)),o.canvas&&(e._copyTextureToNewAtlas(h,o,a),i.set(h,a))}}}catch(e){c.e(e)}finally{c.f()}o.dispose()}())continue}catch(e){o.e(e)}finally{o.f()}this.atlases=r,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(e,t,n){var r=tp(t.getOffsets(e),2),i=r[0],a=r[1];if(0===a.w)n.draw(e,i,function(e){e.drawImage(t.canvas,i.x,i.y,i.w,i.h,0,0,i.w,i.h)});else{var o=this._getScratchCanvas();o.clear(),o.context.drawImage(t.canvas,i.x,i.y,i.w,i.h,0,0,i.w,i.h),o.context.drawImage(t.canvas,a.x,a.y,a.w,a.h,i.w,0,a.w,a.h);var s=i.w+a.w,l=i.h;n.draw(e,{w:s,h:l},function(e){e.drawImage(o,0,0,s,l,0,0,s,l)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}]),hP=th(function e(t,n){tc(this,e),this.r=t,this.globalOptions=n,this.atlasSize=n.webglTexSize,this.maxAtlasesPerBatch=n.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map},[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(e,t){var n=this.globalOptions,r=n.webglTexSize,i=n.createTextureCanvas,a=t.texRows,o=this._cacheScratchCanvas(i),s=new hk(this.r,r,a,o);this.collections.set(e,s)}},{key:"addRenderType",value:function(e,t){var n=t.collection;if(!this.collections.has(n))throw Error("invalid atlas collection name '".concat(n,"'"));var r=t$({type:e,atlasCollection:this.collections.get(n)},t);this.renderTypes.set(e,r)}},{key:"getRenderTypeOpts",value:function(e){return this.renderTypes.get(e)}},{key:"getAtlasCollection",value:function(e){return this.collections.get(e)}},{key:"_cacheScratchCanvas",value:function(e){var t=-1,n=-1,r=null;return function(i,a,o,s){return s?(r&&a==t&&o==n||(t=a,n=o,r=e(i,a,o)),r):e(i,a,o)}}},{key:"_key",value:function(e,t){return"".concat(e,"-").concat(t)}},{key:"invalidate",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.forceRedraw,a=void 0!==i&&i,o=r.filterEle,s=void 0===o?function(){return!0}:o,l=r.filterType,u=void 0===l?function(){return!0}:l,c=!1,h=!1,d=td(e);try{for(d.s();!(t=d.n()).done;){var f=t.value;if(s(f)){var p,g=td(this.renderTypes.values());try{for(g.s();!(p=g.n()).done;)!function(){var e=p.value,t=e.type;if(u(t)){var r=n.collections.get(e.collection),i=e.getKey(f),o=Array.isArray(i)?i:[i];if(a)o.forEach(function(e){return r.markKeyForGC(e)}),h=!0;else{var s=e.getID?e.getID(f):f.id(),l=n._key(t,s),d=n.typeAndIdToKey.get(l);void 0!==d&&!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(o,d)&&(c=!0,n.typeAndIdToKey.delete(l),d.forEach(function(e){return r.markKeyForGC(e)}))}}}()}catch(e){g.e(e)}finally{g.f()}}}}catch(e){d.e(e)}finally{d.f()}return h&&(this.gc(),c=!1),c}},{key:"gc",value:function(){var e,t=td(this.collections.values());try{for(t.s();!(e=t.n()).done;)e.value.gc()}catch(e){t.e(e)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(e,t,n,r){var i=this.renderTypes.get(t),a=this.collections.get(i.collection),o=!1,s=a.draw(r,n,function(t){i.drawClipped?(t.save(),t.beginPath(),t.rect(0,0,n.w,n.h),t.clip(),i.drawElement(t,e,n,!0,!0),t.restore()):i.drawElement(t,e,n,!0,!0),o=!0});if(o){var l=i.getID?i.getID(e):e.id(),u=this._key(t,l);this.typeAndIdToKey.has(u)?this.typeAndIdToKey.get(u).push(r):this.typeAndIdToKey.set(u,[r])}return s}},{key:"getAtlasInfo",value:function(e,t){var n=this,r=this.renderTypes.get(t),i=r.getKey(e);return(Array.isArray(i)?i:[i]).map(function(i){var a=r.getBoundingBox(e,i),o=n.getOrCreateAtlas(e,t,a,i),s=tp(o.getOffsets(i),2),l=s[0];return{atlas:o,tex:l,tex1:l,tex2:s[1],bb:a}})}},{key:"getDebugInfo",value:function(){var e,t=[],n=td(this.collections);try{for(n.s();!(e=n.n()).done;){var r=tp(e.value,2),i=r[0],a=r[1].getCounts(),o=a.keyCount,s=a.atlasCount;t.push({type:i,keyCount:o,atlasCount:s})}}catch(e){n.e(e)}finally{n.f()}return t}}]),hB=th(function e(t){tc(this,e),this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[]},[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(e,t){return t})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(e){return this.batchAtlases.length!==this.maxAtlasesPerBatch||this.batchAtlases.includes(e)}},{key:"getAtlasIndexForBatch",value:function(e){var t=this.batchAtlases.indexOf(e);if(t<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw Error("cannot add more atlases to batch");this.batchAtlases.push(e),t=this.batchAtlases.length-1}return t}}]),hA={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},hD={IGNORE:1,USE_BB:2},h_=th(function e(t,n,r){tc(this,e),this.r=t,this.gl=n,this.maxInstances=r.webglBatchSize,this.atlasSize=r.webglTexSize,this.bgColor=r.bgColor,this.debug=r.webglDebug,this.batchDebugInfo=[],r.enableWrapping=!0,r.createTextureCanvas=hh,this.atlasManager=new hP(t,r),this.batchManager=new hB(r),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(hA.SCREEN),this.pickingProgram=this._createShaderProgram(hA.PICKING),this.vao=this._createVAO()},[{key:"addAtlasCollection",value:function(e,t){this.atlasManager.addAtlasCollection(e,t)}},{key:"addTextureAtlasRenderType",value:function(e,t){this.atlasManager.addRenderType(e,t)}},{key:"addSimpleShapeRenderType",value:function(e,t){this.simpleShapeOptions.set(e,t)}},{key:"invalidate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=this.atlasManager;return n?r.invalidate(e,{filterType:function(e){return e===n},forceRedraw:!0}):r.invalidate(e)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(e){var t=this.gl,n="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType == ".concat(0,") {\n          float texX = aTex.x; // texture coordinates\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(4," || aVertType == ").concat(7," \n             || aVertType == ").concat(5," || aVertType == ").concat(6,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor = aColor;\n          vCornerRadius = aCornerRadius;\n          vBorderColor = aBorderColor;\n          vBorderWidth = aLineWidth;\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(1,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(2,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x == 0.0) { // The left side of the unit square\n            p0 = pointA;\n            p1 = pointB;\n            p2 = pointC;\n            pos = position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth[0];\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2(  0.0,  0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vVertType = aVertType;\n        vIndex = aIndex;\n      }\n    "),r=this.batchManager.getIndexArray(),i=function(e,t,n){var r=hc(e,e.VERTEX_SHADER,t),i=hc(e,e.FRAGMENT_SHADER,n),a=e.createProgram();if(e.attachShader(a,r),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw Error("Could not initialize shaders");return a}(t,n,"#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(r.map(function(e){return"uniform sampler2D uTexture".concat(e,";")}).join("\n	"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat("\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n","\n      ").concat("\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d = abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n","\n      ").concat("\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;\n    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;\n    vec2 q = abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n","\n      ").concat("\n  float ellipseSD(vec2 p, vec2 ab) {\n    p = abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q = ab*(p-ab);\n    float w = (q.x<q.y)? 1.570796327 : 0.0;\n    for( int i=0; i<5; i++ ) {\n      vec2 cs = vec2(cos(w),sin(w));\n      vec2 u = ab*vec2( cs.x,cs.y);\n      vec2 v = ab*vec2(-cs.y,cs.x);\n      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d = length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)>1.0) ? d : -d;\n  }\n","\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          // look up the texel from the texture unit\n          ").concat(r.map(function(e){return"if(vAtlasId == ".concat(e,") outColor = texture(uTexture").concat(e,", vTexCoord);")}).join("\n	else "),"\n        } \n        else if(vVertType == ").concat(3,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';\n          outColor = blend(vColor, uBGColor);\n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType == ").concat(4," && vBorderWidth == vec2(0.0)) { // simple rectangle with no border\n          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType == ").concat(4," || vVertType == ").concat(7," \n          || vVertType == ").concat(5," || vVertType == ").concat(6,") { // use SDF\n\n          float outerBorder = vBorderWidth[0];\n          float innerBorder = vBorderWidth[1];\n          float borderPadding = outerBorder * 2.0;\n          float w = vTopRight.x - vBotLeft.x - borderPadding;\n          float h = vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b = vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType == ").concat(4,") {\n            d = rectangleSD(p, b);\n          } else if(vVertType == ").concat(7," && w == h) {\n            d = circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType == ").concat(7,") {\n            d = ellipseSD(p, b);\n          } else {\n            d = roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d > 0.0) {\n            if(d > outerBorder) {\n              discard;\n            } else {\n              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d > innerBorder) {\n              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor = blend(vBorderColor, vColor);\n              outColor = distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder == 0.0 && outerBorder == 0.0) {\n                outerColor = vec4(0);\n              } else if(innerBorder == 0.0) {\n                outerColor = vBorderColor;\n              } else {\n                outerColor = blend(vBorderColor, vColor);\n              }\n              outColor = distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor = vColor;\n        }\n\n        ").concat(e.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "));i.aPosition=t.getAttribLocation(i,"aPosition"),i.aIndex=t.getAttribLocation(i,"aIndex"),i.aVertType=t.getAttribLocation(i,"aVertType"),i.aTransform=t.getAttribLocation(i,"aTransform"),i.aAtlasId=t.getAttribLocation(i,"aAtlasId"),i.aTex=t.getAttribLocation(i,"aTex"),i.aPointAPointB=t.getAttribLocation(i,"aPointAPointB"),i.aPointCPointD=t.getAttribLocation(i,"aPointCPointD"),i.aLineWidth=t.getAttribLocation(i,"aLineWidth"),i.aColor=t.getAttribLocation(i,"aColor"),i.aCornerRadius=t.getAttribLocation(i,"aCornerRadius"),i.aBorderColor=t.getAttribLocation(i,"aBorderColor"),i.uPanZoomMatrix=t.getUniformLocation(i,"uPanZoomMatrix"),i.uAtlasSize=t.getUniformLocation(i,"uAtlasSize"),i.uBGColor=t.getUniformLocation(i,"uBGColor"),i.uZoom=t.getUniformLocation(i,"uZoom"),i.uTextures=[];for(var a=0;a<this.batchManager.getMaxAtlasesPerBatch();a++)i.uTextures.push(t.getUniformLocation(i,"uTexture".concat(a)));return i}},{key:"_createVAO",value:function(){var e,t,n,r,i,a,o=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=o.length/2;var s=this.maxInstances,l=this.gl,u=this.program,c=l.createVertexArray();return l.bindVertexArray(c),e=u.aPosition,n=(t=tp(hv(l,"vec2"),2))[0],i=hy(l,r=t[1],o),a=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,a),l.bufferData(l.ARRAY_BUFFER,i,l.STATIC_DRAW),r===l.FLOAT?l.vertexAttribPointer(e,n,r,!1,0,0):r===l.INT&&l.vertexAttribIPointer(e,n,r,0,0),l.enableVertexAttribArray(e),l.bindBuffer(l.ARRAY_BUFFER,null),this.transformBuffer=function(e,t,n){for(var r=new Float32Array(9*t),i=Array(t),a=0;a<t;a++){var o=9*a*4;i[a]=new Float32Array(r.buffer,o,9)}var s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,r.byteLength,e.DYNAMIC_DRAW);for(var l=0;l<3;l++){var u=n+l;e.enableVertexAttribArray(u),e.vertexAttribPointer(u,3,e.FLOAT,!1,36,12*l),e.vertexAttribDivisor(u,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),s.getMatrixView=function(e){return i[e]},s.setData=function(e,t){i[t].set(e,0)},s.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferSubData(e.ARRAY_BUFFER,0,r)},s}(l,s,u.aTransform),this.indexBuffer=hm(l,s,"vec4",u.aIndex),this.vertTypeBuffer=hm(l,s,"int",u.aVertType),this.atlasIdBuffer=hm(l,s,"int",u.aAtlasId),this.texBuffer=hm(l,s,"vec4",u.aTex),this.pointAPointBBuffer=hm(l,s,"vec4",u.aPointAPointB),this.pointCPointDBuffer=hm(l,s,"vec4",u.aPointCPointD),this.lineWidthBuffer=hm(l,s,"vec2",u.aLineWidth),this.colorBuffer=hm(l,s,"vec4",u.aColor),this.cornerRadiusBuffer=hm(l,s,"vec4",u.aCornerRadius),this.borderColorBuffer=hm(l,s,"vec4",u.aBorderColor),l.bindVertexArray(null),c}},{key:"buffers",get:function(){var e=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(e){return tX(e,"Buffer")}).map(function(t){return e[t]})),this._buffers}},{key:"startFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hA.SCREEN;this.panZoomMatrix=e,this.renderTarget=t,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(e,t){return!!e.visible()&&(!t||!t.isVisible||t.isVisible(e))}},{key:"drawTexture",value:function(e,t,n){var r=this.atlasManager,i=this.batchManager,a=r.getRenderTypeOpts(n);if(this._isVisible(e,a)&&(!e.isEdge()||this._isValidEdge(e))){if(this.renderTarget.picking&&a.getTexPickingMode){var o=a.getTexPickingMode(e);if(o===hD.IGNORE)return;if(o==hD.USE_BB)return void this.drawPickingRectangle(e,t,n)}var s,l=td(r.getAtlasInfo(e,n));try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.atlas,h=u.tex1,d=u.tex2;i.canAddToCurrentBatch(c)||this.endBatch();for(var f=i.getAtlasIndexForBatch(c),p=0,g=[[h,!0],[d,!1]];p<g.length;p++){var v=tp(g[p],2),y=v[0],b=v[1];if(0!=y.w){var x=this.instanceCount;this.vertTypeBuffer.getView(x)[0]=0;var w=this.indexBuffer.getView(x);hg(t,w),this.atlasIdBuffer.getView(x)[0]=f;var E=this.texBuffer.getView(x);E[0]=y.x,E[1]=y.y,E[2]=y.w,E[3]=y.h;var T=this.transformBuffer.getMatrixView(x);this.setTransformMatrix(e,T,a,u,b),this.instanceCount++,!b&&this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(e){l.e(e)}finally{l.f()}}}},{key:"setTransformMatrix",value:function(e,t,n,r){var i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=0;if(n.shapeProps&&n.shapeProps.padding&&(a=e.pstyle(n.shapeProps.padding).pfValue),r){var o=r.bb,s=r.tex1,l=r.tex2,u=s.w/(s.w+l.w);i||(u=1-u);var c=this._getAdjustedBB(o,a,i,u);this._applyTransformMatrix(t,c,n,e)}else{var h=n.getBoundingBox(e),d=this._getAdjustedBB(h,a,!0,1);this._applyTransformMatrix(t,d,n,e)}}},{key:"_applyTransformMatrix",value:function(e,t,n,r){hw(e);var i,a,o=n.getRotation?n.getRotation(r):0;if(0!==o){var s=n.getRotationPoint(r);hE(e,e,[s.x,s.y]),hT(e,e,o);var l=n.getRotationOffset(r);i=l.x+(t.xOffset||0),a=l.y+(t.yOffset||0)}else i=t.x1,a=t.y1;hE(e,e,[i,a]),hC(e,e,[t.w,t.h])}},{key:"_getAdjustedBB",value:function(e,t,n,r){var i=e.x1,a=e.y1,o=e.w,s=e.h,l=e.yOffset;t&&(i-=t,a-=t,o+=2*t,s+=2*t);var u=0,c=o*r;return n&&r<1?o=c:!n&&r<1&&(i+=u=o-c,o=c),{x1:i,y1:a,w:o,h:s,xOffset:u,yOffset:l}}},{key:"drawPickingRectangle",value:function(e,t,n){var r=this.atlasManager.getRenderTypeOpts(n),i=this.instanceCount;this.vertTypeBuffer.getView(i)[0]=4,hg(t,this.indexBuffer.getView(i)),hp([0,0,0],1,this.colorBuffer.getView(i));var a=this.transformBuffer.getMatrixView(i);this.setTransformMatrix(e,a,r),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(e,t,n){var r=this.simpleShapeOptions.get(n);if(this._isVisible(e,r)){var i=r.shapeProps,a=this._getVertTypeForShape(e,i.shape);if(void 0===a||r.isSimple&&!r.isSimple(e))return void this.drawTexture(e,t,n);var o=this.instanceCount;if(this.vertTypeBuffer.getView(o)[0]=a,5===a||6===a){var s=r.getBoundingBox(e),l=this._getCornerRadius(e,i.radius,s),u=this.cornerRadiusBuffer.getView(o);u[0]=l,u[1]=l,u[2]=l,u[3]=l,6===a&&(u[0]=0,u[2]=0)}hg(t,this.indexBuffer.getView(o)),hp(e.pstyle(i.color).value,e.pstyle(i.opacity).value,this.colorBuffer.getView(o));var c=this.lineWidthBuffer.getView(o);if(c[0]=0,c[1]=0,i.border){var h=e.pstyle("border-width").value;if(h>0){hp(e.pstyle("border-color").value,e.pstyle("border-opacity").value,this.borderColorBuffer.getView(o));var d=e.pstyle("border-position").value;if("inside"===d)c[0]=0,c[1]=-h;else if("outside"===d)c[0]=h,c[1]=0;else{var f=h/2;c[0]=f,c[1]=-f}}}var p=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(e,p,r),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(e,t){switch(e.pstyle(t).value){case"rectangle":return 4;case"ellipse":return 7;case"roundrectangle":case"round-rectangle":return 5;case"bottom-round-rectangle":return 6;default:return}}},{key:"_getCornerRadius",value:function(e,t,n){var r=n.w,i=n.h;return"auto"===e.pstyle(t).value?rq(r,i):Math.min(e.pstyle(t).pfValue,i/2,r/2)}},{key:"drawEdgeArrow",value:function(e,t,n){if(e.visible()){var r,i,a,o=e._private.rscratch;if(("source"===n?(r=o.arrowStartX,i=o.arrowStartY,a=o.srcArrowAngle):(r=o.arrowEndX,i=o.arrowEndY,a=o.tgtArrowAngle),!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(a))&&null!=a)&&"none"!==e.pstyle(n+"-arrow-shape").value){var s=e.pstyle(n+"-arrow-color").value,l=e.pstyle("opacity").value,u=e.pstyle("line-opacity").value,c=e.pstyle("width").pfValue,h=e.pstyle("arrow-scale").value,d=this.r.getArrowWidth(c,h),f=this.instanceCount,p=this.transformBuffer.getMatrixView(f);hw(p),hE(p,p,[r,i]),hC(p,p,[d,d]),hT(p,p,a),this.vertTypeBuffer.getView(f)[0]=3,hg(t,this.indexBuffer.getView(f)),hp(s,l*u,this.colorBuffer.getView(f)),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(e,t){if(e.visible()){var n=this._getEdgePoints(e);if(n){var r=e.pstyle("opacity").value,i=e.pstyle("line-opacity").value,a=e.pstyle("width").pfValue,o=e.pstyle("line-color").value,s=r*i;if(n.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==n.length){var l=this.instanceCount;this.vertTypeBuffer.getView(l)[0]=1,hg(t,this.indexBuffer.getView(l)),hp(o,s,this.colorBuffer.getView(l)),this.lineWidthBuffer.getView(l)[0]=a;var u=this.pointAPointBBuffer.getView(l);u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var c=0;c<n.length-2;c+=2){var h=this.instanceCount;this.vertTypeBuffer.getView(h)[0]=2,hg(t,this.indexBuffer.getView(h)),hp(o,s,this.colorBuffer.getView(h)),this.lineWidthBuffer.getView(h)[0]=a;var d=n[c-2],f=n[c-1],p=n[c],g=n[c+1],v=n[c+2],y=n[c+3],b=n[c+4],x=n[c+5];0==c&&(d=2*p-v+.001,f=2*g-y+.001),c==n.length-4&&(b=2*v-p+.001,x=2*y-g+.001);var w=this.pointAPointBBuffer.getView(h);w[0]=d,w[1]=f,w[2]=p,w[3]=g;var E=this.pointCPointDBuffer.getView(h);E[0]=v,E[1]=y,E[2]=b,E[3]=x,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(e){var t=e._private.rscratch;return!(t.badLine||null==t.allpts||isNaN(t.allpts[0]))}},{key:"_getEdgePoints",value:function(e){var t=e._private.rscratch;if(this._isValidEdge(e)){var n=t.allpts;if(4==n.length)return n;var r=this._getNumSegments(e);return this._getCurveSegmentPoints(n,r)}}},{key:"_getNumSegments",value:function(e){return Math.min(15,this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(e,t){if(4==e.length)return e;for(var n=Array((t+1)*2),r=0;r<=t;r++)if(0==r)n[0]=e[0],n[1]=e[1];else if(r==t)n[2*r]=e[e.length-2],n[2*r+1]=e[e.length-1];else{var i=r/t;this._setCurvePoint(e,i,n,2*r)}return n}},{key:"_setCurvePoint",value:function(e,t,n,r){if(e.length<=2)n[r]=e[0],n[r+1]=e[1];else{for(var i=Array(e.length-2),a=0;a<i.length;a+=2){var o=(1-t)*e[a]+t*e[a+2],s=(1-t)*e[a+1]+t*e[a+3];i[a]=o,i[a+1]=s}return this._setCurvePoint(i,t,n,r)}}},{key:"endBatch",value:function(){var e=this.gl,t=this.vao,n=this.vertexCount,r=this.instanceCount;if(0!==r){var i,a,o=this.renderTarget.picking?this.pickingProgram:this.program;e.useProgram(o),e.bindVertexArray(t);var s,l=td(this.buffers);try{for(l.s();!(s=l.n()).done;)s.value.bufferSubData(r)}catch(e){l.e(e)}finally{l.f()}for(var u=this.batchManager.getAtlases(),c=0;c<u.length;c++)u[c].bufferIfNeeded(e);for(var h=0;h<u.length;h++)e.activeTexture(e.TEXTURE0+h),e.bindTexture(e.TEXTURE_2D,u[h].texture),e.uniform1i(o.uTextures[h],h);e.uniform1f(o.uZoom,(a=(i=this.r).pixelRatio,i.cy.zoom()*a)),e.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),e.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var d=hp(this.bgColor,1);e.uniform4fv(o.uBGColor,d),e.drawArraysInstanced(e.TRIANGLES,0,n,r),e.bindVertexArray(null),e.bindTexture(e.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:r,atlasCount:u.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var e=this.atlasManager.getDebugInfo(),t=e.reduce(function(e,t){return e+t.atlasCount},0),n=this.batchDebugInfo,r=n.reduce(function(e,t){return e+t.count},0);return{atlasInfo:e,totalAtlases:t,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:n.length,batchInfo:n,totalInstances:r}}}]),hR={};function hM(e,t){return nI(e._private.rscratch,"labelWrapCachedLines",t)||[]}hR.initWebgl=function(e,t){var n,r,i,a,o,s,l,u,c=this,h=c.data.contexts[c.WEBGL];e.bgColor=t1((n=c.cy.container())&&n.style&&n.style.backgroundColor||"white"),e.webglTexSize=Math.min(e.webglTexSize,h.getParameter(h.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,h.getParameter(h.MAX_TEXTURE_IMAGE_UNITS)),c.webglDebug=e.webglDebug,c.webglDebugShowAtlases=e.webglDebugShowAtlases,l=h.createFramebuffer(),h.bindFramebuffer(h.FRAMEBUFFER,l),u=h.createTexture(),h.bindTexture(h.TEXTURE_2D,u),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,u,0),h.bindFramebuffer(h.FRAMEBUFFER,null),l.setFramebufferAttachmentSizes=function(e,t){h.bindTexture(h.TEXTURE_2D,u),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e,t,0,h.RGBA,h.UNSIGNED_BYTE,null)},c.pickingFrameBuffer=l,c.pickingFrameBuffer.needsDraw=!0,c.drawing=new h_(c,h,e);var d=function(e){return function(t){return c.getTextAngle(t,e)}},f=function(e){return function(t){var n=t.pstyle(e);return n&&n.value}},p=function(e){return function(t){return t.pstyle("".concat(e,"-opacity")).value>0}},g=function(e){return"yes"===e.pstyle("text-events").strValue?hD.USE_BB:hD.IGNORE},v=function(e){var t=e.position(),n=t.x,r=t.y,i=e.outerWidth(),a=e.outerHeight();return{w:i,h:a,x1:n-i/2,y1:r-a/2}};c.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),c.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),c.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),c.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:v,isSimple:hf,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),c.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:v,isVisible:p("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),c.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:v,isVisible:p("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),c.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:g,getKey:hO(t.getLabelKey,null),getBoundingBox:hI(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:d(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:f("label")}),c.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:g,getKey:hO(t.getSourceLabelKey,"source"),getBoundingBox:hI(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:d("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:f("source-label")}),c.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:g,getKey:hO(t.getTargetLabelKey,"target"),getBoundingBox:hI(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:d("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:f("target-label")});var y=nn(function(){console.log("garbage collect flag set"),c.data.gc=!0},1e4);c.onUpdateEleCalcs(function(e,t){var n=!1;t&&t.length>0&&(n|=c.drawing.invalidate(t)),n&&y()}),i=(r=c).render,r.render=function(e){e=e||{};var t,n,a,o,s=r.cy;r.webgl&&(s.zoom()>7.99?((n=(t=r).data.contexts[t.WEBGL]).clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),i.call(r,e)):(a=r,(o=function(e){e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,a.canvasWidth,a.canvasHeight),e.restore()})(a.data.contexts[a.NODE]),o(a.data.contexts[a.DRAG]),hz(r,e,hA.SCREEN)))},a=r.matchCanvasSize,r.matchCanvasSize=function(e){a.call(r,e),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0},r.findNearestElements=function(e,t,n,i){return function(e,t,n){var r,i,a,o=function(e,t,n,r,i){var a=hd(e),o=a.pan,s=a.zoom,l=tp((g=t*s+o.x,v=n*s+o.y,[g,v=Math.round(e.canvasHeight-v)]),2),u=l[0],c=l[1],h=e.data.contexts[e.WEBGL];h.bindFramebuffer(h.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(h.viewport(0,0,h.canvas.width,h.canvas.height),hz(e,null,hA.PICKING),e.pickingFrameBuffer.needsDraw=!1);var d=new Uint8Array(144);h.readPixels(u-3,c-3,6,6,h.RGBA,h.UNSIGNED_BYTE,d),h.bindFramebuffer(h.FRAMEBUFFER,null);for(var f=new Set,p=0;p<36;p++){var g,v,y,b=(y=d.slice(4*p,4*p+4))[0]+(y[1]<<8)+(y[2]<<16)+(y[3]<<24)-1;b>=0&&f.add(b)}return f}(e,t,n),s=e.getCachedZSortedEles(),l=td(o);try{for(l.s();!(a=l.n()).done;){var u=s[a.value];if(!r&&u.isNode()&&(r=u),!i&&u.isEdge()&&(i=u),r&&i)break}}catch(e){l.e(e)}finally{l.f()}return[r,i].filter(Boolean)}(r,e,t)},o=r.invalidateCachedZSortedEles,r.invalidateCachedZSortedEles=function(){o.call(r),r.pickingFrameBuffer.needsDraw=!0},s=r.notify,r.notify=function(e,t){s.call(r,e,t),"viewport"===e||"bounds"===e?r.pickingFrameBuffer.needsDraw=!0:"background"===e&&r.drawing.invalidate(t,{type:"node-body"})}};var hO=function(e,t){return function(n){var r=e(n),i=hM(n,t);return i.length>1?i.map(function(e,t){return"".concat(r,"_").concat(t)}):r}},hI=function(e,t){return function(n,r){var i=e(n);if("string"==typeof r){var a=r.indexOf("_");if(a>0){var o=Number(r.substring(a+1)),s=hM(n,t),l=i.h/s.length,u=l*o,c=i.y1+u;return{x1:i.x1,w:i.w,y1:c,h:l,yOffset:u}}}return i}};function hN(e,t){var n=e.canvasWidth,r=e.canvasHeight,i=hd(e),a=i.pan,o=i.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n,r),t.translate(a.x,a.y),t.scale(o,o)}function hL(e,t,n){var r=e.drawing;t+=1,n.isNode()?(r.drawNode(n,t,"node-underlay"),r.drawNode(n,t,"node-body"),r.drawTexture(n,t,"label"),r.drawNode(n,t,"node-overlay")):(r.drawEdgeLine(n,t),r.drawEdgeArrow(n,t,"source"),r.drawEdgeArrow(n,t,"target"),r.drawTexture(n,t,"label"),r.drawTexture(n,t,"edge-source-label"),r.drawTexture(n,t,"edge-target-label"))}function hz(e,t,n){e.webglDebug&&(W=performance.now());var r=e.drawing,i=0;if(n.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&e.drawSelectionRectangle(t,function(t){return hN(e,t)}),e.data.canvasNeedsRedraw[e.NODE]||n.picking){var a,o,s,l,u,c,h,d,f,p,g,v,y,b,x,w,E,T,C,S,k,P,B,A,D,_,R,M,O,I,N,L=e.data.contexts[e.WEBGL];n.screen?(L.clearColor(0,0,0,0),L.enable(L.BLEND),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA)):L.disable(L.BLEND),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),L.viewport(0,0,L.canvas.width,L.canvas.height);var z=(a=e.canvasWidth,o=e.canvasHeight,l=(s=hd(e)).pan,u=s.zoom,hE(c=hx(),c,[l.x,l.y]),hC(c,c,[u,u]),d=h=hx(),d[0]=2/a,d[1]=0,d[2]=0,d[3]=0,d[4]=-2/o,d[5]=0,d[6]=-1,d[7]=1,d[8]=1,p=f=hx(),g=h[0],v=h[1],y=h[2],b=h[3],x=h[4],w=h[5],E=h[6],T=h[7],C=h[8],S=c[0],k=c[1],P=c[2],B=c[3],A=c[4],D=c[5],_=c[6],R=c[7],M=c[8],p[0]=S*g+k*b+P*E,p[1]=S*v+k*x+P*T,p[2]=S*y+k*w+P*C,p[3]=B*g+A*b+D*E,p[4]=B*v+A*x+D*T,p[5]=B*y+A*w+D*C,p[6]=_*g+R*b+M*E,p[7]=_*v+R*x+M*T,p[8]=_*y+R*w+M*C,f),F=e.getCachedZSortedEles();if(i=F.length,r.startFrame(z,n),n.screen){for(var V=0;V<F.nondrag.length;V++)hL(e,V,F.nondrag[V]);for(var j=0;j<F.drag.length;j++)hL(e,j,F.drag[j])}else if(n.picking)for(var U=0;U<F.length;U++)hL(e,U,F[U]);r.endFrame(),n.screen&&e.webglDebugShowAtlases&&((O=e.data.contexts[e.NODE]).save(),hN(e,O),O.strokeStyle="rgba(0, 0, 0, 0.3)",O.beginPath(),O.moveTo(-1e3,0),O.lineTo(1e3,0),O.stroke(),O.beginPath(),O.moveTo(0,-1e3),O.lineTo(0,1e3),O.stroke(),O.restore(),N=0,(I=function(t,n,r){for(var i=t.atlasManager.getAtlasCollection(n),a=e.data.contexts[e.NODE],o=i.atlases,s=0;s<o.length;s++){var l=o[s].canvas;if(l){var u=l.width,c=l.height,h=u*s,d=l.height*r;a.save(),a.scale(.4,.4),a.drawImage(l,h,d),a.strokeStyle="black",a.rect(h,d,u,c),a.stroke(),a.restore()}}})(e.drawing,"node",N++),I(e.drawing,"label",N++)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var q=Math.ceil(performance.now()-W),X=r.getDebugInfo(),Y=["".concat(i," elements"),"".concat(X.totalInstances," instances"),"".concat(X.batchCount," batches"),"".concat(X.totalAtlases," atlases"),"".concat(X.wrappedCount," wrapped textures"),"".concat(X.simpleCount," simple shapes")].join(", ");console.log("WebGL (".concat(n.name,") - frame time ").concat(q,"ms")),console.log("Totals:"),console.log("  ".concat(Y)),console.log("Texture Atlases Used:");var W,H,G=td(X.atlasInfo);try{for(G.s();!(H=G.n()).done;){var K=H.value;console.log("  ".concat(K.type,": ").concat(K.keyCount," keys, ").concat(K.atlasCount," atlases"))}}catch(e){G.e(e)}finally{G.f()}console.log("")}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,r.gc())}var hF={};hF.drawPolygonPath=function(e,t,n,r,i,a){var o=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],n+s*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+o*a[2*l],n+s*a[2*l+1]);e.closePath()},hF.drawRoundPolygonPath=function(e,t,n,r,i,a,o){o.forEach(function(t){return cx(e,t)}),e.closePath()},hF.drawRoundRectanglePath=function(e,t,n,r,i,a){var o=r/2,s=i/2,l="auto"===a?rq(r,i):Math.min(a,s,o);e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.arcTo(t+o,n-s,t+o,n,l),e.arcTo(t+o,n+s,t,n+s,l),e.arcTo(t-o,n+s,t-o,n,l),e.arcTo(t-o,n-s,t,n-s,l),e.lineTo(t,n-s),e.closePath()},hF.drawBottomRoundRectanglePath=function(e,t,n,r,i,a){var o=r/2,s=i/2,l="auto"===a?rq(r,i):a;e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.lineTo(t+o,n-s),e.lineTo(t+o,n),e.arcTo(t+o,n+s,t,n+s,l),e.arcTo(t-o,n+s,t-o,n,l),e.lineTo(t-o,n-s),e.lineTo(t,n-s),e.closePath()},hF.drawCutRectanglePath=function(e,t,n,r,i,a,o){var s=r/2,l=i/2,u="auto"===o?rY():o;e.beginPath&&e.beginPath(),e.moveTo(t-s+u,n-l),e.lineTo(t+s-u,n-l),e.lineTo(t+s,n-l+u),e.lineTo(t+s,n+l-u),e.lineTo(t+s-u,n+l),e.lineTo(t-s+u,n+l),e.lineTo(t-s,n+l-u),e.lineTo(t-s,n-l+u),e.closePath()},hF.drawBarrelPath=function(e,t,n,r,i){var a=r/2,o=i/2,s=t-a,l=t+a,u=n-o,c=n+o,h=rW(r,i),d=h.widthOffset,f=h.heightOffset,p=h.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(s,u+f),e.lineTo(s,c-f),e.quadraticCurveTo(s+p,c,s+d,c),e.lineTo(l-d,c),e.quadraticCurveTo(l-p,c,l,c-f),e.lineTo(l,u+f),e.quadraticCurveTo(l-p,u,l-d,u),e.lineTo(s+d,u),e.quadraticCurveTo(s+p,u,s,u+f),e.closePath()};for(var hV={},hj={},hU=Math.PI/40,hq=0*Math.PI;hq<2*Math.PI;hq+=hU)hV[hq]=Math.sin(hq),hj[hq]=Math.cos(hq);hF.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var a,o,s=r/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=hU)a=t-s*hV[u]*0+s*hj[u]*1,o=n+l*hj[u]*0+l*hV[u]*1,0===u?e.moveTo(a,o):e.lineTo(a,o);e.closePath()};var hX={};function hY(e){var t=e.indexOf(",");return e.substr(t+1)}function hW(e,t,n){var r=function(){return t.toDataURL(n,e.quality)};switch(e.output){case"blob-promise":return new i0(function(r,i){try{t.toBlob(function(e){null!=e?r(e):i(Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(e){i(e)}});case"blob":return function(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return new Blob([r],{type:t})}(hY(r()),n);case"base64":return hY(r());default:return r()}}hX.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},hX.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=e.full?Math.ceil(n.w):r[2],a=e.full?Math.ceil(n.h):r[3],o=tD(e.maxWidth)||tD(e.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==e.scale)i*=e.scale,a*=e.scale,l=e.scale;else if(o){var u=1/0,c=1/0;tD(e.maxWidth)&&(u=l*e.maxWidth/i),tD(e.maxHeight)&&(c=l*e.maxHeight/a),i*=l=Math.min(u,c),a*=l}o||(i*=s,a*=s,l*=s);var h=document.createElement("canvas");h.width=i,h.height=a,h.style.width=i+"px",h.style.height=a+"px";var d=h.getContext("2d");if(i>0&&a>0){d.clearRect(0,0,i,a),d.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var p=t.pan(),g={x:p.x*l,y:p.y*l};l*=t.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}e.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=e.bg,d.rect(0,0,i,a),d.fill())}return h},hX.png=function(e){return hW(e,this.bufferCanvasImage(e),"image/png")},hX.jpg=function(e){return hW(e,this.bufferCanvasImage(e),"image/jpeg")};var hH={};hH.nodeShapeImpl=function(e,t,n,r,i,a,o,s){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,i,a);case"polygon":return this.drawPolygonPath(t,n,r,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(t,n,r,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,i,a,s);case"barrel":return this.drawBarrelPath(t,n,r,i,a)}};var hG=hK.prototype;function hK(e){var t=this,n=t.cy.window().document;e.webgl&&(hG.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:Array(hG.CANVAS_LAYERS),contexts:Array(hG.CANVAS_LAYERS),canvasNeedsRedraw:Array(hG.CANVAS_LAYERS),bufferCanvases:Array(hG.BUFFER_COUNT),bufferContexts:Array(hG.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";t.data.canvasContainer=n.createElement("div");var a=t.data.canvasContainer.style;t.data.canvasContainer.style[r]=i,a.position="relative",a.zIndex="0",a.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[r]=i;var s={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};tx&&tx.userAgent.match(/msie|trident|edge/i)&&(s["-ms-touch-action"]="none",s["touch-action"]="none");for(var l=0;l<hG.CANVAS_LAYERS;l++){var u=t.data.canvases[l]=n.createElement("canvas"),c=hG.CANVAS_TYPES[l];t.data.contexts[l]=u.getContext(c),t.data.contexts[l]||nC("Could not create canvas of type "+c),Object.keys(s).forEach(function(e){u.style[e]=s[e]}),u.style.position="absolute",u.setAttribute("data-id","layer"+l),u.style.zIndex=String(hG.CANVAS_LAYERS-l),t.data.canvasContainer.appendChild(u),t.data.canvasNeedsRedraw[l]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[hG.NODE].setAttribute("data-id","layer"+hG.NODE+"-node"),t.data.canvases[hG.SELECT_BOX].setAttribute("data-id","layer"+hG.SELECT_BOX+"-selectbox"),t.data.canvases[hG.DRAG].setAttribute("data-id","layer"+hG.DRAG+"-drag"),t.data.canvases[hG.WEBGL]&&t.data.canvases[hG.WEBGL].setAttribute("data-id","layer"+hG.WEBGL+"-webgl");for(var l=0;l<hG.BUFFER_COUNT;l++)t.data.bufferCanvases[l]=n.createElement("canvas"),t.data.bufferContexts[l]=t.data.bufferCanvases[l].getContext("2d"),t.data.bufferCanvases[l].style.position="absolute",t.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),t.data.bufferCanvases[l].style.zIndex=String(-l-1),t.data.bufferCanvases[l].style.visibility="hidden";t.pathsEnabled=!0;var h=rs(),d=function(e){return{x:-e.w/2,y:-e.h/2}},f=function(e){return e[0]._private.nodeKey},p=function(e){return e[0]._private.labelStyleKey},g=function(e){return e[0]._private.sourceLabelStyleKey},v=function(e){return e[0]._private.targetLabelStyleKey},y=function(e,n,r,i,a){return t.drawElement(e,n,r,!1,!1,a)},b=function(e,n,r,i,a){return t.drawElementText(e,n,r,i,"main",a)},x=function(e,n,r,i,a){return t.drawElementText(e,n,r,i,"source",a)},w=function(e,n,r,i,a){return t.drawElementText(e,n,r,i,"target",a)},E=function(e){return e.boundingBox(),e[0]._private.bodyBounds},T=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||h},C=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||h},S=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||h},k=function(e,t){return t},P=function(e){var t;return{x:((t=E(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2}},B=function(e,t,n){var r=e?e+"-":"";return{x:t.x+n.pstyle(r+"text-margin-x").pfValue,y:t.y+n.pstyle(r+"text-margin-y").pfValue}},A=function(e,t,n){var r=e[0]._private.rscratch;return{x:r[t],y:r[n]}},D=function(e){return B("",A(e,"labelX","labelY"),e)},_=function(e){return B("source",A(e,"sourceLabelX","sourceLabelY"),e)},R=function(e){return B("target",A(e,"targetLabelX","targetLabelY"),e)},M=function(e){return d(E(e))},O=function(e){return d(C(e))},I=function(e){return d(S(e))},N=function(e){var t=T(e),n=d(T(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":n.x=-t.w-(t.leftPad||0);break;case"right":n.x=-(t.rightPad||0)}switch(e.pstyle("text-valign").value){case"top":n.y=-t.h-(t.topPad||0);break;case"bottom":n.y=-(t.botPad||0)}}return n},L=t.data.eleTxrCache=new cG(t,{getKey:f,doesEleInvalidateKey:function(e){var t=e[0]._private;return t.oldBackgroundTimestamp!==t.backgroundTimestamp},drawElement:y,getBoundingBox:E,getRotationPoint:P,getRotationOffset:M,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),z=t.data.lblTxrCache=new cG(t,{getKey:p,drawElement:b,getBoundingBox:T,getRotationPoint:D,getRotationOffset:N,isVisible:k}),F=t.data.slbTxrCache=new cG(t,{getKey:g,drawElement:x,getBoundingBox:C,getRotationPoint:_,getRotationOffset:O,isVisible:k}),V=t.data.tlbTxrCache=new cG(t,{getKey:v,drawElement:w,getBoundingBox:S,getRotationPoint:R,getRotationOffset:I,isVisible:k}),j=t.data.lyrTxrCache=new cZ(t);t.onUpdateEleCalcs(function(e,t){L.invalidateElements(t),z.invalidateElements(t),F.invalidateElements(t),V.invalidateElements(t),j.invalidateElements(t);for(var n=0;n<t.length;n++){var r=t[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}});var U=function(e){for(var t=0;t<e.length;t++)j.enqueueElementRefinement(e[t].ele)};L.onDequeue(U),z.onDequeue(U),F.onDequeue(U),V.onDequeue(U),e.webgl&&t.initWebgl(e,{getStyleKey:f,getLabelKey:p,getSourceLabelKey:g,getTargetLabelKey:v,drawElement:y,drawLabel:b,drawSourceLabel:x,drawTargetLabel:w,getElementBox:E,getLabelBox:T,getSourceLabelBox:C,getTargetLabelBox:S,getElementRotationPoint:P,getElementRotationOffset:M,getLabelRotationPoint:D,getSourceLabelRotationPoint:_,getTargetLabelRotationPoint:R,getLabelRotationOffset:N,getSourceLabelRotationOffset:O,getTargetLabelRotationOffset:I})}hG.CANVAS_LAYERS=3,hG.SELECT_BOX=0,hG.DRAG=1,hG.NODE=2,hG.WEBGL=3,hG.CANVAS_TYPES=["2d","2d","2d","webgl2"],hG.BUFFER_COUNT=3,hG.TEXTURE_BUFFER=0,hG.MOTIONBLUR_BUFFER_NODE=1,hG.MOTIONBLUR_BUFFER_DRAG=2,hG.redrawHint=function(e,t){switch(e){case"eles":this.data.canvasNeedsRedraw[hG.NODE]=t;break;case"drag":this.data.canvasNeedsRedraw[hG.DRAG]=t;break;case"select":this.data.canvasNeedsRedraw[hG.SELECT_BOX]=t;break;case"gc":this.data.gc=!0}};var hZ="undefined"!=typeof Path2D;hG.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},hG.usePaths=function(){return hZ&&this.pathsEnabled},hG.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},hG.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},hG.makeOffscreenCanvas=function(e,t){var n;return("undefined"==typeof OffscreenCanvas?"undefined":ty(OffscreenCanvas))!=="undefined"?n=new OffscreenCanvas(e,t):((n=this.cy.window().document.createElement("canvas")).width=e,n.height=t),n},[cJ,c4,hn,hi,ha,hs,hu,hR,hF,hX,hH].forEach(function(e){t$(hG,e)});var h$=[{name:"null",impl:sq},{name:"base",impl:cj},{name:"canvas",impl:hK}],hQ={},hJ={};function h0(e,t,n){var r=n,i=function(n){nk("Can not register `"+t+"` for `"+e+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===e)if(sn.prototype[t])return i(t);else sn.prototype[t]=n;else if("collection"===e)if(oI.prototype[t])return i(t);else oI.prototype[t]=n;else if("layout"===e){for(var a=function(e){this.options=e,n.call(this,e),tA(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(n.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=n.prototype.stop;o.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var n=0;n<t.length;n++)t[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var h=function(e){return e._private.cy},d={addEventFields:function(e,t){t.layout=e,t.cy=h(e),t.target=e},bubble:function(){return!0},parent:function(e){return h(e)}};t$(o,{createEmitter:function(){return this._private.emitter=new oa(d,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),as.eventAliasesOn(o),r=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var f=h1("renderer","base"),p=f.prototype,g=n.prototype,v=function(){f.apply(this,arguments),n.apply(this,arguments)},y=v.prototype;for(var b in p){var x=p[b];if(null!=g[b])return i(b);y[b]=x}for(var w in g)y[w]=g[w];p.clientFunctions.forEach(function(e){y[e]=y[e]||function(){nC("Renderer does not implement `renderer."+e+"()` on its prototype")}}),r=v}else if("__proto__"===e||"constructor"===e||"prototype"===e)return nC(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return t5({map:hQ,keys:[e,t],value:r})}function h1(e,t){return t3({map:hQ,keys:[e,t]})}function h2(e,t,n,r,i){return t5({map:hJ,keys:[e,t,n,r],value:i})}function h5(e,t,n,r){return t3({map:hJ,keys:[e,t,n,r]})}var h3=function(){return 2==arguments.length?h1.apply(null,arguments):3==arguments.length?h0.apply(null,arguments):4==arguments.length?h5.apply(null,arguments):5==arguments.length?h2.apply(null,arguments):void nC("Invalid extension access syntax")};sn.prototype.extension=h3,[{type:"layout",extensions:sU},{type:"renderer",extensions:h$}].forEach(function(e){e.extensions.forEach(function(t){h0(e.type,t.name,t.impl)})});var h4=function(){if(!(this instanceof h4))return new h4;this.length=0},h6=h4.prototype;h6.instanceString=function(){return"stylesheet"},h6.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},h6.css=function(e,t){var n=this.length-1;if(tk(e))this[n].properties.push({name:e,value:t});else if(tA(e))for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a];if(null!=o){var s=o9.properties[a]||o9.properties[tj(a)];if(null!=s){var l=s.name;this[n].properties.push({name:l,value:o})}}}return this},h6.style=h6.css,h6.generateStyle=function(e){var t=new o9(e);return this.appendToStyle(t)},h6.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,i=n.properties;e.selector(r);for(var a=0;a<i.length;a++){var o=i[a];e.css(o.name,o.value)}}return e};var h8=function(e){return(void 0===e&&(e={}),tA(e))?new sn(e):tk(e)?h3.apply(h3,arguments):void 0};h8.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(h8),e.apply(null,t),this},h8.warnings=function(e){return nS(e)},h8.version="3.33.1",h8.stylesheet=h8.Stylesheet=h4;let h9=()=>{let e=tl.default.useRef(null),t=async()=>(await ts.get("http://localhost:8080/graph")).data,n=async()=>{let n=await t();if(!e.current)return;let r=function(e){let t={};e.forEach(e=>{t[e.name]=e.dependencies});let n=new Set,r=[],i=[];return Object.keys(t).forEach(e=>{n.has(e)||function e(a){if(t[a]){if(r.includes(a)){let e=r.indexOf(a),t=r.slice(e).concat(a);for(let e=0;e<t.length-1;e++)i.push({source:t[e],target:t[e+1]});return}if(!n.has(a)){for(let n of(r.push(a),t[a]))e(n);r.pop(),n.add(a)}}}(e)}),i}(n),i=[],a=new Set;n.forEach(e=>{a.has(e.name)||(i.push({data:{id:e.name,label:e.name.split(".").pop()}}),a.add(e.name)),e.dependencies.forEach(t=>{a.has(t)||(i.push({data:{id:t,label:t.split(".").pop()}}),a.add(t));let n=r.some(n=>n.source===e.name&&n.target===t);i.push({data:{source:e.name,target:t},classes:n?"circular":""})})});let o=h8({container:e.current,elements:i,style:[{selector:"node",style:{"background-color":"#4a90e2",label:"data(label)",color:"#fff","text-valign":"center","text-halign":"center","font-size":"5px",shape:"round-rectangle",padding:"10px"}},{selector:"edge",style:{width:2,"line-color":"#999","target-arrow-color":"#999","target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:"edge.circular",style:{"line-color":"red","target-arrow-color":"red",width:3}}],layout:{name:"cose",animate:!0}});return()=>{o.destroy()}};return(0,tl.useEffect)(()=>{n()},[]),(0,l.jsx)("div",{ref:e,className:"w-[100vw] h-[100vh]"})}}]);